/*! For license information please see 533.daa5b563.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[533],{812(e,s,t){t.d(s,{u:()=>n});var r=t(5043),o=t(7719),l=t(614),a=t(579);const n=e=>{let{isOpen:s,title:t,message:n,confirmText:i="Confirm",cancelText:c="Cancel",confirmVariant:d="danger",isLoading:u=!1,onConfirm:f,onCancel:g}=e;const m=(0,r.useRef)(null),x=(0,r.useRef)(null),h=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!s)return;const e=e=>{"Escape"!==e.key||u||g()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,u,g]),(0,r.useEffect)(()=>{var e;if(!s)return;const t=m.current;if(!t)return;null===(e=x.current)||void 0===e||e.focus();const r=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),o=r[0],l=r[r.length-1],a=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===o&&(e.preventDefault(),null===l||void 0===l||l.focus()):document.activeElement===l&&(e.preventDefault(),null===o||void 0===o||o.focus()))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[s]);const y=(0,r.useCallback)(e=>{e.target!==e.currentTarget||u||g()},[u,g]),b=(0,r.useCallback)(async()=>{u||await f()},[u,f]);if(!s)return null;const w="danger"===d?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500";return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ".concat("z-50"),onClick:y,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,a.jsxs)("div",{ref:m,className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["danger"===d&&(0,a.jsx)(o.A,{className:"text-red-500 flex-shrink-0",size:24}),(0,a.jsx)("h3",{id:"modal-title",className:"text-xl font-bold text-white",children:t})]}),(0,a.jsx)("button",{onClick:g,disabled:u,className:"text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:(0,a.jsx)(l.A,{size:20})})]}),(0,a.jsx)("p",{id:"modal-description",className:"text-gray-300 mb-6",children:n}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)("button",{ref:x,onClick:g,disabled:u,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800",children:c}),(0,a.jsx)("button",{ref:h,onClick:b,disabled:u,className:"px-4 py-2 ".concat(w," text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 min-w-[100px]"),children:u?"Processing...":i})]})]})})}},1884(e,s,t){t.d(s,{A:()=>r});const r=(0,t(5228).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5533(e,s,t){t.d(s,{FollowManagement:()=>h});var r=t(5043),o=t(6256),l=t(812),a=t(7819),n=t(2054),i=t(3329),c=t(9233),d=t(516),u=t(9292),f=t(1884),g=t(7118),m=t(579);const x=e=>{let{type:s}=e;return(0,m.jsxs)("div",{className:"text-center py-12",children:[(0,m.jsx)("div",{className:"mb-4",children:"following"===s?(0,m.jsx)(f.A,{className:"w-16 h-16 text-gray-600 mx-auto"}):(0,m.jsx)(g.A,{className:"w-16 h-16 text-gray-600 mx-auto"})}),(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"following"===s?"You're not following anyone yet":"No followers yet"}),(0,m.jsx)("p",{className:"text-sm text-gray-500 max-w-sm mx-auto",children:"following"===s?"Start following users to get notified about their ratings and discover what they're watching":"When other users follow you, they'll appear here"})]})},h=e=>{let{onViewUser:s}=e;const[t,f]=(0,r.useState)([]),[g,h]=(0,r.useState)([]),[y,b]=(0,r.useState)([]),[w,p]=(0,r.useState)([]),[j,v]=(0,r.useState)("following"),[N,k]=(0,r.useState)(!0),[C,A]=(0,r.useState)(!1),[F,S]=(0,r.useState)(!1),[L,E]=(0,r.useState)(""),[z,R]=(0,r.useState)({type:null,message:""}),[T,U]=(0,r.useState)({show:!1,userId:null,username:""}),I=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?A(!0):k(!0);try{const[s,t]=await Promise.all([o.FH.follows.getFollowing(),o.FH.follows.getFollowers()]);f(s),h(t),b(s),p(t),e&&M("success","Follow list refreshed successfully")}catch(s){s instanceof o.hD?M("error",s.message):s instanceof o.Dr?M("error","Network error. Please check your connection."):s instanceof o.MU?M("error","Request timeout. Please try again."):M("error","Failed to load follow data"),console.error("Failed to load follow data",s)}finally{k(!1),A(!1)}},[]);(0,r.useEffect)(()=>{I()},[I]),(0,r.useEffect)(()=>{if(!L.trim())return b(t),void p(g);const e=L.toLowerCase();b(t.filter(s=>{var t;return s.user.username.toLowerCase().includes(e)||(null===(t=s.user.email)||void 0===t?void 0:t.toLowerCase().includes(e))})),p(g.filter(s=>{var t;return s.username.toLowerCase().includes(e)||(null===(t=s.email)||void 0===t?void 0:t.toLowerCase().includes(e))}))},[L,t,g]);const M=(0,r.useCallback)((e,s)=>{R({type:e,message:s}),setTimeout(()=>R({type:null,message:""}),5e3)},[]),D=(0,r.useCallback)(()=>{E(""),I(!0)},[I]),P=(0,r.useCallback)(async()=>{if(T.userId){S(!0);try{await o.FH.follows.unfollowUser(T.userId),f(e=>e.filter(e=>e.user.id!==T.userId)),b(e=>e.filter(e=>e.user.id!==T.userId)),M("success","Successfully unfollowed ".concat(T.username)),U({show:!1,userId:null,username:""})}catch(e){e instanceof o.hD?M("error",e.message):e instanceof o.Dr?M("error","Network error. Please check your connection."):e instanceof o.MU?M("error","Request timeout. Please try again."):M("error","Failed to unfollow user"),console.error("Failed to unfollow",e)}finally{S(!1)}}},[T,M]),q=(0,r.useCallback)((e,s)=>{U({show:!0,userId:e,username:s})},[]),H=(0,r.useCallback)(()=>{F||U({show:!1,userId:null,username:""})},[F]),V=(0,r.useCallback)(e=>{v(e),E("")},[]),O=e=>0===e||null===e?"No notifications":"Notify when rating \u2265 ".concat(e);if(N)return(0,m.jsxs)("div",{className:"text-center py-12",children:[(0,m.jsx)(d.A,{className:"w-8 h-8 text-blue-500 animate-spin mx-auto mb-4"}),(0,m.jsx)("p",{className:"text-gray-400",children:"Loading follow data..."})]});const Y=y,K=w;return(0,m.jsxs)("div",{className:"space-y-4",children:[z.type&&(0,m.jsxs)("div",{className:"p-4 rounded-lg flex items-center gap-3 ".concat("success"===z.type?"bg-green-900 bg-opacity-20 border border-green-700 text-green-400":"bg-red-900 bg-opacity-20 border border-red-700 text-red-400"),role:"alert",children:["success"===z.type?(0,m.jsx)(n.A,{size:20}):(0,m.jsx)(a.A,{size:20}),(0,m.jsx)("span",{children:z.message})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Follow Management"}),(0,m.jsx)("button",{onClick:D,disabled:C,className:"p-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh follow data",children:(0,m.jsx)(d.A,{size:20,className:C?"animate-spin":""})})]}),(0,m.jsxs)("div",{className:"flex gap-2",role:"tablist",children:[(0,m.jsxs)("button",{role:"tab","aria-selected":"following"===j,"aria-controls":"following-panel",onClick:()=>V("following"),className:"px-4 py-2 rounded font-medium transition-colors ".concat("following"===j?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:["Following (",t.length,")"]}),(0,m.jsxs)("button",{role:"tab","aria-selected":"followers"===j,"aria-controls":"followers-panel",onClick:()=>V("followers"),className:"px-4 py-2 rounded font-medium transition-colors ".concat("followers"===j?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:["Followers (",g.length,")"]})]}),(t.length>0||g.length>0)&&(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(u.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,m.jsx)("input",{type:"text",value:L,onChange:e=>E(e.target.value),placeholder:"Search ".concat(j,"..."),className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none","aria-label":"Search ".concat(j)})]}),"following"===j&&(0,m.jsx)("div",{id:"following-panel",role:"tabpanel",className:"space-y-3",children:0===Y.length?L?(0,m.jsxs)("div",{className:"text-center py-8 text-gray-400",children:['No results found for "',L,'"']}):(0,m.jsx)(x,{type:"following"}):Y.map(e=>(0,m.jsxs)("div",{className:"bg-gray-800 p-4 rounded border border-gray-700 flex justify-between items-center hover:bg-gray-700 transition-colors group",children:[(0,m.jsx)("button",{onClick:()=>s(e.user.id),className:"flex-1 text-left focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900 rounded -m-2 p-2",children:(0,m.jsx)("div",{className:"flex items-center gap-3",children:(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("p",{className:"text-white font-medium group-hover:text-blue-400 transition-colors",children:e.user.username}),(0,m.jsx)("div",{className:"flex items-center gap-2 mt-1",children:null===e.minimumRatingThreshold?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i.A,{size:14,className:"text-gray-500"}),(0,m.jsx)("p",{className:"text-sm text-gray-500",children:O(e.minimumRatingThreshold)})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.A,{size:14,className:"text-blue-400"}),(0,m.jsx)("p",{className:"text-sm text-gray-400",children:O(e.minimumRatingThreshold)})]})})]})})}),(0,m.jsx)("button",{onClick:()=>q(e.user.id,e.user.username),className:"ml-4 px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-900","aria-label":"Unfollow ".concat(e.user.username),children:"Unfollow"})]},e.id))}),"followers"===j&&(0,m.jsx)("div",{id:"followers-panel",role:"tabpanel",className:"space-y-3",children:0===K.length?L?(0,m.jsxs)("div",{className:"text-center py-8 text-gray-400",children:['No results found for "',L,'"']}):(0,m.jsx)(x,{type:"followers"}):K.map(e=>(0,m.jsxs)("button",{onClick:()=>s(e.id),className:"w-full bg-gray-800 p-4 rounded border border-gray-700 hover:bg-gray-700 transition-colors text-left focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900 group",children:[(0,m.jsx)("p",{className:"text-white font-medium group-hover:text-blue-400 transition-colors",children:e.username}),(0,m.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:e.email})]},e.id))}),(0,m.jsx)(l.u,{isOpen:T.show,title:"Unfollow User",message:"Are you sure you want to unfollow ".concat(T.username,"? You will no longer receive notifications about their ratings."),confirmText:"Unfollow",confirmVariant:"danger",isLoading:F,onConfirm:P,onCancel:H})]})}},7118(e,s,t){t.d(s,{A:()=>r});const r=(0,t(5228).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9292(e,s,t){t.d(s,{A:()=>r});const r=(0,t(5228).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}}]);
//# sourceMappingURL=533.daa5b563.chunk.js.map