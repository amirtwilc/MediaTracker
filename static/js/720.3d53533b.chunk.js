/*! For license information please see 720.3d53533b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[720],{812(e,t,s){s.d(t,{u:()=>o});var a=s(5043),r=s(7719),l=s(614),n=s(579);const o=e=>{let{isOpen:t,title:s,message:o,confirmText:c="Confirm",cancelText:i="Cancel",confirmVariant:d="danger",isLoading:u=!1,onConfirm:m,onCancel:x}=e;const g=(0,a.useRef)(null),h=(0,a.useRef)(null),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!t)return;const e=e=>{"Escape"!==e.key||u||x()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,u,x]),(0,a.useEffect)(()=>{var e;if(!t)return;const s=g.current;if(!s)return;null===(e=h.current)||void 0===e||e.focus();const a=s.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),r=a[0],l=a[a.length-1],n=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===r&&(e.preventDefault(),null===l||void 0===l||l.focus()):document.activeElement===l&&(e.preventDefault(),null===r||void 0===r||r.focus()))};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[t]);const b=(0,a.useCallback)(e=>{e.target!==e.currentTarget||u||x()},[u,x]),y=(0,a.useCallback)(async()=>{u||await m()},[u,m]);if(!t)return null;const f="danger"===d?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500";return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ".concat("z-50"),onClick:b,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,n.jsxs)("div",{ref:g,className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700 shadow-xl",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:["danger"===d&&(0,n.jsx)(r.A,{className:"text-red-500 flex-shrink-0",size:24}),(0,n.jsx)("h3",{id:"modal-title",className:"text-xl font-bold text-white",children:s})]}),(0,n.jsx)("button",{onClick:x,disabled:u,className:"text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:(0,n.jsx)(l.A,{size:20})})]}),(0,n.jsx)("p",{id:"modal-description",className:"text-gray-300 mb-6",children:o}),(0,n.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,n.jsx)("button",{ref:h,onClick:x,disabled:u,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800",children:i}),(0,n.jsx)("button",{ref:p,onClick:y,disabled:u,className:"px-4 py-2 ".concat(f," text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 min-w-[100px]"),children:u?"Processing...":c})]})]})})}},1382(e,t,s){s.d(t,{e:()=>a});const a=e=>{switch(e){case"MOVIE":return"bg-yellow-600";case"SERIES":return"bg-blue-600";case"GAME":return"bg-green-600";default:return"bg-gray-600"}}},8326(e,t,s){s.d(t,{A:()=>a});const a=(0,s(5228).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9292(e,t,s){s.d(t,{A:()=>a});const a=(0,s(5228).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9463(e,t,s){s.d(t,{A:()=>a});const a=(0,s(5228).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},9720(e,t,s){s.d(t,{AdminPanel:()=>S});var a=s(2555),r=s(5043),l=s(2054),n=s(7819),o=s(5228);const c=(0,o.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var i=s(614);const d=(0,o.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),u=(0,o.A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var m=s(6256),x=s(9855),g=s(9292),h=s(9463),p=s(8326),b=s(1382),y=s(812),f=s(579);const j=(new Date).getFullYear(),N=1800,v=j+10,w=e=>{let{genres:t,platforms:s}=e;const[a,o]=(0,r.useState)(""),[c,i]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),k=(0,r.useRef)(null),[P,S]=(0,r.useState)({currentPage:0,totalPages:0,totalCount:0,hasNextPage:!1,hasPrevPage:!1,cursors:[null]}),[E,A]=(0,r.useState)(null),[I,F]=(0,r.useState)(""),[M,D]=(0,r.useState)([]),[T,L]=(0,r.useState)([]),[z,R]=(0,r.useState)(!1),[O,U]=(0,r.useState)(!1),[V,G]=(0,r.useState)(t||[]),[q,H]=(0,r.useState)(s||[]),[Y,W]=(0,r.useState)(!1),[J,K]=(0,r.useState)(!1),[B,Q]=(0,r.useState)({type:null,message:""}),X=(0,r.useCallback)((e,t)=>{Q({type:e,message:t}),setTimeout(()=>Q({type:null,message:""}),3e3)},[]),Z=(0,r.useCallback)(async()=>{if(t&&t.length>0&&s&&s.length>0)return G(t),void H(s);W(!0);try{const[e,t]=await Promise.all([m.FH.admin.getAllGenres(),m.FH.admin.getAllPlatforms()]);G(e),H(t)}catch(e){X("error","Failed to load genres and platforms"),console.error("Failed to load genres/platforms",e)}finally{W(!1)}},[t,s,X]);(0,r.useEffect)(()=>{t&&t.length>0&&G(t),s&&s.length>0&&H(s)},[t,s]);const $=(0,r.useCallback)(async(e,t)=>{u(!0),C(!0);try{const s=await m.FH.media.searchMediaItemsCursor({query:a||"",cursorName:null===t||void 0===t?void 0:t.name,cursorId:null===t||void 0===t?void 0:t.id,limit:20});i(s.items);const r=Math.ceil(s.totalCount/20);S(t=>{const a=[...t.cursors];return s.hasMore&&s.nextCursor&&e+1>=a.length&&a.push(s.nextCursor),{currentPage:e,totalPages:r,totalCount:s.totalCount,hasNextPage:s.hasMore,hasPrevPage:e>0,cursors:a}})}catch(s){s instanceof m.hD?X("error",s.message):s instanceof m.Dr?X("error","Network error. Please check your connection."):s instanceof m.MU?X("error","Request timeout. Please try again."):X("error","Search failed"),console.error("Search failed",s),i([])}finally{u(!1)}},[a,X]),_=(0,r.useCallback)(()=>{k.current&&clearTimeout(k.current),S({currentPage:0,totalPages:0,totalCount:0,hasNextPage:!1,hasPrevPage:!1,cursors:[null]}),$(0,null)},[$]),ee=(0,r.useCallback)(()=>{P.hasNextPage&&P.currentPage+1<P.cursors.length&&$(P.currentPage+1,P.cursors[P.currentPage+1])},[P,$]),te=(0,r.useCallback)(()=>{P.currentPage>0&&$(P.currentPage-1,P.cursors[P.currentPage-1])},[P,$]),se=(0,r.useCallback)(async e=>{var t;A(e),F((null===(t=e.year)||void 0===t?void 0:t.toString())||""),D(e.genres.map(e=>e.id)),L(e.platforms.map(e=>e.id)),0!==V.length&&0!==q.length||await Z()},[V.length,q.length,Z]),ae=async()=>{if(!E)return;const e=0===M.length?"Please select at least one genre":0===T.length?"Please select at least one platform":I&&(parseInt(I)<N||parseInt(I)>v)?"Year must be between ".concat(N," and ").concat(v):null;if(e)X("error",e);else{R(!0);try{await m.FH.admin.updateMediaItem(E.id,{category:E.category,name:E.name,year:I?parseInt(I):void 0,genreIds:M,platformIds:T}),X("success","Item updated successfully!"),A(null),$(P.currentPage,P.cursors[P.currentPage])}catch(t){t instanceof m.hD?X("error",t.message):t instanceof m.Dr?X("error","Network error. Please check your connection."):t instanceof m.MU?X("error","Request timeout. Please try again."):X("error","Failed to update item"),console.error("Update error:",t)}finally{R(!1)}}},re=async()=>{if(E){U(!0);try{await m.FH.admin.deleteMediaItem(E.id),X("success","Item deleted successfully!"),A(null),K(!1),S({currentPage:0,totalPages:0,totalCount:0,hasNextPage:!1,hasPrevPage:!1,cursors:[null]}),$(0,null)}catch(e){e instanceof m.hD?X("error",e.message):e instanceof m.Dr?X("error","Network error. Please check your connection."):e instanceof m.MU?X("error","Request timeout. Please try again."):X("error","Failed to delete item"),console.error("Delete error:",e),K(!1)}finally{U(!1)}}},le=(0,r.useCallback)(()=>{A(null),F(""),D([]),L([])},[]);return(0,r.useEffect)(()=>()=>{k.current&&clearTimeout(k.current)},[]),E?(0,f.jsxs)("div",{className:"space-y-4",children:[B.type&&(0,f.jsxs)("div",{className:"p-4 rounded-lg flex items-center gap-3 ".concat("success"===B.type?"bg-green-900 bg-opacity-20 border border-green-700 text-green-400":"bg-red-900 bg-opacity-20 border border-red-700 text-red-400"),role:"alert",children:["success"===B.type?(0,f.jsx)(l.A,{size:20}):(0,f.jsx)(n.A,{size:20}),(0,f.jsx)("span",{children:B.message})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("h3",{className:"text-xl font-bold text-white",children:"Update Media Item"}),(0,f.jsx)("button",{onClick:le,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors",children:"Back to Search"})]}),(0,f.jsx)("div",{className:"bg-gray-800 p-6 rounded border border-gray-700 space-y-4",children:Y?(0,f.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading genres and platforms..."}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Category"}),(0,f.jsx)("div",{className:"px-3 py-2 rounded ".concat((0,b.e)(E.category)," text-white inline-block"),children:E.category})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"item-name",className:"block text-sm text-gray-300 mb-2",children:"Name (Cannot be changed)"}),(0,f.jsx)("input",{id:"item-name",type:"text",value:E.name,disabled:!0,className:"w-full px-3 py-2 bg-gray-600 text-gray-400 rounded border border-gray-600 cursor-not-allowed"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"item-year",className:"block text-sm text-gray-300 mb-2",children:"Year"}),(0,f.jsx)("input",{id:"item-year",type:"number",value:I,onChange:e=>F(e.target.value),placeholder:"e.g., ".concat(j),min:N,max:v,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("label",{className:"block text-sm text-gray-300 mb-2",children:["Genres (",M.length," selected)"]}),(0,f.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600",children:V.map(e=>(0,f.jsxs)("label",{className:"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors",children:[(0,f.jsx)("input",{type:"checkbox",checked:M.includes(e.id),onChange:()=>{return t=e.id,void D(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"cursor-pointer"}),(0,f.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("label",{className:"block text-sm text-gray-300 mb-2",children:["Platforms (",T.length," selected)"]}),(0,f.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600",children:q.map(e=>(0,f.jsxs)("label",{className:"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors",children:[(0,f.jsx)("input",{type:"checkbox",checked:T.includes(e.id),onChange:()=>{return t=e.id,void L(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"cursor-pointer"}),(0,f.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,f.jsxs)("div",{className:"flex gap-3 justify-between pt-4",children:[(0,f.jsxs)("button",{onClick:()=>K(!0),disabled:O||z,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,f.jsx)(x.A,{size:18}),O?"Deleting...":"Delete Item"]}),(0,f.jsx)("button",{onClick:ae,disabled:z||O||Y,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:z?"Updating...":"Update Item"})]})]})}),(0,f.jsx)(y.u,{isOpen:J,title:"Delete Media Item",message:'Are you sure you want to delete "'.concat(E.name,'"? This action cannot be undone and will remove this item from all user lists.'),onConfirm:re,onCancel:()=>K(!1)})]}):(0,f.jsxs)("div",{className:"space-y-4",children:[B.type&&(0,f.jsxs)("div",{className:"p-4 rounded-lg flex items-center gap-3 ".concat("success"===B.type?"bg-green-900 bg-opacity-20 border border-green-700 text-green-400":"bg-red-900 bg-opacity-20 border border-red-700 text-red-400"),role:"alert",children:["success"===B.type?(0,f.jsx)(l.A,{size:20}):(0,f.jsx)(n.A,{size:20}),(0,f.jsx)("span",{children:B.message})]}),(0,f.jsx)("h3",{className:"text-xl font-bold text-white",children:"Update Media Item"}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)("input",{type:"text",value:a,onChange:e=>{return t=e.target.value,o(t),void(k.current&&clearTimeout(k.current));var t},onKeyPress:e=>"Enter"===e.key&&!d&&_(),placeholder:"Search for items to update...",className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none","aria-label":"Search media items"}),(0,f.jsx)("button",{onClick:_,disabled:d,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors","aria-label":"Search",children:(0,f.jsx)(g.A,{size:20})})]}),w&&(0,f.jsx)("div",{className:"overflow-x-auto",children:d?(0,f.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Searching..."}):0===c.length?(0,f.jsxs)("div",{className:"text-center py-8",children:[(0,f.jsx)("p",{className:"text-gray-400 mb-2",children:"No results found"}),(0,f.jsx)("p",{className:"text-sm text-gray-500",children:"Try searching for a different term"})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("table",{className:"w-full",role:"table",children:[(0,f.jsx)("thead",{className:"bg-gray-700 text-gray-300 text-sm",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"px-4 py-3 text-left",scope:"col",children:"Category"}),(0,f.jsx)("th",{className:"px-4 py-3 text-left",scope:"col",children:"Name"}),(0,f.jsx)("th",{className:"px-4 py-3 text-left",scope:"col",children:"Year"}),(0,f.jsx)("th",{className:"px-4 py-3 text-left",scope:"col",children:"Genres"}),(0,f.jsx)("th",{className:"px-4 py-3 text-left",scope:"col",children:"Platforms"}),(0,f.jsx)("th",{className:"px-4 py-3 text-right",scope:"col",children:"Actions"})]})}),(0,f.jsx)("tbody",{className:"text-sm",children:c.map(e=>(0,f.jsxs)("tr",{className:"border-b border-gray-700 hover:bg-gray-800 transition-colors",children:[(0,f.jsx)("td",{className:"px-4 py-3",children:(0,f.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat((0,b.e)(e.category)," text-white"),children:e.category})}),(0,f.jsx)("td",{className:"px-4 py-3 text-white font-medium",children:e.name}),(0,f.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.year||"-"}),(0,f.jsx)("td",{className:"px-4 py-3 text-gray-300 text-sm",children:e.genres.length>0?e.genres.map(e=>e.name).join(", "):"-"}),(0,f.jsx)("td",{className:"px-4 py-3 text-gray-300 text-sm",children:e.platforms.length>0?e.platforms.map(e=>e.name).join(", "):"-"}),(0,f.jsx)("td",{className:"px-4 py-3 text-right",children:(0,f.jsx)("button",{onClick:()=>se(e),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-medium transition-colors","aria-label":"Edit ".concat(e.name),children:"Choose"})})]},e.id))})]}),P.totalPages>1&&(0,f.jsxs)("div",{className:"flex items-center justify-center gap-4 mt-4",role:"navigation","aria-label":"Pagination",children:[(0,f.jsxs)("button",{onClick:te,disabled:!P.hasPrevPage||d,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors","aria-label":"Previous page",children:[(0,f.jsx)(h.A,{size:20}),"Previous"]}),(0,f.jsxs)("span",{className:"text-gray-300","aria-live":"polite",children:["Page ",P.currentPage+1," of ",P.totalPages,P.totalCount>0&&(0,f.jsxs)("span",{className:"text-xs text-gray-400 ml-2",children:["(",P.totalCount," items)"]})]}),(0,f.jsxs)("button",{onClick:ee,disabled:!P.hasNextPage||d,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors","aria-label":"Next page",children:["Next",(0,f.jsx)(p.A,{size:20})]})]})]})}),!w&&(0,f.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,f.jsx)(g.A,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,f.jsx)("p",{className:"text-lg mb-2",children:"Search for media items to update"}),(0,f.jsx)("p",{className:"text-sm text-gray-500",children:"Enter a search term and click the search button to find items"})]})]})},C=(new Date).getFullYear(),k=1800,P=C+10,S=()=>{const[e,t]=(0,r.useState)("create"),[s,o]=(0,r.useState)([]),[x,g]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),[b,y]=(0,r.useState)({type:null,message:""}),[j,N]=(0,r.useState)("MOVIE"),[v,S]=(0,r.useState)(""),[E,A]=(0,r.useState)(""),[I,F]=(0,r.useState)([]),[M,D]=(0,r.useState)([]),[T,L]=(0,r.useState)(!1),[z,R]=(0,r.useState)(null),[O,U]=(0,r.useState)(null),[V,G]=(0,r.useState)(null),[q,H]=(0,r.useState)(!1),Y=(0,r.useRef)(null),W=(0,r.useRef)(!1),[J,K]=(0,r.useState)({show:!1,processed:0,total:0,readCount:0,writeCount:0,skipCount:0,status:"STARTING"});(0,r.useEffect)(()=>(B(),()=>{Y.current&&(clearInterval(Y.current),Y.current=null)}),[]),(0,r.useEffect)(()=>{const e=e=>{if("Escape"===e.key&&J.show){["COMPLETED","FAILED","STOPPED"].includes(J.status)&&$()}};if(J.show)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[J.show,J.status]);const B=async()=>{p(!0);try{const[e,t]=await Promise.all([m.FH.admin.getAllGenres(),m.FH.admin.getAllPlatforms()]);o(e),g(t)}catch(e){Q("error","Failed to load genres and platforms"),console.error("Failed to load genres/platforms",e)}finally{p(!1)}},Q=(0,r.useCallback)((e,t)=>{y({type:e,message:t});setTimeout(()=>y({type:null,message:""}),"success"===e?3e3:5e3)},[]),X=(0,r.useCallback)(()=>{Y.current&&(clearInterval(Y.current),Y.current=null),W.current=!1},[]),Z=(0,r.useCallback)(async e=>{if(!W.current){W.current=!0;try{const t=await m.FH.admin.getJobStatus(e);G(t);const s=t.readCount||0,r=t.writeCount||0,l=t.skipCount||0,n=r+l,o=s;K(e=>(0,a.A)((0,a.A)({},e),{},{processed:n,total:o,readCount:s,writeCount:r,skipCount:l,status:t.status||"RUNNING"})),["COMPLETED","FAILED","STOPPED"].includes(t.status||"")&&X()}catch(t){console.error("Failed to get job status",t)}finally{W.current=!1}}},[X]),$=(0,r.useCallback)(()=>{X(),K({show:!1,processed:0,total:0,readCount:0,writeCount:0,skipCount:0,status:"STARTING"}),G(null),U(null),R(null)},[X]),_=J.total>0?Math.min(J.processed/J.total*100,100):0;return(0,f.jsxs)("div",{className:"space-y-4",children:[b.type&&(0,f.jsxs)("div",{className:"p-4 rounded-lg flex items-center gap-3 ".concat("success"===b.type?"bg-green-900 bg-opacity-20 border border-green-700 text-green-400":"bg-red-900 bg-opacity-20 border border-red-700 text-red-400"),role:"alert",children:["success"===b.type?(0,f.jsx)(l.A,{size:20}):(0,f.jsx)(n.A,{size:20}),(0,f.jsx)("span",{children:b.message})]}),(0,f.jsxs)("div",{className:"flex gap-2",role:"tablist",children:[(0,f.jsx)("button",{role:"tab","aria-selected":"create"===e,"aria-controls":"create-panel",onClick:()=>t("create"),className:"px-4 py-2 rounded transition-colors ".concat("create"===e?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Create Item"}),(0,f.jsx)("button",{role:"tab","aria-selected":"update"===e,"aria-controls":"update-panel",onClick:()=>t("update"),className:"px-4 py-2 rounded transition-colors ".concat("update"===e?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Update Item"}),(0,f.jsx)("button",{role:"tab","aria-selected":"upload"===e,"aria-controls":"upload-panel",onClick:()=>t("upload"),className:"px-4 py-2 rounded transition-colors ".concat("upload"===e?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Upload CSV"})]}),"update"===e&&(0,f.jsx)("div",{role:"tabpanel",id:"update-panel",children:(0,f.jsx)(w,{genres:s,platforms:x})}),"create"===e&&(0,f.jsx)("div",{role:"tabpanel",id:"create-panel",children:(0,f.jsx)("form",{onSubmit:async e=>{e.preventDefault();const t=v.trim()?v.trim().length<2?"Name must be at least 2 characters":E&&(parseInt(E)<k||parseInt(E)>P)?"Year must be between ".concat(k," and ").concat(P):null:"Name is required";if(t)Q("error",t);else{L(!0);try{await m.FH.admin.createMediaItem({category:j,name:v.trim(),year:E?parseInt(E):void 0,genreIds:I,platformIds:M}),Q("success","Media item created successfully!"),S(""),A(""),F([]),D([])}catch(s){s instanceof m.hD?Q("error",s.message):s instanceof m.Dr?Q("error","Network error. Please check your connection."):s instanceof m.MU?Q("error","Request timeout. Please try again."):Q("error","Failed to create media item"),console.error("Create item error:",s)}finally{L(!1)}}},className:"space-y-4 bg-gray-800 p-6 rounded border border-gray-700",children:h?(0,f.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading genres and platforms..."}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"category",className:"block text-sm text-gray-300 mb-2",children:"Category"}),(0,f.jsxs)("select",{id:"category",value:j,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[(0,f.jsx)("option",{value:"MOVIE",children:"Movie"}),(0,f.jsx)("option",{value:"SERIES",children:"Series"}),(0,f.jsx)("option",{value:"GAME",children:"Game"})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"name",className:"block text-sm text-gray-300 mb-2",children:"Name *"}),(0,f.jsx)("input",{id:"name",type:"text",value:v,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",required:!0,minLength:2,maxLength:200})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"year",className:"block text-sm text-gray-300 mb-2",children:"Year (Optional)"}),(0,f.jsx)("input",{id:"year",type:"number",value:E,onChange:e=>A(e.target.value),placeholder:"e.g., ".concat(C),min:k,max:P,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("label",{className:"block text-sm text-gray-300 mb-2",children:["Genres (",I.length," selected)"]}),(0,f.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600",children:s.map(e=>(0,f.jsxs)("label",{className:"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors",children:[(0,f.jsx)("input",{type:"checkbox",checked:I.includes(e.id),onChange:()=>{return t=e.id,void F(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"cursor-pointer"}),(0,f.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("label",{className:"block text-sm text-gray-300 mb-2",children:["Platforms (",M.length," selected)"]}),(0,f.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600",children:x.map(e=>(0,f.jsxs)("label",{className:"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors",children:[(0,f.jsx)("input",{type:"checkbox",checked:M.includes(e.id),onChange:()=>{return t=e.id,void D(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"cursor-pointer"}),(0,f.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,f.jsx)("button",{type:"submit",disabled:T||h,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:T?"Creating...":"Create Media Item"})]})})}),"upload"===e&&(0,f.jsxs)("div",{role:"tabpanel",id:"upload-panel",className:"space-y-4 bg-gray-800 p-6 rounded border border-gray-700",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"csv-file",className:"block text-sm text-gray-300 mb-2",children:"Upload CSV File"}),(0,f.jsx)("input",{id:"csv-file",type:"file",accept:".csv",onChange:e=>{var t;return R((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 file:cursor-pointer"}),(0,f.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,f.jsx)("p",{className:"text-xs text-gray-400",children:"CSV format: category, name, year, genres (pipe-separated), platforms (pipe-separated)"}),(0,f.jsx)("p",{className:"text-xs text-gray-400",children:"Example: MOVIE,The Matrix,1999,Action|Sci-Fi,Netflix|Amazon Prime"})]})]}),(0,f.jsxs)("button",{onClick:async()=>{if(z)if(z.name.endsWith(".csv")){X(),H(!0);try{const e=(await m.FH.admin.uploadCSV(z)).correlationId;U(e),G(null),K({show:!0,processed:0,total:0,readCount:0,writeCount:0,skipCount:0,status:"STARTING"}),await Z(e),Y.current=setInterval(()=>Z(e),1e3)}catch(e){K({show:!1,processed:0,total:0,readCount:0,writeCount:0,skipCount:0,status:"FAILED"}),e instanceof m.hD?Q("error",e.message):e instanceof m.Dr?Q("error","Network error. Please check your connection."):e instanceof m.MU?Q("error","Request timeout. Please try again."):Q("error","Failed to upload CSV"),console.error("Upload error:",e)}finally{H(!1)}}else Q("error","Please select a valid CSV file")},disabled:!z||q,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-colors",children:[(0,f.jsx)(c,{size:16}),q?"Uploading...":"Upload CSV"]}),V&&!J.show&&(0,f.jsxs)("div",{className:"mt-4 p-4 bg-gray-700 rounded border border-gray-600",children:[(0,f.jsx)("h3",{className:"font-medium text-white mb-2",children:"Last Job Status"}),(0,f.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,f.jsxs)("p",{className:"text-gray-300",children:["Status: ",(0,f.jsx)("span",{className:"text-white font-medium",children:V.status})]}),(0,f.jsxs)("p",{className:"text-gray-300",children:["Read: ",(0,f.jsx)("span",{className:"text-white font-medium",children:V.readCount||0})]}),(0,f.jsxs)("p",{className:"text-gray-300",children:["Written: ",(0,f.jsx)("span",{className:"text-white font-medium",children:V.writeCount||0})]}),(0,f.jsxs)("p",{className:"text-gray-300",children:["Skipped: ",(0,f.jsx)("span",{className:"text-white font-medium",children:V.skipCount||0})]})]})]})]}),J.show&&(0,f.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",role:"dialog","aria-modal":"true","aria-labelledby":"progress-modal-title",children:(0,f.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-lg w-full border border-gray-700",children:[(0,f.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,f.jsx)("h3",{id:"progress-modal-title",className:"text-xl font-bold text-white",children:"Processing CSV Import"}),["COMPLETED","FAILED","STOPPED"].includes(J.status)&&(0,f.jsx)("button",{onClick:$,className:"text-gray-400 hover:text-white transition-colors","aria-label":"Close progress modal",children:(0,f.jsx)(i.A,{size:20})})]}),(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:["COMPLETED"===J.status&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.A,{className:"text-green-400",size:20}),(0,f.jsx)("span",{className:"text-green-400 font-medium",children:"Completed"})]}),"FAILED"===J.status&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d,{className:"text-red-400",size:20}),(0,f.jsx)("span",{className:"text-red-400 font-medium",children:"Failed"})]}),["STARTING","RUNNING","STARTED"].includes(J.status)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u,{className:"text-blue-400 animate-spin",size:20}),(0,f.jsx)("span",{className:"text-blue-400 font-medium",children:"Processing..."})]}),"STOPPED"===J.status&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d,{className:"text-yellow-400",size:20}),(0,f.jsx)("span",{className:"text-yellow-400 font-medium",children:"Stopped"})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-6 overflow-hidden",children:(0,f.jsx)("div",{className:"h-6 rounded-full transition-all duration-500 flex items-center justify-center text-xs font-medium ".concat("COMPLETED"===J.status?"bg-green-500":"FAILED"===J.status||"STOPPED"===J.status?"bg-red-500":"bg-blue-600"),style:{width:"".concat(_,"%"),minWidth:_>0?"2rem":"0"},children:_>10&&(0,f.jsxs)("span",{className:"text-white",children:[Math.round(_),"%"]})})}),(0,f.jsxs)("div",{className:"flex justify-between text-sm text-gray-300",children:[(0,f.jsx)("span",{children:J.readCount>0?"Processed ".concat(J.processed," of ").concat(J.total," items"):"Reading CSV file..."}),_>0&&_<100&&(0,f.jsxs)("span",{children:[Math.round(_),"%"]})]})]}),("COMPLETED"===J.status||"FAILED"===J.status||"STOPPED"===J.status||J.readCount>0)&&(0,f.jsxs)("div",{className:"bg-gray-700 rounded p-4 space-y-2",children:[(0,f.jsx)("h4",{className:"text-white font-medium mb-3",children:"Statistics"}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{className:"text-gray-400",children:"Total Read:"}),(0,f.jsx)("span",{className:"text-white ml-2 font-medium",children:J.readCount||0})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{className:"text-gray-400",children:"Successfully Written:"}),(0,f.jsx)("span",{className:"text-green-400 ml-2 font-medium",children:J.writeCount||0})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{className:"text-gray-400",children:"Skipped:"}),(0,f.jsx)("span",{className:"text-yellow-400 ml-2 font-medium",children:J.skipCount||0})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{className:"text-gray-400",children:"Processed:"}),(0,f.jsx)("span",{className:"text-blue-400 ml-2 font-medium",children:J.processed||0})]})]}),"COMPLETED"===J.status&&(0,f.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-600",children:(0,f.jsxs)("p",{className:"text-green-400 text-sm font-medium flex items-center gap-2",children:[(0,f.jsx)(l.A,{size:16}),"Import completed successfully!"]})}),"FAILED"===J.status&&(0,f.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-600",children:(0,f.jsxs)("p",{className:"text-red-400 text-sm font-medium flex items-center gap-2",children:[(0,f.jsx)(d,{size:16}),"Import failed. Please check the file format and try again."]})})]})]})]})})]})}},9855(e,t,s){s.d(t,{A:()=>a});const a=(0,s(5228).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}}]);
//# sourceMappingURL=720.3d53533b.chunk.js.map