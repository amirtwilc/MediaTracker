/*! For license information please see 720.afea309e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[720],{812(e,t,a){a.d(t,{u:()=>i});var s=a(5043),r=a(7719),l=a(614),n=a(579);const i=e=>{let{isOpen:t,title:a,message:i,confirmText:c="Confirm",cancelText:o="Cancel",confirmVariant:d="danger",isLoading:u=!1,onConfirm:m,onCancel:x}=e;const h=(0,s.useRef)(null),g=(0,s.useRef)(null),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!t)return;const e=e=>{"Escape"!==e.key||u||x()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,u,x]),(0,s.useEffect)(()=>{var e;if(!t)return;const a=h.current;if(!a)return;null===(e=g.current)||void 0===e||e.focus();const s=a.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),r=s[0],l=s[s.length-1],n=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===r&&(e.preventDefault(),null===l||void 0===l||l.focus()):document.activeElement===l&&(e.preventDefault(),null===r||void 0===r||r.focus()))};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[t]);const b=(0,s.useCallback)(e=>{e.target!==e.currentTarget||u||x()},[u,x]),y=(0,s.useCallback)(async()=>{u||await m()},[u,m]);if(!t)return null;const f="danger"===d?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500";return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ".concat("z-50"),onClick:b,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,n.jsxs)("div",{ref:h,className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700 shadow-xl",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:["danger"===d&&(0,n.jsx)(r.A,{className:"text-red-500 flex-shrink-0",size:24}),(0,n.jsx)("h3",{id:"modal-title",className:"text-xl font-bold text-white",children:a})]}),(0,n.jsx)("button",{onClick:x,disabled:u,className:"text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:(0,n.jsx)(l.A,{size:20})})]}),(0,n.jsx)("p",{id:"modal-description",className:"text-gray-300 mb-6",children:i}),(0,n.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,n.jsx)("button",{ref:g,onClick:x,disabled:u,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800",children:o}),(0,n.jsx)("button",{ref:p,onClick:y,disabled:u,className:"px-4 py-2 ".concat(f," text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 min-w-[100px]"),children:u?"Processing...":c})]})]})})}},1382(e,t,a){a.d(t,{e:()=>s});const s=e=>{switch(e){case"MOVIE":return"bg-yellow-600";case"SERIES":return"bg-blue-600";case"GAME":return"bg-green-600";default:return"bg-gray-600"}}},8326(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9292(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9463(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},9720(e,t,a){a.d(t,{AdminPanel:()=>E});var s=a(2555),r=a(5043),l=a(5228);const n=(0,l.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var i=a(614),c=a(2054);const o=(0,l.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),d=(0,l.A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var u=a(6256),m=a(9855),x=a(9292),h=a(9463),g=a(8326),p=a(1382),b=a(812),y=a(8546),f=a(4362),j=a(579);const v=(new Date).getFullYear(),N=1800,w=v+10,C=e=>{let{genres:t,platforms:a}=e;const[s,l]=(0,r.useState)(""),[n,i]=(0,r.useState)([]),[c,o]=(0,r.useState)(!1),[d,C]=(0,r.useState)(!1),k=(0,r.useRef)(null),[P,S]=(0,r.useState)({currentPage:0,totalPages:0,totalCount:0,hasNextPage:!1,hasPrevPage:!1,cursors:[null]}),[E,I]=(0,r.useState)(null),[A,F]=(0,r.useState)(""),[M,T]=(0,r.useState)([]),[D,L]=(0,r.useState)([]),[z,O]=(0,r.useState)(!1),[R,V]=(0,r.useState)(!1),[G,H]=(0,r.useState)(t||[]),[U,q]=(0,r.useState)(a||[]),[Y,W]=(0,r.useState)(!1),[J,K]=(0,r.useState)(!1),{alert:B,showSuccess:Q,showError:X,handleApiError:Z}=(0,y.M)(),$=(0,r.useCallback)(async()=>{if(t&&t.length>0&&a&&a.length>0)return H(t),void q(a);W(!0);try{const[e,t]=await Promise.all([u.FH.admin.getAllGenres(),u.FH.admin.getAllPlatforms()]);H(e),q(t)}catch(e){Z(e,"Failed to load genres and platforms")}finally{W(!1)}},[t,a]);(0,r.useEffect)(()=>{t&&t.length>0&&H(t),a&&a.length>0&&q(a)},[t,a]);const _=(0,r.useCallback)(async(e,t)=>{o(!0),C(!0);try{const a=await u.FH.media.searchMediaItemsCursor({query:s||"",cursorName:null===t||void 0===t?void 0:t.name,cursorId:null===t||void 0===t?void 0:t.id,limit:20});i(a.items);const r=Math.ceil(a.totalCount/20);S(t=>{const s=[...t.cursors];return a.hasMore&&a.nextCursor&&e+1>=s.length&&s.push(a.nextCursor),{currentPage:e,totalPages:r,totalCount:a.totalCount,hasNextPage:a.hasMore,hasPrevPage:e>0,cursors:s}})}catch(a){Z(a,"Search failed"),i([])}finally{o(!1)}},[s]),ee=(0,r.useCallback)(()=>{k.current&&clearTimeout(k.current),S({currentPage:0,totalPages:0,totalCount:0,hasNextPage:!1,hasPrevPage:!1,cursors:[null]}),_(0,null)},[_]),te=(0,r.useCallback)(()=>{P.hasNextPage&&P.currentPage+1<P.cursors.length&&_(P.currentPage+1,P.cursors[P.currentPage+1])},[P,_]),ae=(0,r.useCallback)(()=>{P.currentPage>0&&_(P.currentPage-1,P.cursors[P.currentPage-1])},[P,_]),se=(0,r.useCallback)(async e=>{var t;I(e),F((null===(t=e.year)||void 0===t?void 0:t.toString())||""),T(e.genres.map(e=>e.id)),L(e.platforms.map(e=>e.id)),0!==G.length&&0!==U.length||await $()},[G.length,U.length,$]),re=async()=>{if(!E)return;const e=0===M.length?"Please select at least one genre":0===D.length?"Please select at least one platform":A&&(parseInt(A)<N||parseInt(A)>w)?"Year must be between ".concat(N," and ").concat(w):null;if(e)X(e);else{O(!0);try{await u.FH.admin.updateMediaItem(E.id,{category:E.category,name:E.name,year:A?parseInt(A):void 0,genreIds:M,platformIds:D}),Q("Item updated successfully!"),I(null),_(P.currentPage,P.cursors[P.currentPage])}catch(t){Z(t,"Failed to update item")}finally{O(!1)}}},le=async()=>{if(E){V(!0);try{await u.FH.admin.deleteMediaItem(E.id),Q("Item deleted successfully!"),I(null),K(!1),S({currentPage:0,totalPages:0,totalCount:0,hasNextPage:!1,hasPrevPage:!1,cursors:[null]}),_(0,null)}catch(e){Z(e,"Failed to delete item"),K(!1)}finally{V(!1)}}},ne=(0,r.useCallback)(()=>{I(null),F(""),T([]),L([])},[]);return(0,r.useEffect)(()=>()=>{k.current&&clearTimeout(k.current)},[]),E?(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsx)(f.i,{alert:B}),(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)("h3",{className:"text-xl font-bold text-white",children:"Update Media Item"}),(0,j.jsx)("button",{onClick:ne,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors",children:"Back to Search"})]}),(0,j.jsx)("div",{className:"bg-gray-800 p-6 rounded border border-gray-700 space-y-4",children:Y?(0,j.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading genres and platforms..."}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Category"}),(0,j.jsx)("div",{className:"px-3 py-2 rounded ".concat((0,p.e)(E.category)," text-white inline-block"),children:E.category})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"item-name",className:"block text-sm text-gray-300 mb-2",children:"Name (Cannot be changed)"}),(0,j.jsx)("input",{id:"item-name",type:"text",value:E.name,disabled:!0,className:"w-full px-3 py-2 bg-gray-600 text-gray-400 rounded border border-gray-600 cursor-not-allowed"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"item-year",className:"block text-sm text-gray-300 mb-2",children:"Year"}),(0,j.jsx)("input",{id:"item-year",type:"number",value:A,onChange:e=>F(e.target.value),placeholder:"e.g., ".concat(v),min:N,max:w,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"block text-sm text-gray-300 mb-2",children:["Genres (",M.length," selected)"]}),(0,j.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600",children:G.map(e=>(0,j.jsxs)("label",{className:"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors",children:[(0,j.jsx)("input",{type:"checkbox",checked:M.includes(e.id),onChange:()=>{return t=e.id,void T(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"cursor-pointer"}),(0,j.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"block text-sm text-gray-300 mb-2",children:["Platforms (",D.length," selected)"]}),(0,j.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600",children:U.map(e=>(0,j.jsxs)("label",{className:"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors",children:[(0,j.jsx)("input",{type:"checkbox",checked:D.includes(e.id),onChange:()=>{return t=e.id,void L(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"cursor-pointer"}),(0,j.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,j.jsxs)("div",{className:"flex gap-3 justify-between pt-4",children:[(0,j.jsxs)("button",{onClick:()=>K(!0),disabled:R||z,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,j.jsx)(m.A,{size:18}),R?"Deleting...":"Delete Item"]}),(0,j.jsx)("button",{onClick:re,disabled:z||R||Y,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:z?"Updating...":"Update Item"})]})]})}),(0,j.jsx)(b.u,{isOpen:J,title:"Delete Media Item",message:'Are you sure you want to delete "'.concat(E.name,'"? This action cannot be undone and will remove this item from all user lists.'),onConfirm:le,onCancel:()=>K(!1)})]}):(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsx)(f.i,{alert:B}),(0,j.jsx)("h3",{className:"text-xl font-bold text-white",children:"Update Media Item"}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)("input",{type:"text",value:s,onChange:e=>{return t=e.target.value,l(t),void(k.current&&clearTimeout(k.current));var t},onKeyPress:e=>"Enter"===e.key&&!c&&ee(),placeholder:"Search for items to update...",className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none","aria-label":"Search media items"}),(0,j.jsx)("button",{onClick:ee,disabled:c,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors","aria-label":"Search",children:(0,j.jsx)(x.A,{size:20})})]}),d&&(0,j.jsx)("div",{className:"overflow-x-auto",children:c?(0,j.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Searching..."}):0===n.length?(0,j.jsxs)("div",{className:"text-center py-8",children:[(0,j.jsx)("p",{className:"text-gray-400 mb-2",children:"No results found"}),(0,j.jsx)("p",{className:"text-sm text-gray-500",children:"Try searching for a different term"})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("table",{className:"w-full",role:"table",children:[(0,j.jsx)("thead",{className:"bg-gray-700 text-gray-300 text-sm",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"px-4 py-3 text-left",scope:"col",children:"Category"}),(0,j.jsx)("th",{className:"px-4 py-3 text-left",scope:"col",children:"Name"}),(0,j.jsx)("th",{className:"px-4 py-3 text-left",scope:"col",children:"Year"}),(0,j.jsx)("th",{className:"px-4 py-3 text-left",scope:"col",children:"Genres"}),(0,j.jsx)("th",{className:"px-4 py-3 text-left",scope:"col",children:"Platforms"}),(0,j.jsx)("th",{className:"px-4 py-3 text-right",scope:"col",children:"Actions"})]})}),(0,j.jsx)("tbody",{className:"text-sm",children:n.map(e=>(0,j.jsxs)("tr",{className:"border-b border-gray-700 hover:bg-gray-800 transition-colors",children:[(0,j.jsx)("td",{className:"px-4 py-3",children:(0,j.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat((0,p.e)(e.category)," text-white"),children:e.category})}),(0,j.jsx)("td",{className:"px-4 py-3 text-white font-medium",children:e.name}),(0,j.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.year||"-"}),(0,j.jsx)("td",{className:"px-4 py-3 text-gray-300 text-sm",children:e.genres.length>0?e.genres.map(e=>e.name).join(", "):"-"}),(0,j.jsx)("td",{className:"px-4 py-3 text-gray-300 text-sm",children:e.platforms.length>0?e.platforms.map(e=>e.name).join(", "):"-"}),(0,j.jsx)("td",{className:"px-4 py-3 text-right",children:(0,j.jsx)("button",{onClick:()=>se(e),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-medium transition-colors","aria-label":"Edit ".concat(e.name),children:"Choose"})})]},e.id))})]}),P.totalPages>1&&(0,j.jsxs)("div",{className:"flex items-center justify-center gap-4 mt-4",role:"navigation","aria-label":"Pagination",children:[(0,j.jsxs)("button",{onClick:ae,disabled:!P.hasPrevPage||c,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors","aria-label":"Previous page",children:[(0,j.jsx)(h.A,{size:20}),"Previous"]}),(0,j.jsxs)("span",{className:"text-gray-300","aria-live":"polite",children:["Page ",P.currentPage+1," of ",P.totalPages,P.totalCount>0&&(0,j.jsxs)("span",{className:"text-xs text-gray-400 ml-2",children:["(",P.totalCount," items)"]})]}),(0,j.jsxs)("button",{onClick:te,disabled:!P.hasNextPage||c,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors","aria-label":"Next page",children:["Next",(0,j.jsx)(g.A,{size:20})]})]})]})}),!d&&(0,j.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,j.jsx)(x.A,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,j.jsx)("p",{className:"text-lg mb-2",children:"Search for media items to update"}),(0,j.jsx)("p",{className:"text-sm text-gray-500",children:"Enter a search term and click the search button to find items"})]})]})},k=(new Date).getFullYear(),P=1800,S=k+10,E=()=>{const[e,t]=(0,r.useState)("create"),[a,l]=(0,r.useState)([]),[m,x]=(0,r.useState)([]),[h,g]=(0,r.useState)(!0),{alert:p,showSuccess:b,showError:v,handleApiError:N}=(0,y.M)(),[w,E]=(0,r.useState)("MOVIE"),[I,A]=(0,r.useState)(""),[F,M]=(0,r.useState)(""),[T,D]=(0,r.useState)([]),[L,z]=(0,r.useState)([]),[O,R]=(0,r.useState)(!1),[V,G]=(0,r.useState)(null),[H,U]=(0,r.useState)(null),[q,Y]=(0,r.useState)(null),[W,J]=(0,r.useState)(!1),K=(0,r.useRef)(null),B=(0,r.useRef)(!1),[Q,X]=(0,r.useState)({show:!1,processed:0,total:0,readCount:0,writeCount:0,skipCount:0,status:"STARTING"});(0,r.useEffect)(()=>(Z(),()=>{K.current&&(clearInterval(K.current),K.current=null)}),[]),(0,r.useEffect)(()=>{const e=e=>{if("Escape"===e.key&&Q.show){["COMPLETED","FAILED","STOPPED"].includes(Q.status)&&ee()}};if(Q.show)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[Q.show,Q.status]);const Z=async()=>{g(!0);try{const[e,t]=await Promise.all([u.FH.admin.getAllGenres(),u.FH.admin.getAllPlatforms()]);l(e),x(t)}catch(e){N(e,"Failed to load genres and platforms")}finally{g(!1)}},$=(0,r.useCallback)(()=>{K.current&&(clearInterval(K.current),K.current=null),B.current=!1},[]),_=(0,r.useCallback)(async e=>{if(!B.current){B.current=!0;try{const t=await u.FH.admin.getJobStatus(e);Y(t);const a=t.readCount||0,r=t.writeCount||0,l=t.skipCount||0,n=r+l,i=a;X(e=>(0,s.A)((0,s.A)({},e),{},{processed:n,total:i,readCount:a,writeCount:r,skipCount:l,status:t.status||"RUNNING"})),["COMPLETED","FAILED","STOPPED"].includes(t.status||"")&&$()}catch(t){console.error("Failed to get job status",t)}finally{B.current=!1}}},[$]),ee=(0,r.useCallback)(()=>{$(),X({show:!1,processed:0,total:0,readCount:0,writeCount:0,skipCount:0,status:"STARTING"}),Y(null),U(null),G(null)},[$]),te=Q.total>0?Math.min(Q.processed/Q.total*100,100):0;return(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsx)(f.i,{alert:p}),(0,j.jsxs)("div",{className:"flex gap-2",role:"tablist",children:[(0,j.jsx)("button",{role:"tab","aria-selected":"create"===e,"aria-controls":"create-panel",onClick:()=>t("create"),className:"px-4 py-2 rounded transition-colors ".concat("create"===e?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Create Item"}),(0,j.jsx)("button",{role:"tab","aria-selected":"update"===e,"aria-controls":"update-panel",onClick:()=>t("update"),className:"px-4 py-2 rounded transition-colors ".concat("update"===e?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Update Item"}),(0,j.jsx)("button",{role:"tab","aria-selected":"upload"===e,"aria-controls":"upload-panel",onClick:()=>t("upload"),className:"px-4 py-2 rounded transition-colors ".concat("upload"===e?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Upload CSV"})]}),"update"===e&&(0,j.jsx)("div",{role:"tabpanel",id:"update-panel",children:(0,j.jsx)(C,{genres:a,platforms:m})}),"create"===e&&(0,j.jsx)("div",{role:"tabpanel",id:"create-panel",children:(0,j.jsx)("form",{onSubmit:async e=>{e.preventDefault();const t=I.trim()?I.trim().length<2?"Name must be at least 2 characters":F&&(parseInt(F)<P||parseInt(F)>S)?"Year must be between ".concat(P," and ").concat(S):null:"Name is required";if(t)v(t);else{R(!0);try{await u.FH.admin.createMediaItem({category:w,name:I.trim(),year:F?parseInt(F):void 0,genreIds:T,platformIds:L}),b("Media item created successfully!"),A(""),M(""),D([]),z([])}catch(a){N(a,"Failed to create media item")}finally{R(!1)}}},className:"space-y-4 bg-gray-800 p-6 rounded border border-gray-700",children:h?(0,j.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading genres and platforms..."}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"category",className:"block text-sm text-gray-300 mb-2",children:"Category"}),(0,j.jsxs)("select",{id:"category",value:w,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[(0,j.jsx)("option",{value:"MOVIE",children:"Movie"}),(0,j.jsx)("option",{value:"SERIES",children:"Series"}),(0,j.jsx)("option",{value:"GAME",children:"Game"})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"name",className:"block text-sm text-gray-300 mb-2",children:"Name *"}),(0,j.jsx)("input",{id:"name",type:"text",value:I,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",required:!0,minLength:2,maxLength:200})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"year",className:"block text-sm text-gray-300 mb-2",children:"Year (Optional)"}),(0,j.jsx)("input",{id:"year",type:"number",value:F,onChange:e=>M(e.target.value),placeholder:"e.g., ".concat(k),min:P,max:S,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"block text-sm text-gray-300 mb-2",children:["Genres (",T.length," selected)"]}),(0,j.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600",children:a.map(e=>(0,j.jsxs)("label",{className:"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors",children:[(0,j.jsx)("input",{type:"checkbox",checked:T.includes(e.id),onChange:()=>{return t=e.id,void D(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"cursor-pointer"}),(0,j.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"block text-sm text-gray-300 mb-2",children:["Platforms (",L.length," selected)"]}),(0,j.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600",children:m.map(e=>(0,j.jsxs)("label",{className:"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors",children:[(0,j.jsx)("input",{type:"checkbox",checked:L.includes(e.id),onChange:()=>{return t=e.id,void z(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"cursor-pointer"}),(0,j.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,j.jsx)("button",{type:"submit",disabled:O||h,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:O?"Creating...":"Create Media Item"})]})})}),"upload"===e&&(0,j.jsxs)("div",{role:"tabpanel",id:"upload-panel",className:"space-y-4 bg-gray-800 p-6 rounded border border-gray-700",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"csv-file",className:"block text-sm text-gray-300 mb-2",children:"Upload CSV File"}),(0,j.jsx)("input",{id:"csv-file",type:"file",accept:".csv",onChange:e=>{var t;return G((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 file:cursor-pointer"}),(0,j.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,j.jsx)("p",{className:"text-xs text-gray-400",children:"CSV format: category, name, year, genres (pipe-separated), platforms (pipe-separated)"}),(0,j.jsx)("p",{className:"text-xs text-gray-400",children:"Example: MOVIE,The Matrix,1999,Action|Sci-Fi,Netflix|Amazon Prime"})]})]}),(0,j.jsxs)("button",{onClick:async()=>{if(V)if(V.name.endsWith(".csv")){$(),J(!0);try{const e=(await u.FH.admin.uploadCSV(V)).correlationId;U(e),Y(null),X({show:!0,processed:0,total:0,readCount:0,writeCount:0,skipCount:0,status:"STARTING"}),await _(e),K.current=setInterval(()=>_(e),1e3)}catch(e){X({show:!1,processed:0,total:0,readCount:0,writeCount:0,skipCount:0,status:"FAILED"}),N(e,"Upload error:"+e)}finally{J(!1)}}else v("Please select a valid CSV file")},disabled:!V||W,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-colors",children:[(0,j.jsx)(n,{size:16}),W?"Uploading...":"Upload CSV"]}),q&&!Q.show&&(0,j.jsxs)("div",{className:"mt-4 p-4 bg-gray-700 rounded border border-gray-600",children:[(0,j.jsx)("h3",{className:"font-medium text-white mb-2",children:"Last Job Status"}),(0,j.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,j.jsxs)("p",{className:"text-gray-300",children:["Status: ",(0,j.jsx)("span",{className:"text-white font-medium",children:q.status})]}),(0,j.jsxs)("p",{className:"text-gray-300",children:["Read: ",(0,j.jsx)("span",{className:"text-white font-medium",children:q.readCount||0})]}),(0,j.jsxs)("p",{className:"text-gray-300",children:["Written: ",(0,j.jsx)("span",{className:"text-white font-medium",children:q.writeCount||0})]}),(0,j.jsxs)("p",{className:"text-gray-300",children:["Skipped: ",(0,j.jsx)("span",{className:"text-white font-medium",children:q.skipCount||0})]})]})]})]}),Q.show&&(0,j.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",role:"dialog","aria-modal":"true","aria-labelledby":"progress-modal-title",children:(0,j.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-lg w-full border border-gray-700",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,j.jsx)("h3",{id:"progress-modal-title",className:"text-xl font-bold text-white",children:"Processing CSV Import"}),["COMPLETED","FAILED","STOPPED"].includes(Q.status)&&(0,j.jsx)("button",{onClick:ee,className:"text-gray-400 hover:text-white transition-colors","aria-label":"Close progress modal",children:(0,j.jsx)(i.A,{size:20})})]}),(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:["COMPLETED"===Q.status&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.A,{className:"text-green-400",size:20}),(0,j.jsx)("span",{className:"text-green-400 font-medium",children:"Completed"})]}),"FAILED"===Q.status&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(o,{className:"text-red-400",size:20}),(0,j.jsx)("span",{className:"text-red-400 font-medium",children:"Failed"})]}),["STARTING","RUNNING","STARTED"].includes(Q.status)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d,{className:"text-blue-400 animate-spin",size:20}),(0,j.jsx)("span",{className:"text-blue-400 font-medium",children:"Processing..."})]}),"STOPPED"===Q.status&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(o,{className:"text-yellow-400",size:20}),(0,j.jsx)("span",{className:"text-yellow-400 font-medium",children:"Stopped"})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-6 overflow-hidden",children:(0,j.jsx)("div",{className:"h-6 rounded-full transition-all duration-500 flex items-center justify-center text-xs font-medium ".concat("COMPLETED"===Q.status?"bg-green-500":"FAILED"===Q.status||"STOPPED"===Q.status?"bg-red-500":"bg-blue-600"),style:{width:"".concat(te,"%"),minWidth:te>0?"2rem":"0"},children:te>10&&(0,j.jsxs)("span",{className:"text-white",children:[Math.round(te),"%"]})})}),(0,j.jsxs)("div",{className:"flex justify-between text-sm text-gray-300",children:[(0,j.jsx)("span",{children:Q.readCount>0?"Processed ".concat(Q.processed," of ").concat(Q.total," items"):"Reading CSV file..."}),te>0&&te<100&&(0,j.jsxs)("span",{children:[Math.round(te),"%"]})]})]}),("COMPLETED"===Q.status||"FAILED"===Q.status||"STOPPED"===Q.status||Q.readCount>0)&&(0,j.jsxs)("div",{className:"bg-gray-700 rounded p-4 space-y-2",children:[(0,j.jsx)("h4",{className:"text-white font-medium mb-3",children:"Statistics"}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"text-gray-400",children:"Total Read:"}),(0,j.jsx)("span",{className:"text-white ml-2 font-medium",children:Q.readCount||0})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"text-gray-400",children:"Successfully Written:"}),(0,j.jsx)("span",{className:"text-green-400 ml-2 font-medium",children:Q.writeCount||0})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"text-gray-400",children:"Skipped:"}),(0,j.jsx)("span",{className:"text-yellow-400 ml-2 font-medium",children:Q.skipCount||0})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"text-gray-400",children:"Processed:"}),(0,j.jsx)("span",{className:"text-blue-400 ml-2 font-medium",children:Q.processed||0})]})]}),"COMPLETED"===Q.status&&(0,j.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-600",children:(0,j.jsxs)("p",{className:"text-green-400 text-sm font-medium flex items-center gap-2",children:[(0,j.jsx)(c.A,{size:16}),"Import completed successfully!"]})}),"FAILED"===Q.status&&(0,j.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-600",children:(0,j.jsxs)("p",{className:"text-red-400 text-sm font-medium flex items-center gap-2",children:[(0,j.jsx)(o,{size:16}),"Import failed. Please check the file format and try again."]})})]})]})]})})]})}},9855(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}}]);
//# sourceMappingURL=720.afea309e.chunk.js.map