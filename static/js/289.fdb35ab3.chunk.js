/*! For license information please see 289.fdb35ab3.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[289],{812(e,s,i){i.d(s,{u:()=>n});var a=i(5043),l=i(7719),t=i(614),r=i(579);const n=e=>{let{isOpen:s,title:i,message:n,confirmText:o="Confirm",cancelText:c="Cancel",confirmVariant:d="danger",isLoading:u=!1,onConfirm:m,onCancel:h}=e;const b=(0,a.useRef)(null),f=(0,a.useRef)(null),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!s)return;const e=e=>{"Escape"!==e.key||u||h()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,u,h]),(0,a.useEffect)(()=>{var e;if(!s)return;const i=b.current;if(!i)return;null===(e=f.current)||void 0===e||e.focus();const a=i.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),l=a[0],t=a[a.length-1],r=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===l&&(e.preventDefault(),null===t||void 0===t||t.focus()):document.activeElement===t&&(e.preventDefault(),null===l||void 0===l||l.focus()))};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[s]);const x=(0,a.useCallback)(e=>{e.target!==e.currentTarget||u||h()},[u,h]),y=(0,a.useCallback)(async()=>{u||await m()},[u,m]);if(!s)return null;const v="danger"===d?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500";return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ".concat("z-50"),onClick:x,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,r.jsxs)("div",{ref:b,className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700 shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:["danger"===d&&(0,r.jsx)(l.A,{className:"text-red-500 flex-shrink-0",size:24}),(0,r.jsx)("h3",{id:"modal-title",className:"text-xl font-bold text-white",children:i})]}),(0,r.jsx)("button",{onClick:h,disabled:u,className:"text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:(0,r.jsx)(t.A,{size:20})})]}),(0,r.jsx)("p",{id:"modal-description",className:"text-gray-300 mb-6",children:n}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{ref:f,onClick:h,disabled:u,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800",children:c}),(0,r.jsx)("button",{ref:g,onClick:y,disabled:u,className:"px-4 py-2 ".concat(v," text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 min-w-[100px]"),children:u?"Processing...":o})]})]})})}},7289(e,s,i){i.d(s,{Settings:()=>x});var a=i(2555),l=i(5043),t=i(516),r=i(5228);const n=(0,r.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var o=i(7819),c=i(2024);const d=(0,r.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var u=i(6256),m=i(812),h=i(8546),b=i(4362),f=i(579);const g=()=>(0,f.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,f.jsx)("div",{className:"h-8 bg-gray-700 rounded w-48 animate-pulse"}),(0,f.jsx)("div",{className:"bg-gray-800 p-6 rounded border border-gray-700 space-y-6",children:(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsx)("div",{className:"h-6 bg-gray-700 rounded w-40 animate-pulse"}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsx)("div",{className:"h-16 bg-gray-700 rounded animate-pulse"}),(0,f.jsx)("div",{className:"h-16 bg-gray-700 rounded animate-pulse"})]})]})})]}),x=()=>{const[e,s]=(0,l.useState)({isInvisible:!1,showEmail:!1}),[i,r]=(0,l.useState)({isInvisible:!1,showEmail:!1}),[x,y]=(0,l.useState)(!0),[v,p]=(0,l.useState)(!1),{alert:w,showSuccess:j,showError:N,handleApiError:k}=(0,h.M)(),[C,E]=(0,l.useState)(!1),[S,A]=(0,l.useState)(!1),I=e.isInvisible!==i.isInvisible||e.showEmail!==i.showEmail,z=(0,l.useCallback)(async()=>{y(!0);try{var e,i;const a=await u.FH.users.getUserSettings(),l={isInvisible:null!==(e=a.isInvisible)&&void 0!==e&&e,showEmail:null!==(i=a.showEmail)&&void 0!==i&&i};s(l),r(l)}catch(a){k(a,"Failed to load settings")}finally{y(!1)}},[]);(0,l.useEffect)(()=>{z()},[z]),(0,l.useEffect)(()=>{if(!I)return;const e=e=>(e.preventDefault(),e.returnValue="","");return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[I]);const F=(0,l.useCallback)(async()=>{if(I){p(!0);try{await u.FH.users.updateUserSettings({isInvisible:e.isInvisible,showEmail:e.showEmail}),r(e),j("Settings saved successfully!")}catch(s){k(s,"Failed to save settings")}finally{p(!1)}}else N("No changes to save")},[I,e]),L=(0,l.useCallback)(()=>{s(i)},[i]),T=(0,l.useCallback)(e=>{e&&!i.isInvisible?(A(!0),E(!0)):s(s=>(0,a.A)((0,a.A)({},s),{},{isInvisible:e}))},[i.isInvisible]),V=(0,l.useCallback)(()=>{s(e=>(0,a.A)((0,a.A)({},e),{},{isInvisible:S})),E(!1)},[S]),M=(0,l.useCallback)(()=>{E(!1),A(!1)},[]),P=(0,l.useCallback)(e=>{s(s=>(0,a.A)((0,a.A)({},s),{},{showEmail:e}))},[]);return x?(0,f.jsx)(g,{}):(0,f.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,f.jsx)(b.i,{alert:w}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Settings"}),(0,f.jsx)("button",{onClick:z,disabled:x||v,className:"p-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh settings",children:(0,f.jsx)(t.A,{size:20})})]}),(0,f.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 space-y-6",children:[(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,f.jsx)(n,{className:"text-blue-400",size:20}),(0,f.jsx)("h3",{className:"text-lg font-medium text-white",children:"Privacy Settings"})]}),(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("label",{htmlFor:"invisible-profile",className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-700 transition-colors group",children:[(0,f.jsx)("div",{className:"flex items-center h-6",children:(0,f.jsx)("input",{id:"invisible-profile",type:"checkbox",checked:e.isInvisible,onChange:e=>T(e.target.checked),disabled:v,className:"w-5 h-5 cursor-pointer disabled:cursor-not-allowed"})}),(0,f.jsxs)("div",{className:"flex-1",children:[(0,f.jsx)("div",{className:"text-white font-medium group-hover:text-blue-400 transition-colors",children:"Invisible Profile"}),(0,f.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"When enabled, other users cannot view your list or find you in search results. Your profile will be completely hidden from other users."})]})]}),(0,f.jsxs)("label",{htmlFor:"show-email",className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-700 transition-colors group",children:[(0,f.jsx)("div",{className:"flex items-center h-6",children:(0,f.jsx)("input",{id:"show-email",type:"checkbox",checked:e.showEmail,onChange:e=>P(e.target.checked),disabled:v,className:"w-5 h-5 cursor-pointer disabled:cursor-not-allowed"})}),(0,f.jsxs)("div",{className:"flex-1",children:[(0,f.jsx)("div",{className:"text-white font-medium group-hover:text-blue-400 transition-colors",children:"Show Email Address"}),(0,f.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"When enabled, your email address will be visible to other users in your profile, followers, and following lists. Default is hidden."})]})]})]})]}),I&&(0,f.jsxs)("div",{className:"bg-yellow-900 bg-opacity-20 border border-yellow-700 text-yellow-400 p-3 rounded-lg flex items-center gap-2",children:[(0,f.jsx)(o.A,{size:16}),(0,f.jsx)("span",{className:"text-sm",children:"You have unsaved changes"})]}),(0,f.jsxs)("div",{className:"flex gap-3",children:[(0,f.jsx)("button",{onClick:L,disabled:!I||v,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2.5 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900",children:"Reset"}),(0,f.jsx)("button",{onClick:F,disabled:!I||v,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2.5 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900",children:v?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.A,{size:18,className:"animate-spin"}),"Saving..."]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d,{size:18}),"Save Settings"]})})]})]}),(0,f.jsxs)("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[(0,f.jsx)("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"About Privacy Settings"}),(0,f.jsxs)("ul",{className:"text-xs text-gray-400 space-y-1 list-disc list-inside",children:[(0,f.jsx)("li",{children:"Changes take effect immediately after saving"}),(0,f.jsx)("li",{children:"Invisible profile hides you from all public searches and user lists"}),(0,f.jsx)("li",{children:"Email visibility only applies to authenticated users"}),(0,f.jsx)("li",{children:"You can change these settings at any time"})]})]}),(0,f.jsx)(m.u,{isOpen:C,title:"Enable Invisible Profile?",message:"Enabling invisible profile will hide your profile from all other users. They won't be able to view your list, find you in searches, or see you in followers/following lists. Are you sure you want to continue?",confirmText:"Enable",confirmVariant:"primary",onConfirm:V,onCancel:M})]})}}}]);
//# sourceMappingURL=289.fdb35ab3.chunk.js.map