/*! For license information please see 289.5be3ac13.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[289],{812(e,s,i){i.d(s,{u:()=>n});var a=i(5043),t=i(7719),l=i(614),r=i(579);const n=e=>{let{isOpen:s,title:i,message:n,confirmText:o="Confirm",cancelText:c="Cancel",confirmVariant:d="danger",isLoading:u=!1,onConfirm:m,onCancel:g}=e;const b=(0,a.useRef)(null),h=(0,a.useRef)(null),f=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!s)return;const e=e=>{"Escape"!==e.key||u||g()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,u,g]),(0,a.useEffect)(()=>{var e;if(!s)return;const i=b.current;if(!i)return;null===(e=h.current)||void 0===e||e.focus();const a=i.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=a[0],l=a[a.length-1],r=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(e.preventDefault(),null===l||void 0===l||l.focus()):document.activeElement===l&&(e.preventDefault(),null===t||void 0===t||t.focus()))};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[s]);const x=(0,a.useCallback)(e=>{e.target!==e.currentTarget||u||g()},[u,g]),y=(0,a.useCallback)(async()=>{u||await m()},[u,m]);if(!s)return null;const v="danger"===d?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500";return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ".concat("z-50"),onClick:x,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,r.jsxs)("div",{ref:b,className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700 shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:["danger"===d&&(0,r.jsx)(t.A,{className:"text-red-500 flex-shrink-0",size:24}),(0,r.jsx)("h3",{id:"modal-title",className:"text-xl font-bold text-white",children:i})]}),(0,r.jsx)("button",{onClick:g,disabled:u,className:"text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:(0,r.jsx)(l.A,{size:20})})]}),(0,r.jsx)("p",{id:"modal-description",className:"text-gray-300 mb-6",children:n}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{ref:h,onClick:g,disabled:u,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800",children:c}),(0,r.jsx)("button",{ref:f,onClick:y,disabled:u,className:"px-4 py-2 ".concat(v," text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 min-w-[100px]"),children:u?"Processing...":o})]})]})})}},7289(e,s,i){i.d(s,{Settings:()=>f});var a=i(2555),t=i(5043),l=i(516),r=i(2054),n=i(7819),o=i(5228);const c=(0,o.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var d=i(2024);const u=(0,o.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var m=i(6256),g=i(812),b=i(579);const h=()=>(0,b.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-700 rounded w-48 animate-pulse"}),(0,b.jsx)("div",{className:"bg-gray-800 p-6 rounded border border-gray-700 space-y-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"h-6 bg-gray-700 rounded w-40 animate-pulse"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"h-16 bg-gray-700 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-16 bg-gray-700 rounded animate-pulse"})]})]})})]}),f=()=>{const[e,s]=(0,t.useState)({isInvisible:!1,showEmail:!1}),[i,o]=(0,t.useState)({isInvisible:!1,showEmail:!1}),[f,x]=(0,t.useState)(!0),[y,v]=(0,t.useState)(!1),[p,w]=(0,t.useState)({type:null,message:""}),[j,N]=(0,t.useState)(!1),[k,C]=(0,t.useState)(!1),E=e.isInvisible!==i.isInvisible||e.showEmail!==i.showEmail,A=(0,t.useCallback)(async()=>{x(!0),w({type:null,message:""});try{var e,i;const a=await m.FH.users.getUserSettings(),t={isInvisible:null!==(e=a.isInvisible)&&void 0!==e&&e,showEmail:null!==(i=a.showEmail)&&void 0!==i&&i};s(t),o(t)}catch(a){a instanceof m.hD?S("error",a.message):a instanceof m.Dr?S("error","Network error. Please check your connection."):a instanceof m.MU?S("error","Request timeout. Please try again."):S("error","Failed to load settings"),console.error("Failed to load settings",a)}finally{x(!1)}},[]);(0,t.useEffect)(()=>{A()},[A]);const S=(0,t.useCallback)((e,s)=>{w({type:e,message:s}),"success"===e&&setTimeout(()=>w({type:null,message:""}),3e3)},[]);(0,t.useEffect)(()=>{if(!E)return;const e=e=>(e.preventDefault(),e.returnValue="","");return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[E]);const I=(0,t.useCallback)(async()=>{if(E){v(!0),w({type:null,message:""});try{await m.FH.users.updateUserSettings({isInvisible:e.isInvisible,showEmail:e.showEmail}),o(e),S("success","Settings saved successfully!")}catch(s){s instanceof m.hD?S("error",s.message):s instanceof m.Dr?S("error","Network error. Please check your connection."):s instanceof m.MU?S("error","Request timeout. Please try again."):S("error","Failed to save settings"),console.error("Failed to save settings",s)}finally{v(!1)}}else S("error","No changes to save")},[E,e,S]),z=(0,t.useCallback)(()=>{s(i),w({type:null,message:""})},[i]),F=(0,t.useCallback)(e=>{e&&!i.isInvisible?(C(!0),N(!0)):s(s=>(0,a.A)((0,a.A)({},s),{},{isInvisible:e}))},[i.isInvisible]),P=(0,t.useCallback)(()=>{s(e=>(0,a.A)((0,a.A)({},e),{},{isInvisible:k})),N(!1)},[k]),D=(0,t.useCallback)(()=>{N(!1),C(!1)},[]),L=(0,t.useCallback)(e=>{s(s=>(0,a.A)((0,a.A)({},s),{},{showEmail:e}))},[]);return f?(0,b.jsx)(h,{}):(0,b.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Settings"}),(0,b.jsx)("button",{onClick:A,disabled:f||y,className:"p-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh settings",children:(0,b.jsx)(l.A,{size:20})})]}),p.type&&(0,b.jsxs)("div",{className:"p-4 rounded-lg flex items-center gap-3 ".concat("success"===p.type?"bg-green-900 bg-opacity-20 border border-green-700 text-green-400":"bg-red-900 bg-opacity-20 border border-red-700 text-red-400"),role:"alert",children:["success"===p.type?(0,b.jsx)(r.A,{size:20}):(0,b.jsx)(n.A,{size:20}),(0,b.jsx)("span",{children:p.message})]}),(0,b.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(c,{className:"text-blue-400",size:20}),(0,b.jsx)("h3",{className:"text-lg font-medium text-white",children:"Privacy Settings"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("label",{htmlFor:"invisible-profile",className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-700 transition-colors group",children:[(0,b.jsx)("div",{className:"flex items-center h-6",children:(0,b.jsx)("input",{id:"invisible-profile",type:"checkbox",checked:e.isInvisible,onChange:e=>F(e.target.checked),disabled:y,className:"w-5 h-5 cursor-pointer disabled:cursor-not-allowed"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-white font-medium group-hover:text-blue-400 transition-colors",children:"Invisible Profile"}),(0,b.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"When enabled, other users cannot view your list or find you in search results. Your profile will be completely hidden from other users."})]})]}),(0,b.jsxs)("label",{htmlFor:"show-email",className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-700 transition-colors group",children:[(0,b.jsx)("div",{className:"flex items-center h-6",children:(0,b.jsx)("input",{id:"show-email",type:"checkbox",checked:e.showEmail,onChange:e=>L(e.target.checked),disabled:y,className:"w-5 h-5 cursor-pointer disabled:cursor-not-allowed"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-white font-medium group-hover:text-blue-400 transition-colors",children:"Show Email Address"}),(0,b.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"When enabled, your email address will be visible to other users in your profile, followers, and following lists. Default is hidden."})]})]})]})]}),E&&(0,b.jsxs)("div",{className:"bg-yellow-900 bg-opacity-20 border border-yellow-700 text-yellow-400 p-3 rounded-lg flex items-center gap-2",children:[(0,b.jsx)(n.A,{size:16}),(0,b.jsx)("span",{className:"text-sm",children:"You have unsaved changes"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:z,disabled:!E||y,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2.5 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900",children:"Reset"}),(0,b.jsx)("button",{onClick:I,disabled:!E||y,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2.5 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900",children:y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.A,{size:18,className:"animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u,{size:18}),"Save Settings"]})})]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"About Privacy Settings"}),(0,b.jsxs)("ul",{className:"text-xs text-gray-400 space-y-1 list-disc list-inside",children:[(0,b.jsx)("li",{children:"Changes take effect immediately after saving"}),(0,b.jsx)("li",{children:"Invisible profile hides you from all public searches and user lists"}),(0,b.jsx)("li",{children:"Email visibility only applies to authenticated users"}),(0,b.jsx)("li",{children:"You can change these settings at any time"})]})]}),(0,b.jsx)(g.u,{isOpen:j,title:"Enable Invisible Profile?",message:"Enabling invisible profile will hide your profile from all other users. They won't be able to view your list, find you in searches, or see you in followers/following lists. Are you sure you want to continue?",confirmText:"Enable",confirmVariant:"primary",onConfirm:P,onCancel:D})]})}}}]);
//# sourceMappingURL=289.5be3ac13.chunk.js.map