/*! For license information please see 456.e0f68760.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[456],{1360(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1382(e,t,a){a.d(t,{e:()=>s});const s=e=>{switch(e){case"MOVIE":return"bg-yellow-600";case"SERIES":return"bg-blue-600";case"GAME":return"bg-green-600";default:return"bg-gray-600"}}},1436(e,t,a){a.d(t,{C:()=>n});var s=a(2555),r=a(5043);function n(e){let{fetchFunction:t,filters:a,sortConfig:n,paginationMode:l}=e;const[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)({currentPage:0,totalPages:0,totalCount:0,hasNextPage:!1,hasPrevPage:!1,loading:!0}),[g,x]=(0,r.useState)([null]),h=(0,r.useRef)(null),u=(0,r.useCallback)(async function(e){h.current&&h.current.abort(),h.current=new AbortController,d(e=>(0,s.A)((0,s.A)({},e),{},{loading:!0}));try{const s=g[e],r=await t({page:e,cursor:s,filters:a,sortConfig:n,paginationMode:l});r.hasMore&&r.cursor&&x(t=>{const a=[...t];return e+1>=a.length&&a.push(r.cursor),a}),o(r.items),d({currentPage:e,totalPages:Math.ceil(r.totalCount/20),totalCount:r.totalCount,hasNextPage:r.hasMore,hasPrevPage:e>0,loading:!1})}catch(r){"AbortError"!==r.name&&(console.error("Failed to load page",r),o([]),d({currentPage:e,totalPages:0,totalCount:0,hasNextPage:!1,hasPrevPage:!1,loading:!1}))}finally{h.current=null}},[t,a,n,l,g]),m=(0,r.useCallback)(()=>{c.hasNextPage&&!c.loading&&u(c.currentPage+1)},[c.hasNextPage,c.loading,c.currentPage,u]),p=(0,r.useCallback)(()=>{c.currentPage>0&&!c.loading&&u(c.currentPage-1)},[c.currentPage,c.loading,u]),y=(0,r.useCallback)(()=>{"cursor"===l&&x([null]),u(0)},[l,u]);return{items:i,paginationState:c,cursors:g,loadPage:u,handleNextPage:m,handlePrevPage:p,resetPagination:y}}},2232(e,t,a){a.d(t,{P:()=>l});a(5043);var s=a(9463),r=a(8326),n=a(579);const l=e=>{let{paginationState:t,onNextPage:a,onPrevPage:l}=e;const{currentPage:i,totalPages:o,totalCount:c,hasNextPage:d,hasPrevPage:g,loading:x}=t;return o<=1?null:(0,n.jsxs)("div",{className:"flex items-center justify-center gap-4 mt-4",children:[(0,n.jsxs)("button",{onClick:l,disabled:!g||x,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,n.jsx)(s.A,{size:20}),"Previous"]}),(0,n.jsxs)("span",{className:"text-gray-300",children:["Page ",i+1," of ",o,c>0&&(0,n.jsxs)("span",{className:"text-xs text-gray-400 ml-2",children:["(",c," items)"]})]}),(0,n.jsxs)("button",{onClick:a,disabled:!d||x,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:["Next",(0,n.jsx)(r.A,{size:20})]})]})}},2382(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2456(e,t,a){a.d(t,{SearchMedia:()=>f});var s=a(2555),r=a(5043),n=a(6210),l=a(1360),i=a(614),o=a(5526),c=a(1382),d=a(6256),g=a(9727),x=a(2232),h=a(7226),u=a(1436),m=a(5631),p=a(7133),y=a(7530),b=a(579);const f=()=>{const{filters:e,availableFilters:t,setSearchQuery:a,setCategories:f,setGenres:v,setPlatforms:j,setAvailableGenres:N,setAvailablePlatforms:C,toggleFilter:k,clearAllFilters:A,hasActiveFilters:P}=(0,m.R)(),w=(0,p.d)(e.searchQuery,500),{sortConfig:S,paginationMode:F,handleSort:M,setSortConfig:E}=(0,y.y)(),{items:G,paginationState:R,loadPage:T,handleNextPage:z,handlePrevPage:I,resetPagination:H}=(0,u.C)({fetchFunction:async e=>{let{page:a,cursor:s,filters:r,sortConfig:n,paginationMode:l}=e;const i=r.genres.length>0?t.genres.filter(e=>r.genres.includes(e.name)).map(e=>e.id):void 0,o=r.platforms.length>0?t.platforms.filter(e=>r.platforms.includes(e.name)).map(e=>e.id):void 0,c=r.categories.length>0?r.categories:void 0;if("offset"===l&&n){const e={name:"NAME",year:"YEAR",avgRating:"AVG_RATING"}[n.key]||"NAME",t=await d.FH.media.searchMediaItemsSorted({query:w||"",categories:c,genreIds:i,platformIds:o,page:a,size:20,sortBy:e,sortDirection:n.direction.toUpperCase()});return{items:t.content,cursor:null,hasMore:a<t.totalPages-1,totalCount:t.totalElements}}{const e=await d.FH.media.searchMediaItemsCursor({query:w||"",categories:c,genreIds:i,platformIds:o,cursorName:null===s||void 0===s?void 0:s.name,cursorId:null===s||void 0===s?void 0:s.id,limit:20});return{items:e.items,cursor:e.nextCursor||null,hasMore:e.hasMore,totalCount:e.totalCount}}},filters:{searchQuery:w,categories:e.categories,genres:e.genres,platforms:e.platforms},sortConfig:S,paginationMode:F}),[L,q]=(0,r.useState)(!1),[Q,W]=(0,r.useState)(""),[U,V]=(0,r.useState)(null),[O,Y]=(0,r.useState)({}),B=(0,r.useRef)(!0),D=async()=>{try{const t=e.categories.length>0?e.categories:void 0,[a,s]=await Promise.all([d.FH.filters.getAvailableMediaGenres({query:w||void 0,categories:t}),d.FH.filters.getAvailableMediaPlatforms({query:w||void 0,categories:t})]);N(a),C(s)}catch(t){console.error("Failed to load available filters",t)}};(0,r.useEffect)(()=>{B.current&&(B.current=!1,D(),T(0))},[]),(0,r.useEffect)(()=>{B.current||H()},[w,e.categories,e.genres,e.platforms]),(0,r.useEffect)(()=>{B.current||D()},[w,e.categories]),(0,r.useEffect)(()=>{B.current||null===S||H()},[S]),(0,r.useEffect)(()=>{if(Q){const e=setTimeout(()=>W(""),5e3);return()=>clearTimeout(e)}},[Q]);const _=[{key:"category",label:"Category",render:e=>(0,b.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat((0,c.e)(e.category)," text-white"),children:e.category})},{key:"name",label:"Name",sortable:!0,render:e=>(0,b.jsx)("span",{className:"text-white font-medium",children:e.name})},{key:"year",label:"Year",sortable:!0,render:e=>(0,b.jsx)("span",{className:"text-gray-300",children:e.year||"-"})},{key:"avgRating",label:"Avg Rating",sortable:!0,render:e=>e.avgRating?(0,b.jsx)("span",{className:"text-yellow-400 font-medium",children:e.avgRating.toFixed(1)}):(0,b.jsx)("span",{children:"-"})},{key:"genre",label:"Genre",render:e=>(0,b.jsx)("span",{className:"text-gray-200 text-sm",children:e.genres.map(e=>e.name).join(", ")})},{key:"platform",label:"Platform",render:e=>(0,b.jsx)("span",{className:"text-gray-200 text-sm",children:e.platforms.map(e=>e.name).join(", ")})},{key:"experienced",label:"Experienced",align:"center",render:e=>{const t=U===e.id,a=!!t&&O.experienced;return t?(0,b.jsx)("input",{type:"checkbox",checked:a||!1,onChange:e=>Y((0,s.A)((0,s.A)({},O),{},{experienced:e.target.checked},e.target.checked?{}:{rating:void 0,wishToReexperience:!1})),className:"w-4 h-4"}):(0,b.jsx)("span",{children:"-"})}},{key:"reexperience",label:"Re-experience",align:"center",render:e=>{const t=U===e.id,a=!!t&&O.experienced;return t&&a?(0,b.jsx)("input",{type:"checkbox",checked:O.wishToReexperience||!1,onChange:e=>Y((0,s.A)((0,s.A)({},O),{},{wishToReexperience:e.target.checked})),className:"w-4 h-4"}):(0,b.jsx)("span",{children:"-"})}},{key:"rating",label:"Rating",render:e=>{const t=U===e.id,a=!!t&&O.experienced;return t&&a?(0,b.jsx)("div",{className:"flex items-center w-[220px]",children:(0,b.jsx)(o.G,{rating:O.rating,onChange:e=>Y((0,s.A)((0,s.A)({},O),{},{rating:e}))})}):(0,b.jsx)("div",{className:"flex items-center w-[220px]",children:(0,b.jsx)(o.G,{rating:void 0,readonly:!0,showLabel:!1})})}},{key:"comment",label:"Comment",render:e=>U===e.id?(0,b.jsx)("input",{type:"text",maxLength:100,value:O.comment||"",onChange:e=>Y((0,s.A)((0,s.A)({},O),{},{comment:e.target.value})),placeholder:"Add comment...",className:"w-full px-2 py-1 bg-gray-700 text-white rounded border border-gray-600 text-sm"}):(0,b.jsx)("span",{children:"-"})},{key:"actions",label:"Actions",align:"right",render:e=>{const t=U===e.id,a=e.inUserList||!1;return t?(0,b.jsx)("button",{onClick:()=>(async()=>{try{O.id&&(await d.FH.userMedia.updateMyListItem(O.id,O),V(null),Y({}))}catch(e){console.error("Failed to update item",e)}})(e.id),className:"px-2 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs",children:"Update"}):a?(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2 text-green-400",children:[(0,b.jsx)(n.A,{size:16}),(0,b.jsx)("span",{className:"text-xs",children:"Added"})]}):(0,b.jsxs)("button",{onClick:()=>(async e=>{try{const t=await d.FH.userMedia.addToMyList(e);V(e),Y({id:t.id,experienced:!1,wishToReexperience:!1,rating:void 0,comment:""}),G.forEach(t=>{t.id===e&&(t.inUserList=!0)}),W("")}catch(t){W(t.message||"Failed to add item")}})(e.id),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(l.A,{size:16}),"Add"]})}}],J=e.searchQuery.trim().length>0;return(0,b.jsxs)("div",{className:"space-y-4",children:[Q&&(0,b.jsxs)("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded flex justify-between items-center",children:[(0,b.jsx)("span",{children:Q}),(0,b.jsx)("button",{onClick:()=>W(""),className:"text-red-200 hover:text-white",children:(0,b.jsx)(i.A,{size:18})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:e.searchQuery,onChange:e=>a(e.target.value),placeholder:"Search for movies, series, or games...",className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"}),(J||P||S)&&(0,b.jsxs)("button",{onClick:()=>{a(""),A(),E(null)},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded flex items-center gap-2",title:"Clear all",children:[(0,b.jsx)(i.A,{size:20}),"Clear All"]})]}),(0,b.jsx)(g.c,{showFilters:L,onToggleFilters:()=>q(!L),hasActiveFilters:P,filterCategories:e.categories,filterGenres:e.genres,filterPlatforms:e.platforms,onCategoriesChange:f,onGenresChange:v,onPlatformsChange:j,availableGenres:t.genres,availablePlatforms:t.platforms,toggleFilter:k,onClearAll:A}),S&&(0,b.jsxs)("div",{className:"bg-gray-800 p-3 rounded border border-gray-700",children:[(0,b.jsx)("span",{className:"text-sm text-gray-300",children:"Active sort: "}),(0,b.jsxs)("span",{className:"text-sm text-blue-400 ml-2",children:[S.key," ","asc"===S.direction?"\u2191":"\u2193"]}),(0,b.jsx)("button",{onClick:()=>M(S.key),className:"ml-4 text-sm text-red-400 hover:text-red-300",children:"Clear sort"})]}),R.loading?(0,b.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.z,{columns:_,items:G,sortConfig:S,onSort:M,emptyMessage:"No results found. Try adjusting your search or filters."}),(0,b.jsx)(x.P,{paginationState:R,onNextPage:z,onPrevPage:I})]})]})}},2580(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},5631(e,t,a){a.d(t,{R:()=>n});var s=a(2555),r=a(5043);function n(){let{includeWishToExperience:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,a]=(0,r.useState)(""),[n,l]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1),[h,u]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),y=(0,r.useCallback)((e,t)=>e.includes(t)?e.filter(e=>e!==t):[...e,t],[]),b=(0,r.useCallback)(()=>{l([]),o([]),d([]),e&&x(!1)},[e]),f=n.length>0||i.length>0||c.length>0||e&&g;return{filters:(0,s.A)({searchQuery:t,categories:n,genres:i,platforms:c},e?{wishToExperience:g}:{}),availableFilters:{genres:h,platforms:m},setSearchQuery:a,setCategories:l,setGenres:o,setPlatforms:d,setWishToExperience:x,setAvailableGenres:u,setAvailablePlatforms:p,toggleFilter:y,clearAllFilters:b,hasActiveFilters:f}}},5711(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},6210(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7133(e,t,a){a.d(t,{d:()=>r});var s=a(5043);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[a,r]=(0,s.useState)(e);return(0,s.useEffect)(()=>{const a=setTimeout(()=>{r(e)},t);return()=>clearTimeout(a)},[e,t]),a}},7226(e,t,a){a.d(t,{z:()=>r});a(5043);var s=a(579);const r=e=>{let{columns:t,items:a,sortConfig:r,onSort:n,emptyMessage:l="No items to display"}=e;return 0===a.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-400",children:l}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-700 text-gray-300 text-sm",children:(0,s.jsx)("tr",{children:t.map(e=>{return(0,s.jsxs)("th",{className:"px-4 py-3 text-".concat(e.align||"left"," ").concat(e.sortable&&n?"cursor-pointer hover:bg-gray-600":""," ").concat(e.headerClassName||""),onClick:e.sortable&&n?()=>n(e.key):void 0,children:[e.label,e.sortable&&(t=e.key,r&&r.key===t?(0,s.jsx)("span",{className:"ml-1 text-blue-400 text-xs",children:"asc"===r.direction?"\u2191":"\u2193"}):null)]},e.key);var t})})}),(0,s.jsx)("tbody",{className:"text-sm",children:a.map((e,a)=>(0,s.jsx)("tr",{className:"border-b border-gray-700 hover:bg-gray-800",children:t.map(t=>(0,s.jsx)("td",{className:"px-4 py-3 ".concat(t.cellClassName||""),children:t.render(e,a)},t.key))},e.id||a))})]})})}},7530(e,t,a){a.d(t,{y:()=>r});var s=a(5043);function r(){const[e,t]=(0,s.useState)(null),[a,r]=(0,s.useState)("cursor");return{sortConfig:e,paginationMode:a,handleSort:(0,s.useCallback)(e=>{t(t=>t&&t.key===e?"asc"===t.direction?{key:e,direction:"desc"}:(r("cursor"),null):(r("offset"),{key:e,direction:"asc"}))},[]),setSortConfig:t}}},8326(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9463(e,t,a){a.d(t,{A:()=>s});const s=(0,a(5228).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},9727(e,t,a){a.d(t,{c:()=>i});a(5043);var s=a(2580),r=a(2382),n=a(5711),l=a(579);const i=e=>{let{showFilters:t,onToggleFilters:a,hasActiveFilters:i,filterCategories:o,filterGenres:c,filterPlatforms:d,wishToExperience:g,onCategoriesChange:x,onGenresChange:h,onPlatformsChange:u,onWishToExperienceChange:m,availableGenres:p,availablePlatforms:y,toggleFilter:b,onClearAll:f,showGenres:v=!0,showPlatforms:j=!0,showWishToExperience:N=!1}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex items-center gap-4",children:(0,l.jsxs)("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded border border-gray-700",children:[(0,l.jsx)(s.A,{size:18}),t?"Hide Filters":"Show Filters",t?(0,l.jsx)(n.A,{size:18}):(0,l.jsx)(r.A,{size:18}),i&&!t&&(0,l.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-blue-600 text-xs rounded",children:"Active"})]})}),t&&(0,l.jsxs)("div",{className:"bg-gray-800 p-4 rounded border border-gray-700 space-y-4",children:[N&&m&&(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("h3",{className:"text-white font-medium",children:"Filters:"}),(0,l.jsxs)("label",{className:"flex items-center gap-2 text-white cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:g||!1,onChange:e=>m(e.target.checked),className:"w-4 h-4"}),"Wish to Experience"]})]}),!N&&(0,l.jsx)("h3",{className:"text-white font-medium",children:"Filters:"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Categories:"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:["MOVIE","SERIES","GAME"].map(e=>(0,l.jsx)("button",{onClick:()=>x(b(o,e)),className:"px-3 py-1 rounded text-sm ".concat(o.includes(e)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e},e))})]}),v&&p.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Genres:"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto",children:p.map(e=>(0,l.jsx)("button",{onClick:()=>h(b(c,e.name)),className:"px-3 py-1 rounded text-sm ".concat(c.includes(e.name)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e.name},e.id))})]}),j&&y.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Platforms:"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto",children:y.map(e=>(0,l.jsx)("button",{onClick:()=>u(b(d,e.name)),className:"px-3 py-1 rounded text-sm ".concat(d.includes(e.name)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e.name},e.id))})]}),i&&(0,l.jsx)("button",{onClick:f,className:"text-sm text-blue-400 hover:text-blue-300",children:"Clear all filters"})]})]})}}}]);
//# sourceMappingURL=456.e0f68760.chunk.js.map