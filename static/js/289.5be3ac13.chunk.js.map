{"version":3,"file":"static/js/289.5be3ac13.chunk.js","mappings":"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","sources":["components/common/ConfirmModal.tsx","../node_modules/lucide-react/src/icons/shield.ts","../node_modules/lucide-react/src/icons/save.ts","components/settings/Settings.tsx"],"sourcesContent":["import React, { useEffect, useRef, useCallback } from 'react';\r\nimport { AlertTriangle, X } from 'lucide-react';\r\n\r\n// Constants\r\nconst MODAL_Z_INDEX = 'z-50';\r\n\r\ninterface ConfirmModalProps {\r\n  isOpen: boolean;\r\n  title: string;\r\n  message: string;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  confirmVariant?: 'danger' | 'primary';\r\n  isLoading?: boolean;\r\n  onConfirm: () => void | Promise<void>;\r\n  onCancel: () => void;\r\n}\r\n\r\nexport const ConfirmModal: React.FC<ConfirmModalProps> = ({\r\n  isOpen,\r\n  title,\r\n  message,\r\n  confirmText = 'Confirm',\r\n  cancelText = 'Cancel',\r\n  confirmVariant = 'danger',\r\n  isLoading = false,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n  const cancelButtonRef = useRef<HTMLButtonElement>(null);\r\n  const confirmButtonRef = useRef<HTMLButtonElement>(null);\r\n\r\n  /**\r\n   * Handle escape key press\r\n   */\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && !isLoading) {\r\n        onCancel();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => document.removeEventListener('keydown', handleEscape);\r\n  }, [isOpen, isLoading, onCancel]);\r\n\r\n  /**\r\n   * Focus trap\r\n   */\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const modal = modalRef.current;\r\n    if (!modal) return;\r\n\r\n    // Focus first button\r\n    cancelButtonRef.current?.focus();\r\n\r\n    // Get all focusable elements\r\n    const focusableElements = modal.querySelectorAll<HTMLElement>(\r\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    );\r\n\r\n    const firstElement = focusableElements[0];\r\n    const lastElement = focusableElements[focusableElements.length - 1];\r\n\r\n    const handleTab = (e: KeyboardEvent) => {\r\n      if (e.key !== 'Tab') return;\r\n\r\n      if (e.shiftKey) {\r\n        // Shift + Tab\r\n        if (document.activeElement === firstElement) {\r\n          e.preventDefault();\r\n          lastElement?.focus();\r\n        }\r\n      } else {\r\n        // Tab\r\n        if (document.activeElement === lastElement) {\r\n          e.preventDefault();\r\n          firstElement?.focus();\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleTab);\r\n    return () => document.removeEventListener('keydown', handleTab);\r\n  }, [isOpen]);\r\n\r\n  /**\r\n   * Handle backdrop click\r\n   */\r\n  const handleBackdropClick = useCallback(\r\n    (e: React.MouseEvent) => {\r\n      if (e.target === e.currentTarget && !isLoading) {\r\n        onCancel();\r\n      }\r\n    },\r\n    [isLoading, onCancel]\r\n  );\r\n\r\n  /**\r\n   * Handle confirm with async support\r\n   */\r\n  const handleConfirm = useCallback(async () => {\r\n    if (isLoading) return;\r\n    await onConfirm();\r\n  }, [isLoading, onConfirm]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const confirmButtonClass =\r\n    confirmVariant === 'danger'\r\n      ? 'bg-red-600 hover:bg-red-700 focus:ring-red-500'\r\n      : 'bg-blue-600 hover:bg-blue-700 focus:ring-blue-500';\r\n\r\n  return (\r\n    <div\r\n      className={`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ${MODAL_Z_INDEX}`}\r\n      onClick={handleBackdropClick}\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby=\"modal-title\"\r\n      aria-describedby=\"modal-description\"\r\n    >\r\n      <div\r\n        ref={modalRef}\r\n        className=\"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700 shadow-xl\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-start justify-between mb-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            {confirmVariant === 'danger' && (\r\n              <AlertTriangle className=\"text-red-500 flex-shrink-0\" size={24} />\r\n            )}\r\n            <h3 id=\"modal-title\" className=\"text-xl font-bold text-white\">\r\n              {title}\r\n            </h3>\r\n          </div>\r\n          <button\r\n            onClick={onCancel}\r\n            disabled={isLoading}\r\n            className=\"text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            aria-label=\"Close modal\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Message */}\r\n        <p id=\"modal-description\" className=\"text-gray-300 mb-6\">\r\n          {message}\r\n        </p>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex gap-3 justify-end\">\r\n          <button\r\n            ref={cancelButtonRef}\r\n            onClick={onCancel}\r\n            disabled={isLoading}\r\n            className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800\"\r\n          >\r\n            {cancelText}\r\n          </button>\r\n          <button\r\n            ref={confirmButtonRef}\r\n            onClick={handleConfirm}\r\n            disabled={isLoading}\r\n            className={`px-4 py-2 ${confirmButtonClass} text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 min-w-[100px]`}\r\n          >\r\n            {isLoading ? 'Processing...' : confirmText}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z',\n      key: 'oel41y',\n    },\n  ],\n];\n\n/**\n * @component @name Shield\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMTNjMCA1LTMuNSA3LjUtNy42NiA4Ljk1YTEgMSAwIDAgMS0uNjctLjAxQzcuNSAyMC41IDQgMTggNCAxM1Y2YTEgMSAwIDAgMSAxLTFjMiAwIDQuNS0xLjIgNi4yNC0yLjcyYTEuMTcgMS4xNyAwIDAgMSAxLjUyIDBDMTQuNTEgMy44MSAxNyA1IDE5IDVhMSAxIDAgMCAxIDEgMXoiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/shield\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Shield = createLucideIcon('shield', __iconNode);\n\nexport default Shield;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z',\n      key: '1c8476',\n    },\n  ],\n  ['path', { d: 'M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7', key: '1ydtos' }],\n  ['path', { d: 'M7 3v4a1 1 0 0 0 1 1h7', key: 't51u73' }],\n];\n\n/**\n * @component @name Save\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUuMiAzYTIgMiAwIDAgMSAxLjQuNmwzLjggMy44YTIgMiAwIDAgMSAuNiAxLjRWMTlhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yeiIgLz4KICA8cGF0aCBkPSJNMTcgMjF2LTdhMSAxIDAgMCAwLTEtMUg4YTEgMSAwIDAgMC0xIDF2NyIgLz4KICA8cGF0aCBkPSJNNyAzdjRhMSAxIDAgMCAwIDEgMWg3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/save\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Save = createLucideIcon('save', __iconNode);\n\nexport default Save;\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Save, RefreshCw, AlertCircle, CheckCircle, Loader2, Shield } from 'lucide-react';\r\nimport { api, ApiError, NetworkError, TimeoutError } from '../../api';\r\nimport { ConfirmModal } from '../common/ConfirmModal';\r\n\r\n// Constants\r\nconst SUCCESS_MESSAGE_DURATION_MS = 3000;\r\n\r\n// Types\r\ninterface UserSettings {\r\n  isInvisible: boolean;\r\n  showEmail: boolean;\r\n}\r\n\r\ninterface AlertState {\r\n  type: 'success' | 'error' | null;\r\n  message: string;\r\n}\r\n\r\n/**\r\n * Loading Skeleton Component\r\n */\r\nconst SettingsSkeleton: React.FC = () => (\r\n  <div className=\"max-w-2xl mx-auto space-y-6\">\r\n    <div className=\"h-8 bg-gray-700 rounded w-48 animate-pulse\"></div>\r\n    <div className=\"bg-gray-800 p-6 rounded border border-gray-700 space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <div className=\"h-6 bg-gray-700 rounded w-40 animate-pulse\"></div>\r\n        <div className=\"space-y-3\">\r\n          <div className=\"h-16 bg-gray-700 rounded animate-pulse\"></div>\r\n          <div className=\"h-16 bg-gray-700 rounded animate-pulse\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n/**\r\n * Settings Component\r\n */\r\nexport const Settings: React.FC = () => {\r\n  // Settings state\r\n  const [settings, setSettings] = useState<UserSettings>({\r\n    isInvisible: false,\r\n    showEmail: false,\r\n  });\r\n  const [originalSettings, setOriginalSettings] = useState<UserSettings>({\r\n    isInvisible: false,\r\n    showEmail: false,\r\n  });\r\n\r\n  // UI state\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [alert, setAlert] = useState<AlertState>({ type: null, message: '' });\r\n  const [showInvisibleConfirm, setShowInvisibleConfirm] = useState(false);\r\n  const [pendingInvisibleValue, setPendingInvisibleValue] = useState(false);\r\n\r\n  /**\r\n   * Check if settings have been modified\r\n   */\r\n  const isDirty = settings.isInvisible !== originalSettings.isInvisible ||\r\n                   settings.showEmail !== originalSettings.showEmail;\r\n\r\n  /**\r\n   * Load user settings\r\n   */\r\n  const loadSettings = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setAlert({ type: null, message: '' });\r\n\r\n    try {\r\n      const response = await api.users.getUserSettings();\r\n      \r\n      const loadedSettings: UserSettings = {\r\n        isInvisible: response.isInvisible ?? false,\r\n        showEmail: response.showEmail ?? false,\r\n      };\r\n\r\n      setSettings(loadedSettings);\r\n      setOriginalSettings(loadedSettings);\r\n    } catch (error) {\r\n      if (error instanceof ApiError) {\r\n        showAlert('error', error.message);\r\n      } else if (error instanceof NetworkError) {\r\n        showAlert('error', 'Network error. Please check your connection.');\r\n      } else if (error instanceof TimeoutError) {\r\n        showAlert('error', 'Request timeout. Please try again.');\r\n      } else {\r\n        showAlert('error', 'Failed to load settings');\r\n      }\r\n      console.error('Failed to load settings', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Initial load\r\n   */\r\n  useEffect(() => {\r\n    loadSettings();\r\n  }, [loadSettings]);\r\n\r\n  /**\r\n   * Show alert with auto-dismiss\r\n   */\r\n  const showAlert = useCallback((type: 'success' | 'error', message: string) => {\r\n    setAlert({ type, message });\r\n    \r\n    if (type === 'success') {\r\n      setTimeout(() => setAlert({ type: null, message: '' }), SUCCESS_MESSAGE_DURATION_MS);\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Warn before leaving with unsaved changes\r\n   */\r\n  useEffect(() => {\r\n    if (!isDirty) return;\r\n\r\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\r\n      e.preventDefault();\r\n      e.returnValue = '';\r\n      return '';\r\n    };\r\n\r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n    return () => window.removeEventListener('beforeunload', handleBeforeUnload);\r\n  }, [isDirty]);\r\n\r\n  /**\r\n   * Handle save settings\r\n   */\r\n  const handleSave = useCallback(async () => {\r\n    if (!isDirty) {\r\n      showAlert('error', 'No changes to save');\r\n      return;\r\n    }\r\n\r\n    setIsSaving(true);\r\n    setAlert({ type: null, message: '' });\r\n\r\n    try {\r\n      await api.users.updateUserSettings({\r\n        isInvisible: settings.isInvisible,\r\n        showEmail: settings.showEmail,\r\n      });\r\n\r\n      setOriginalSettings(settings);\r\n      showAlert('success', 'Settings saved successfully!');\r\n    } catch (error) {\r\n      if (error instanceof ApiError) {\r\n        showAlert('error', error.message);\r\n      } else if (error instanceof NetworkError) {\r\n        showAlert('error', 'Network error. Please check your connection.');\r\n      } else if (error instanceof TimeoutError) {\r\n        showAlert('error', 'Request timeout. Please try again.');\r\n      } else {\r\n        showAlert('error', 'Failed to save settings');\r\n      }\r\n      console.error('Failed to save settings', error);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  }, [isDirty, settings, showAlert]);\r\n\r\n  /**\r\n   * Handle reset to original values\r\n   */\r\n  const handleReset = useCallback(() => {\r\n    setSettings(originalSettings);\r\n    setAlert({ type: null, message: '' });\r\n  }, [originalSettings]);\r\n\r\n  /**\r\n   * Handle invisible profile toggle\r\n   */\r\n  const handleInvisibleChange = useCallback((checked: boolean) => {\r\n    if (checked && !originalSettings.isInvisible) {\r\n      // Show confirmation when enabling invisible mode\r\n      setPendingInvisibleValue(true);\r\n      setShowInvisibleConfirm(true);\r\n    } else {\r\n      setSettings(prev => ({ ...prev, isInvisible: checked }));\r\n    }\r\n  }, [originalSettings.isInvisible]);\r\n\r\n  /**\r\n   * Confirm invisible profile change\r\n   */\r\n  const handleConfirmInvisible = useCallback(() => {\r\n    setSettings(prev => ({ ...prev, isInvisible: pendingInvisibleValue }));\r\n    setShowInvisibleConfirm(false);\r\n  }, [pendingInvisibleValue]);\r\n\r\n  /**\r\n   * Cancel invisible profile change\r\n   */\r\n  const handleCancelInvisible = useCallback(() => {\r\n    setShowInvisibleConfirm(false);\r\n    setPendingInvisibleValue(false);\r\n  }, []);\r\n\r\n  /**\r\n   * Handle show email toggle\r\n   */\r\n  const handleShowEmailChange = useCallback((checked: boolean) => {\r\n    setSettings(prev => ({ ...prev, showEmail: checked }));\r\n  }, []);\r\n\r\n  // Loading state\r\n  if (isLoading) {\r\n    return <SettingsSkeleton />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h2 className=\"text-2xl font-bold text-white\">Settings</h2>\r\n        <button\r\n          onClick={loadSettings}\r\n          disabled={isLoading || isSaving}\r\n          className=\"p-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          aria-label=\"Refresh settings\"\r\n        >\r\n          <RefreshCw size={20} />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Alert Messages */}\r\n      {alert.type && (\r\n        <div\r\n          className={`p-4 rounded-lg flex items-center gap-3 ${\r\n            alert.type === 'success'\r\n              ? 'bg-green-900 bg-opacity-20 border border-green-700 text-green-400'\r\n              : 'bg-red-900 bg-opacity-20 border border-red-700 text-red-400'\r\n          }`}\r\n          role=\"alert\"\r\n        >\r\n          {alert.type === 'success' ? (\r\n            <CheckCircle size={20} />\r\n          ) : (\r\n            <AlertCircle size={20} />\r\n          )}\r\n          <span>{alert.message}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Settings Panel */}\r\n      <div className=\"bg-gray-800 p-6 rounded-lg border border-gray-700 space-y-6\">\r\n        {/* Privacy Settings Section */}\r\n        <div>\r\n          <div className=\"flex items-center gap-2 mb-4\">\r\n            <Shield className=\"text-blue-400\" size={20} />\r\n            <h3 className=\"text-lg font-medium text-white\">Privacy Settings</h3>\r\n          </div>\r\n          \r\n          <div className=\"space-y-4\">\r\n            {/* Invisible Profile Setting */}\r\n            <label \r\n              htmlFor=\"invisible-profile\"\r\n              className=\"flex items-start gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-700 transition-colors group\"\r\n            >\r\n              <div className=\"flex items-center h-6\">\r\n                <input\r\n                  id=\"invisible-profile\"\r\n                  type=\"checkbox\"\r\n                  checked={settings.isInvisible}\r\n                  onChange={(e) => handleInvisibleChange(e.target.checked)}\r\n                  disabled={isSaving}\r\n                  className=\"w-5 h-5 cursor-pointer disabled:cursor-not-allowed\"\r\n                />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <div className=\"text-white font-medium group-hover:text-blue-400 transition-colors\">\r\n                  Invisible Profile\r\n                </div>\r\n                <div className=\"text-sm text-gray-400 mt-1\">\r\n                  When enabled, other users cannot view your list or find you in search results. \r\n                  Your profile will be completely hidden from other users.\r\n                </div>\r\n              </div>\r\n            </label>\r\n\r\n            {/* Show Email Setting */}\r\n            <label \r\n              htmlFor=\"show-email\"\r\n              className=\"flex items-start gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-700 transition-colors group\"\r\n            >\r\n              <div className=\"flex items-center h-6\">\r\n                <input\r\n                  id=\"show-email\"\r\n                  type=\"checkbox\"\r\n                  checked={settings.showEmail}\r\n                  onChange={(e) => handleShowEmailChange(e.target.checked)}\r\n                  disabled={isSaving}\r\n                  className=\"w-5 h-5 cursor-pointer disabled:cursor-not-allowed\"\r\n                />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <div className=\"text-white font-medium group-hover:text-blue-400 transition-colors\">\r\n                  Show Email Address\r\n                </div>\r\n                <div className=\"text-sm text-gray-400 mt-1\">\r\n                  When enabled, your email address will be visible to other users in your profile, \r\n                  followers, and following lists. Default is hidden.\r\n                </div>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Unsaved Changes Warning */}\r\n        {isDirty && (\r\n          <div className=\"bg-yellow-900 bg-opacity-20 border border-yellow-700 text-yellow-400 p-3 rounded-lg flex items-center gap-2\">\r\n            <AlertCircle size={16} />\r\n            <span className=\"text-sm\">You have unsaved changes</span>\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={handleReset}\r\n            disabled={!isDirty || isSaving}\r\n            className=\"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2.5 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900\"\r\n          >\r\n            Reset\r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={!isDirty || isSaving}\r\n            className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2.5 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900\"\r\n          >\r\n            {isSaving ? (\r\n              <>\r\n                <Loader2 size={18} className=\"animate-spin\" />\r\n                Saving...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Save size={18} />\r\n                Save Settings\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Additional Info */}\r\n      <div className=\"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700\">\r\n        <h4 className=\"text-sm font-medium text-gray-300 mb-2\">About Privacy Settings</h4>\r\n        <ul className=\"text-xs text-gray-400 space-y-1 list-disc list-inside\">\r\n          <li>Changes take effect immediately after saving</li>\r\n          <li>Invisible profile hides you from all public searches and user lists</li>\r\n          <li>Email visibility only applies to authenticated users</li>\r\n          <li>You can change these settings at any time</li>\r\n        </ul>\r\n      </div>\r\n\r\n      {/* Invisible Profile Confirmation Modal */}\r\n      <ConfirmModal\r\n        isOpen={showInvisibleConfirm}\r\n        title=\"Enable Invisible Profile?\"\r\n        message=\"Enabling invisible profile will hide your profile from all other users. They won't be able to view your list, find you in searches, or see you in followers/following lists. Are you sure you want to continue?\"\r\n        confirmText=\"Enable\"\r\n        confirmVariant=\"primary\"\r\n        onConfirm={handleConfirmInvisible}\r\n        onCancel={handleCancelInvisible}\r\n      />\r\n    </div>\r\n  );\r\n};"],"names":["ConfirmModal","_ref","isOpen","title","message","confirmText","cancelText","confirmVariant","isLoading","onConfirm","onCancel","modalRef","useRef","cancelButtonRef","confirmButtonRef","useEffect","handleEscape","e","key","document","addEventListener","removeEventListener","_cancelButtonRef$curr","modal","current","focus","focusableElements","querySelectorAll","firstElement","lastElement","length","handleTab","shiftKey","activeElement","preventDefault","handleBackdropClick","useCallback","target","currentTarget","handleConfirm","async","confirmButtonClass","_jsx","className","concat","onClick","role","children","_jsxs","ref","AlertTriangle","size","id","disabled","X","Shield","createLucideIcon","d","Save","SettingsSkeleton","Settings","settings","setSettings","useState","isInvisible","showEmail","originalSettings","setOriginalSettings","setIsLoading","isSaving","setIsSaving","alert","setAlert","type","showInvisibleConfirm","setShowInvisibleConfirm","pendingInvisibleValue","setPendingInvisibleValue","isDirty","loadSettings","_response$isInvisible","_response$showEmail","response","api","users","getUserSettings","loadedSettings","error","ApiError","showAlert","NetworkError","TimeoutError","console","setTimeout","handleBeforeUnload","returnValue","window","handleSave","updateUserSettings","handleReset","handleInvisibleChange","checked","prev","_objectSpread","handleConfirmInvisible","handleCancelInvisible","handleShowEmailChange","RefreshCw","CheckCircle","AlertCircle","htmlFor","onChange","_Fragment","Loader2"],"ignoreList":[],"sourceRoot":""}