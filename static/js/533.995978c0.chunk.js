/*! For license information please see 533.995978c0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[533],{812(e,s,t){t.d(s,{u:()=>n});var l=t(5043),o=t(7719),a=t(614),r=t(579);const n=e=>{let{isOpen:s,title:t,message:n,confirmText:i="Confirm",cancelText:c="Cancel",confirmVariant:d="danger",isLoading:u=!1,onConfirm:f,onCancel:m}=e;const g=(0,l.useRef)(null),x=(0,l.useRef)(null),h=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(!s)return;const e=e=>{"Escape"!==e.key||u||m()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,u,m]),(0,l.useEffect)(()=>{var e;if(!s)return;const t=g.current;if(!t)return;null===(e=x.current)||void 0===e||e.focus();const l=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),o=l[0],a=l[l.length-1],r=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===o&&(e.preventDefault(),null===a||void 0===a||a.focus()):document.activeElement===a&&(e.preventDefault(),null===o||void 0===o||o.focus()))};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[s]);const y=(0,l.useCallback)(e=>{e.target!==e.currentTarget||u||m()},[u,m]),b=(0,l.useCallback)(async()=>{u||await f()},[u,f]);if(!s)return null;const w="danger"===d?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500";return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ".concat("z-50"),onClick:y,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,r.jsxs)("div",{ref:g,className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700 shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:["danger"===d&&(0,r.jsx)(o.A,{className:"text-red-500 flex-shrink-0",size:24}),(0,r.jsx)("h3",{id:"modal-title",className:"text-xl font-bold text-white",children:t})]}),(0,r.jsx)("button",{onClick:m,disabled:u,className:"text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:(0,r.jsx)(a.A,{size:20})})]}),(0,r.jsx)("p",{id:"modal-description",className:"text-gray-300 mb-6",children:n}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{ref:x,onClick:m,disabled:u,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800",children:c}),(0,r.jsx)("button",{ref:h,onClick:b,disabled:u,className:"px-4 py-2 ".concat(w," text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 min-w-[100px]"),children:u?"Processing...":i})]})]})})}},1884(e,s,t){t.d(s,{A:()=>l});const l=(0,t(5228).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5533(e,s,t){t.d(s,{FollowManagement:()=>h});var l=t(5043),o=t(6256),a=t(812),r=t(8546),n=t(4362),i=t(3329),c=t(9233),d=t(516),u=t(9292),f=t(1884),m=t(7118),g=t(579);const x=e=>{let{type:s}=e;return(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("div",{className:"mb-4",children:"following"===s?(0,g.jsx)(f.A,{className:"w-16 h-16 text-gray-600 mx-auto"}):(0,g.jsx)(m.A,{className:"w-16 h-16 text-gray-600 mx-auto"})}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"following"===s?"You're not following anyone yet":"No followers yet"}),(0,g.jsx)("p",{className:"text-sm text-gray-500 max-w-sm mx-auto",children:"following"===s?"Start following users to get notified about their ratings and discover what they're watching":"When other users follow you, they'll appear here"})]})},h=e=>{let{onViewUser:s}=e;const[t,f]=(0,l.useState)([]),[m,h]=(0,l.useState)([]),[y,b]=(0,l.useState)([]),[w,p]=(0,l.useState)([]),[v,j]=(0,l.useState)("following"),[N,k]=(0,l.useState)(!0),[C,A]=(0,l.useState)(!1),[S,F]=(0,l.useState)(!1),[E,L]=(0,l.useState)(""),{alert:I,showSuccess:T,showError:z,handleApiError:M}=(0,r.M)(),[R,U]=(0,l.useState)({show:!1,userId:null,username:""}),H=(0,l.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?A(!0):k(!0);try{const[s,t]=await Promise.all([o.FH.follows.getFollowing(),o.FH.follows.getFollowers()]);f(s),h(t),b(s),p(t),e&&T("Follow list refreshed successfully")}catch(s){M(s,"Failed to load follow data")}finally{k(!1),A(!1)}},[]);(0,l.useEffect)(()=>{H()},[H]),(0,l.useEffect)(()=>{if(!E.trim())return b(t),void p(m);const e=E.toLowerCase();b(t.filter(s=>{var t;return s.user.username.toLowerCase().includes(e)||(null===(t=s.user.email)||void 0===t?void 0:t.toLowerCase().includes(e))})),p(m.filter(s=>{var t;return s.username.toLowerCase().includes(e)||(null===(t=s.email)||void 0===t?void 0:t.toLowerCase().includes(e))}))},[E,t,m]);const q=(0,l.useCallback)(()=>{L(""),H(!0)},[H]),V=(0,l.useCallback)(async()=>{if(R.userId){F(!0);try{await o.FH.follows.unfollowUser(R.userId),f(e=>e.filter(e=>e.user.id!==R.userId)),b(e=>e.filter(e=>e.user.id!==R.userId)),T("Successfully unfollowed ".concat(R.username)),U({show:!1,userId:null,username:""})}catch(e){M(e,"Failed to unfollow user")}finally{F(!1)}}},[R]),D=(0,l.useCallback)((e,s)=>{U({show:!0,userId:e,username:s})},[]),O=(0,l.useCallback)(()=>{S||U({show:!1,userId:null,username:""})},[S]),P=(0,l.useCallback)(e=>{j(e),L("")},[]),Y=e=>0===e||null===e?"No notifications":"Notify when rating \u2265 ".concat(e);if(N)return(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)(d.A,{className:"w-8 h-8 text-blue-500 animate-spin mx-auto mb-4"}),(0,g.jsx)("p",{className:"text-gray-400",children:"Loading follow data..."})]});const K=y,W=w;return(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)(n.i,{alert:I}),(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Follow Management"}),(0,g.jsx)("button",{onClick:q,disabled:C,className:"p-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh follow data",children:(0,g.jsx)(d.A,{size:20,className:C?"animate-spin":""})})]}),(0,g.jsxs)("div",{className:"flex gap-2",role:"tablist",children:[(0,g.jsxs)("button",{role:"tab","aria-selected":"following"===v,"aria-controls":"following-panel",onClick:()=>P("following"),className:"px-4 py-2 rounded font-medium transition-colors ".concat("following"===v?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:["Following (",t.length,")"]}),(0,g.jsxs)("button",{role:"tab","aria-selected":"followers"===v,"aria-controls":"followers-panel",onClick:()=>P("followers"),className:"px-4 py-2 rounded font-medium transition-colors ".concat("followers"===v?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:["Followers (",m.length,")"]})]}),(t.length>0||m.length>0)&&(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)(u.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,g.jsx)("input",{type:"text",value:E,onChange:e=>L(e.target.value),placeholder:"Search ".concat(v,"..."),className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none","aria-label":"Search ".concat(v)})]}),"following"===v&&(0,g.jsx)("div",{id:"following-panel",role:"tabpanel",className:"space-y-3",children:0===K.length?E?(0,g.jsxs)("div",{className:"text-center py-8 text-gray-400",children:['No results found for "',E,'"']}):(0,g.jsx)(x,{type:"following"}):K.map(e=>(0,g.jsxs)("div",{className:"bg-gray-800 p-4 rounded border border-gray-700 flex justify-between items-center hover:bg-gray-700 transition-colors group",children:[(0,g.jsx)("button",{onClick:()=>s(e.user.id),className:"flex-1 text-left focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900 rounded -m-2 p-2",children:(0,g.jsx)("div",{className:"flex items-center gap-3",children:(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("p",{className:"text-white font-medium group-hover:text-blue-400 transition-colors",children:e.user.username}),(0,g.jsx)("div",{className:"flex items-center gap-2 mt-1",children:null===e.minimumRatingThreshold?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.A,{size:14,className:"text-gray-500"}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:Y(e.minimumRatingThreshold)})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.A,{size:14,className:"text-blue-400"}),(0,g.jsx)("p",{className:"text-sm text-gray-400",children:Y(e.minimumRatingThreshold)})]})})]})})}),(0,g.jsx)("button",{onClick:()=>D(e.user.id,e.user.username),className:"ml-4 px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-900","aria-label":"Unfollow ".concat(e.user.username),children:"Unfollow"})]},e.id))}),"followers"===v&&(0,g.jsx)("div",{id:"followers-panel",role:"tabpanel",className:"space-y-3",children:0===W.length?E?(0,g.jsxs)("div",{className:"text-center py-8 text-gray-400",children:['No results found for "',E,'"']}):(0,g.jsx)(x,{type:"followers"}):W.map(e=>(0,g.jsxs)("button",{onClick:()=>s(e.id),className:"w-full bg-gray-800 p-4 rounded border border-gray-700 hover:bg-gray-700 transition-colors text-left focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900 group",children:[(0,g.jsx)("p",{className:"text-white font-medium group-hover:text-blue-400 transition-colors",children:e.username}),(0,g.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:e.email})]},e.id))}),(0,g.jsx)(a.u,{isOpen:R.show,title:"Unfollow User",message:"Are you sure you want to unfollow ".concat(R.username,"? You will no longer receive notifications about their ratings."),confirmText:"Unfollow",confirmVariant:"danger",isLoading:S,onConfirm:V,onCancel:O})]})}},7118(e,s,t){t.d(s,{A:()=>l});const l=(0,t(5228).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9292(e,s,t){t.d(s,{A:()=>l});const l=(0,t(5228).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}}]);
//# sourceMappingURL=533.995978c0.chunk.js.map