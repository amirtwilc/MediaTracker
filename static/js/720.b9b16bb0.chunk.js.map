{"version":3,"file":"static/js/720.b9b16bb0.chunk.js","mappings":";0JAIA,MAcaA,EAA4CC,IAUlD,IAVmD,OACxDC,EAAM,MACNC,EAAK,QACLC,EAAO,YACPC,EAAc,UAAS,WACvBC,EAAa,SAAQ,eACrBC,EAAiB,SAAQ,UACzBC,GAAY,EAAK,UACjBC,EAAS,SACTC,GACDT,EACC,MAAMU,GAAWC,EAAAA,EAAAA,QAAuB,MAClCC,GAAkBD,EAAAA,EAAAA,QAA0B,MAC5CE,GAAmBF,EAAAA,EAAAA,QAA0B,OAKnDG,EAAAA,EAAAA,WAAU,KACR,IAAKb,EAAQ,OAEb,MAAMc,EAAgBC,IACN,WAAVA,EAAEC,KAAqBV,GACzBE,KAKJ,OADAS,SAASC,iBAAiB,UAAWJ,GAC9B,IAAMG,SAASE,oBAAoB,UAAWL,IACpD,CAACd,EAAQM,EAAWE,KAKvBK,EAAAA,EAAAA,WAAU,KAAO,IAADO,EACd,IAAKpB,EAAQ,OAEb,MAAMqB,EAAQZ,EAASa,QACvB,IAAKD,EAAO,OAGW,QAAvBD,EAAAT,EAAgBW,eAAO,IAAAF,GAAvBA,EAAyBG,QAGzB,MAAMC,EAAoBH,EAAMI,iBAC9B,4EAGIC,EAAeF,EAAkB,GACjCG,EAAcH,EAAkBA,EAAkBI,OAAS,GAE3DC,EAAad,IACH,QAAVA,EAAEC,MAEFD,EAAEe,SAEAb,SAASc,gBAAkBL,IAC7BX,EAAEiB,iBACS,OAAXL,QAAW,IAAXA,GAAAA,EAAaJ,SAIXN,SAASc,gBAAkBJ,IAC7BZ,EAAEiB,iBACU,OAAZN,QAAY,IAAZA,GAAAA,EAAcH,WAMpB,OADAN,SAASC,iBAAiB,UAAWW,GAC9B,IAAMZ,SAASE,oBAAoB,UAAWU,IACpD,CAAC7B,IAKJ,MAAMiC,GAAsBC,EAAAA,EAAAA,aACzBnB,IACKA,EAAEoB,SAAWpB,EAAEqB,eAAkB9B,GACnCE,KAGJ,CAACF,EAAWE,IAMR6B,GAAgBH,EAAAA,EAAAA,aAAYI,UAC5BhC,SACEC,KACL,CAACD,EAAWC,IAEf,IAAKP,EAAQ,OAAO,KAEpB,MAAMuC,EACe,WAAnBlC,EACI,iDACA,oDAEN,OACEmC,EAAAA,EAAAA,KAAA,OACEC,UAAS,6EAAAC,OApHO,QAqHhBC,QAASV,EACTW,KAAK,SACL,aAAW,OACX,kBAAgB,cAChB,mBAAiB,oBAAmBC,UAEpCC,EAAAA,EAAAA,MAAA,OACEC,IAAKtC,EACLgC,UAAU,8EAA6EI,SAAA,EAGvFC,EAAAA,EAAAA,MAAA,OAAKL,UAAU,wCAAuCI,SAAA,EACpDC,EAAAA,EAAAA,MAAA,OAAKL,UAAU,0BAAyBI,SAAA,CAClB,WAAnBxC,IACCmC,EAAAA,EAAAA,KAACQ,EAAAA,EAAa,CAACP,UAAU,6BAA6BQ,KAAM,MAE9DT,EAAAA,EAAAA,KAAA,MAAIU,GAAG,cAAcT,UAAU,+BAA8BI,SAC1D5C,QAGLuC,EAAAA,EAAAA,KAAA,UACEG,QAASnC,EACT2C,SAAU7C,EACVmC,UAAU,mGACV,aAAW,cAAaI,UAExBL,EAAAA,EAAAA,KAACY,EAAAA,EAAC,CAACH,KAAM,WAKbT,EAAAA,EAAAA,KAAA,KAAGU,GAAG,oBAAoBT,UAAU,qBAAoBI,SACrD3C,KAIH4C,EAAAA,EAAAA,MAAA,OAAKL,UAAU,yBAAwBI,SAAA,EACrCL,EAAAA,EAAAA,KAAA,UACEO,IAAKpC,EACLgC,QAASnC,EACT2C,SAAU7C,EACVmC,UAAU,8OAA6OI,SAEtPzC,KAEHoC,EAAAA,EAAAA,KAAA,UACEO,IAAKnC,EACL+B,QAASN,EACTc,SAAU7C,EACVmC,UAAS,aAAAC,OAAeH,EAAkB,kMAAiMM,SAE1OvC,EAAY,gBAAkBH,Y,+BC5KpC,MAAMkD,EAAoBC,IAC/B,OAAQA,GACN,IAAK,QACH,MAAO,gBACT,IAAK,SACH,MAAO,cACT,IAAK,OACH,MAAO,eACT,QACE,MAAO,e,+BCNN,MAaDC,GAAeC,E,QAAAA,GAAiB,gBAbF,CAAC,CAAC,OAAQ,CAAEC,EAAG,gBAAiBzC,IAAK,Y,+BCAlE,MAgBD0C,GAASF,E,QAAAA,GAAiB,SAhBI,CAClC,CAAC,OAAQ,CAAEC,EAAG,mBAAoBzC,IAAK,WACvC,CAAC,SAAU,CAAE2C,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAK7C,IAAK,Y,+BCFzC,MAaD8C,GAAcN,E,QAAAA,GAAiB,eAbD,CAAC,CAAC,OAAQ,CAAEC,EAAG,iBAAkBzC,IAAK,Y,8FCAnE,MAiBD+C,GAASP,EAAAA,EAAAA,GAAiB,SAjBI,CAClC,CAAC,OAAQ,CAAEC,EAAG,WAAYzC,IAAK,WAC/B,CAAC,OAAQ,CAAEyC,EAAG,gBAAiBzC,IAAK,WACpC,CAAC,OAAQ,CAAEyC,EAAG,4CAA6CzC,IAAK,a,aCH3D,MAiBDgD,GAAUR,EAAAA,EAAAA,GAAiB,WAjBG,CAClC,CAAC,SAAU,CAAEG,GAAI,KAAMC,GAAI,KAAMC,EAAG,KAAM7C,IAAK,WAC/C,CAAC,OAAQ,CAAEyC,EAAG,YAAazC,IAAK,WAChC,CAAC,OAAQ,CAAEyC,EAAG,WAAYzC,IAAK,aCa3BiD,GAAQT,EAAAA,EAAAA,GAAiB,QAhBK,CAClC,CAAC,OAAQ,CAAEC,EAAG,cAAezC,IAAK,WAClC,CAAC,SAAU,CAAE2C,GAAI,KAAMC,GAAI,KAAMC,EAAG,KAAM7C,IAAK,a,kFCGjD,MAEMkD,GAAe,IAAIC,MAAOC,cAC1BC,EAAW,KACXC,EAAWJ,EAAe,GAsBnBK,EAAkDxE,IAGxD,IAFLyE,OAAQC,EACRC,UAAWC,GACZ5E,EAEC,MAAO6E,EAAaC,IAAkBC,EAAAA,EAAAA,UAAS,KACxCC,EAAeC,IAAoBF,EAAAA,EAAAA,UAAsB,KACzDG,EAAaC,IAAkBJ,EAAAA,EAAAA,WAAS,IACxCK,EAAaC,IAAkBN,EAAAA,EAAAA,WAAS,GACzCO,GAAmB3E,EAAAA,EAAAA,QAAuB,OAGzC4E,EAAYC,IAAiBT,EAAAA,EAAAA,UAA0B,CAC5DU,YAAa,EACbC,WAAY,EACZC,WAAY,EACZC,aAAa,EACbC,aAAa,EACbC,QAAS,CAAC,SAILC,EAAcC,IAAmBjB,EAAAA,EAAAA,UAA2B,OAC5DkB,EAAMC,IAAWnB,EAAAA,EAAAA,UAAiB,KAClCoB,EAAgBC,IAAqBrB,EAAAA,EAAAA,UAAmB,KACxDsB,EAAmBC,IAAwBvB,EAAAA,EAAAA,UAAmB,KAC9DwB,EAAYC,IAAiBzB,EAAAA,EAAAA,WAAS,IACtC0B,EAAYC,IAAiB3B,EAAAA,EAAAA,WAAS,IAGtCN,EAAQkC,IAAa5B,EAAAA,EAAAA,UAAkBL,GAAe,KACtDC,EAAWiC,IAAgB7B,EAAAA,EAAAA,UAAqBH,GAAkB,KAClEiC,EAAwBC,IAA6B/B,EAAAA,EAAAA,WAAS,IAG9DgC,EAAeC,IAAoBjC,EAAAA,EAAAA,WAAS,IAC5CkC,EAAOC,IAAYnC,EAAAA,EAAAA,UAAqB,CAAEoC,KAAM,KAAMhH,QAAS,KAKhEiH,GAAYjF,EAAAA,EAAAA,aAAY,CAACgF,EAA2BhH,KACxD+G,EAAS,CAAEC,OAAMhH,YACjBkH,WAAW,IAAMH,EAAS,CAAEC,KAAM,KAAMhH,QAAS,KApEjB,MAqE/B,IAKGmH,GAAyBnF,EAAAA,EAAAA,aAAYI,UAEzC,GAAKmC,GAAeA,EAAY7C,OAAS,GAAO+C,GAAkBA,EAAe/C,OAAS,EAGxF,OAFA8E,EAAUjC,QACVkC,EAAahC,GAIfkC,GAA0B,GAC1B,IACE,MAAOS,EAAYC,SAAuBC,QAAQC,IAAI,CACpDC,EAAAA,GAAIC,MAAMC,eACVF,EAAAA,GAAIC,MAAME,oBAEZnB,EAAUY,GACVX,EAAaY,EACf,CAAE,MAAOO,GACPX,EAAU,QAAS,uCACnBY,QAAQD,MAAM,kCAAmCA,EACnD,CAAC,QACCjB,GAA0B,EAC5B,GACC,CAACpC,EAAaE,EAAgBwC,KAKjCtG,EAAAA,EAAAA,WAAU,KACJ4D,GAAeA,EAAY7C,OAAS,GACtC8E,EAAUjC,GAERE,GAAkBA,EAAe/C,OAAS,GAC5C+E,EAAahC,IAEd,CAACF,EAAaE,IAKjB,MAAMqD,GAAW9F,EAAAA,EAAAA,aAAYI,MAC3B2F,EACAC,KAEAhD,GAAe,GACfE,GAAe,GAEf,IACE,MAAM+C,QAAiBT,EAAAA,GAAIU,MAAMC,uBAAuB,CACtDC,MAAO1D,GAAe,GACtB2D,WAAkB,OAANL,QAAM,IAANA,OAAM,EAANA,EAAQM,KACpBC,SAAgB,OAANP,QAAM,IAANA,OAAM,EAANA,EAAQhF,GAClBwF,MA9He,KAiIjB1D,EAAiBmD,EAASQ,OAE1B,MAAMC,EAAgBC,KAAKC,KAAKX,EAASzC,WAnIxB,IAqIjBH,EAAcwD,IACZ,MAAMC,EAAa,IAAID,EAAKlD,SAO5B,OAJIsC,EAASc,SAAWd,EAASe,YAAcjB,EAAU,GAAKe,EAAWpH,QACvEoH,EAAWG,KAAKhB,EAASe,YAGpB,CACL1D,YAAayC,EACbxC,WAAYmD,EACZlD,WAAYyC,EAASzC,WACrBC,YAAawC,EAASc,QACtBrD,YAAaqC,EAAU,EACvBpC,QAASmD,IAGf,CAAE,MAAOlB,GACHA,aAAiBsB,EAAAA,GACnBjC,EAAU,QAASW,EAAM5H,SAChB4H,aAAiBuB,EAAAA,GAC1BlC,EAAU,QAAS,gDACVW,aAAiBwB,EAAAA,GAC1BnC,EAAU,QAAS,sCAEnBA,EAAU,QAAS,iBAErBY,QAAQD,MAAM,gBAAiBA,GAC/B9C,EAAiB,GACnB,CAAC,QACCE,GAAe,EACjB,GACC,CAACN,EAAauC,IAKXoC,GAAerH,EAAAA,EAAAA,aAAY,KAC3BmD,EAAiB/D,SACnBkI,aAAanE,EAAiB/D,SAIhCiE,EAAc,CACZC,YAAa,EACbC,WAAY,EACZC,WAAY,EACZC,aAAa,EACbC,aAAa,EACbC,QAAS,CAAC,QAGZmC,EAAS,EAAG,OACX,CAACA,IAoBEyB,IAAiBvH,EAAAA,EAAAA,aAAY,KAC7BoD,EAAWK,aAAeL,EAAWE,YAAc,EAAIF,EAAWO,QAAQjE,QAC5EoG,EAAS1C,EAAWE,YAAc,EAAGF,EAAWO,QAAQP,EAAWE,YAAc,KAElF,CAACF,EAAY0C,IAKV0B,IAAiBxH,EAAAA,EAAAA,aAAY,KAC7BoD,EAAWE,YAAc,GAC3BwC,EAAS1C,EAAWE,YAAc,EAAGF,EAAWO,QAAQP,EAAWE,YAAc,KAElF,CAACF,EAAY0C,IAKV2B,IAAmBzH,EAAAA,EAAAA,aAAYI,UAA4B,IAADsH,EAC9D7D,EAAgB8D,GAChB5D,GAAiB,QAAT2D,EAAAC,EAAK7D,YAAI,IAAA4D,OAAA,EAATA,EAAWE,aAAc,IACjC3D,EAAkB0D,EAAKrF,OAAOuF,IAAIC,GAAKA,EAAE9G,KACzCmD,EAAqBwD,EAAKnF,UAAUqF,IAAIE,GAAKA,EAAE/G,KAGzB,IAAlBsB,EAAO5C,QAAqC,IAArB8C,EAAU9C,cAC7ByF,KAEP,CAAC7C,EAAO5C,OAAQ8C,EAAU9C,OAAQyF,IAwB/B6C,GAAe5H,UACnB,IAAKwD,EAAc,OAGnB,MAAMqE,EAtBwB,IAA1BjE,EAAetE,OACV,mCAGwB,IAA7BwE,EAAkBxE,OACb,sCAGLoE,IAASoE,SAASpE,GAAQ3B,GAAY+F,SAASpE,GAAQ1B,GACnD,wBAAN5B,OAA+B2B,EAAQ,SAAA3B,OAAQ4B,GAG1C,KAWP,GAAI6F,EACFhD,EAAU,QAASgD,OADrB,CAKA5D,GAAc,GAEd,UACQmB,EAAAA,GAAIC,MAAM0C,gBAAgBvE,EAAa5C,GAAI,CAC/CI,SAAUwC,EAAaxC,SACvBkF,KAAM1C,EAAa0C,KACnBxC,KAAMA,EAAOoE,SAASpE,QAAQsE,EAC9BC,SAAUrE,EACVsE,YAAapE,IAGfe,EAAU,UAAW,8BACrBpB,EAAgB,MAGhBiC,EAAS1C,EAAWE,YAAaF,EAAWO,QAAQP,EAAWE,aACjE,CAAE,MAAOsC,GACHA,aAAiBsB,EAAAA,GACnBjC,EAAU,QAASW,EAAM5H,SAChB4H,aAAiBuB,EAAAA,GAC1BlC,EAAU,QAAS,gDACVW,aAAiBwB,EAAAA,GAC1BnC,EAAU,QAAS,sCAEnBA,EAAU,QAAS,yBAErBY,QAAQD,MAAM,gBAAiBA,EACjC,CAAC,QACCvB,GAAc,EAChB,CA/BA,GAqCIkE,GAAenI,UACnB,GAAKwD,EAAL,CAEAW,GAAc,GAEd,UACQiB,EAAAA,GAAIC,MAAM+C,gBAAgB5E,EAAa5C,IAC7CiE,EAAU,UAAW,8BACrBpB,EAAgB,MAChBgB,GAAiB,GAGjBxB,EAAc,CACZC,YAAa,EACbC,WAAY,EACZC,WAAY,EACZC,aAAa,EACbC,aAAa,EACbC,QAAS,CAAC,QAEZmC,EAAS,EAAG,KACd,CAAE,MAAOF,GACHA,aAAiBsB,EAAAA,GACnBjC,EAAU,QAASW,EAAM5H,SAChB4H,aAAiBuB,EAAAA,GAC1BlC,EAAU,QAAS,gDACVW,aAAiBwB,EAAAA,GAC1BnC,EAAU,QAAS,sCAEnBA,EAAU,QAAS,yBAErBY,QAAQD,MAAM,gBAAiBA,GAC/Bf,GAAiB,EACnB,CAAC,QACCN,GAAc,EAChB,CAlCyB,GAwCrBkE,IAAezI,EAAAA,EAAAA,aAAY,KAC/B6D,EAAgB,MAChBE,EAAQ,IACRE,EAAkB,IAClBE,EAAqB,KACpB,IAoCH,OATAxF,EAAAA,EAAAA,WAAU,IACD,KACDwE,EAAiB/D,SACnBkI,aAAanE,EAAiB/D,UAGjC,IAGCwE,GAEAhD,EAAAA,EAAAA,MAAA,OAAKL,UAAU,YAAWI,SAAA,CAEvBmE,EAAME,OACLpE,EAAAA,EAAAA,MAAA,OACEL,UAAS,0CAAAC,OACQ,YAAfsE,EAAME,KACF,oEACA,+DAENtE,KAAK,QAAOC,SAAA,CAEI,YAAfmE,EAAME,MACL1E,EAAAA,EAAAA,KAACoI,EAAAA,EAAW,CAAC3H,KAAM,MAEnBT,EAAAA,EAAAA,KAACqI,EAAAA,EAAW,CAAC5H,KAAM,MAErBT,EAAAA,EAAAA,KAAA,QAAAK,SAAOmE,EAAM9G,cAIjB4C,EAAAA,EAAAA,MAAA,OAAKL,UAAU,oCAAmCI,SAAA,EAChDL,EAAAA,EAAAA,KAAA,MAAIC,UAAU,+BAA8BI,SAAC,uBAC7CL,EAAAA,EAAAA,KAAA,UACEG,QAASgI,GACTlI,UAAU,+EAA8EI,SACzF,uBAKHL,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2DAA0DI,SACtE+D,GACCpE,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iCAAgCI,SAAC,qCAIhDC,EAAAA,EAAAA,MAAAgI,EAAAA,SAAA,CAAAjI,SAAA,EACEC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,SAAOC,UAAU,mCAAkCI,SAAC,cACpDL,EAAAA,EAAAA,KAAA,OAAKC,UAAS,qBAAAC,QAAuBW,EAAAA,EAAAA,GAAiByC,EAAaxC,UAAS,4BAA2BT,SACpGiD,EAAaxC,eAIlBR,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,SAAOuI,QAAQ,YAAYtI,UAAU,mCAAkCI,SAAC,8BAGxEL,EAAAA,EAAAA,KAAA,SACEU,GAAG,YACHgE,KAAK,OACL8D,MAAOlF,EAAa0C,KACpBrF,UAAQ,EACRV,UAAU,qGAIdK,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,SAAOuI,QAAQ,YAAYtI,UAAU,mCAAkCI,SAAC,UAGxEL,EAAAA,EAAAA,KAAA,SACEU,GAAG,YACHgE,KAAK,SACL8D,MAAOhF,EACPiF,SAAWlK,GAAMkF,EAAQlF,EAAEoB,OAAO6I,OAClCE,YAAW,SAAAxI,OAAWwB,GACtBiH,IAAK9G,EACL+G,IAAK9G,EACL7B,UAAU,wHAIdK,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,SAAOL,UAAU,mCAAkCI,SAAA,CAAC,WACzCqD,EAAetE,OAAO,iBAEjCY,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gHAA+GI,SAC3H2B,EAAOuF,IAAKsB,IACXvI,EAAAA,EAAAA,MAAA,SAEEL,UAAU,0GAAyGI,SAAA,EAEnHL,EAAAA,EAAAA,KAAA,SACE0E,KAAK,WACLoE,QAASpF,EAAeqF,SAASF,EAAMnI,IACvC+H,SAAUA,KAAMO,OAvHjBC,EAuH6BJ,EAAMnI,QAtHtDiD,EAAkB4C,GAChBA,EAAKwC,SAASE,GACV1C,EAAK2C,OAAOxI,GAAMA,IAAOuI,GACzB,IAAI1C,EAAM0C,IAJGA,OAwHChJ,UAAU,oBAEZD,EAAAA,EAAAA,KAAA,QAAMC,UAAU,UAASI,SAAEwI,EAAM7C,SAT5B6C,EAAMnI,WAenBJ,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,SAAOL,UAAU,mCAAkCI,SAAA,CAAC,cACtCuD,EAAkBxE,OAAO,iBAEvCY,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gHAA+GI,SAC3H6B,EAAUqF,IAAK4B,IACd7I,EAAAA,EAAAA,MAAA,SAEEL,UAAU,0GAAyGI,SAAA,EAEnHL,EAAAA,EAAAA,KAAA,SACE0E,KAAK,WACLoE,QAASlF,EAAkBmF,SAASI,EAASzI,IAC7C+H,SAAUA,KAAMW,OAlIdC,EAkI6BF,EAASzI,QAjI5DmD,EAAqB0C,GACnBA,EAAKwC,SAASM,GACV9C,EAAK2C,OAAOxI,GAAMA,IAAO2I,GACzB,IAAI9C,EAAM8C,IAJMA,OAmIFpJ,UAAU,oBAEZD,EAAAA,EAAAA,KAAA,QAAMC,UAAU,UAASI,SAAE8I,EAASnD,SAT/BmD,EAASzI,WAetBJ,EAAAA,EAAAA,MAAA,OAAKL,UAAU,kCAAiCI,SAAA,EAC9CC,EAAAA,EAAAA,MAAA,UACEH,QAASA,IAAMoE,GAAiB,GAChC5D,SAAUqD,GAAcF,EACxB7D,UAAU,iKAAgKI,SAAA,EAE1KL,EAAAA,EAAAA,KAACsJ,EAAAA,EAAM,CAAC7I,KAAM,KACbuD,EAAa,cAAgB,kBAEhChE,EAAAA,EAAAA,KAAA,UACEG,QAASuH,GACT/G,SAAUmD,GAAcE,GAAcI,EACtCnE,UAAU,2IAA0II,SAEnJyD,EAAa,cAAgB,yBAOxC9D,EAAAA,EAAAA,KAAC1C,EAAAA,EAAY,CACXE,OAAQ8G,EACR7G,MAAM,oBACNC,QAAO,oCAAAwC,OAAsCoD,EAAa0C,KAAI,kFAC9DjI,UAAWkK,GACXjK,SAAUA,IAAMuG,GAAiB,SAQvCjE,EAAAA,EAAAA,MAAA,OAAKL,UAAU,YAAWI,SAAA,CAEvBmE,EAAME,OACLpE,EAAAA,EAAAA,MAAA,OACEL,UAAS,0CAAAC,OACQ,YAAfsE,EAAME,KACF,oEACA,+DAENtE,KAAK,QAAOC,SAAA,CAEI,YAAfmE,EAAME,MACL1E,EAAAA,EAAAA,KAACoI,EAAAA,EAAW,CAAC3H,KAAM,MAEnBT,EAAAA,EAAAA,KAACqI,EAAAA,EAAW,CAAC5H,KAAM,MAErBT,EAAAA,EAAAA,KAAA,QAAAK,SAAOmE,EAAM9G,cAIjBsC,EAAAA,EAAAA,KAAA,MAAIC,UAAU,+BAA8BI,SAAC,uBAG7CC,EAAAA,EAAAA,MAAA,OAAKL,UAAU,aAAYI,SAAA,EACzBL,EAAAA,EAAAA,KAAA,SACE0E,KAAK,OACL8D,MAAOpG,EACPqG,SAAWlK,IAAMgL,OAtXQf,EAsXgBjK,EAAEoB,OAAO6I,MArXxDnG,EAAemG,QAGX3F,EAAiB/D,SACnBkI,aAAanE,EAAiB/D,UALD0J,OAuXzBgB,WAAajL,GAAgB,UAAVA,EAAEC,MAAoBiE,GAAesE,IACxD2B,YAAY,gCACZzI,UAAU,kHACV,aAAW,wBAEbD,EAAAA,EAAAA,KAAA,UACEG,QAAS4G,EACTpG,SAAU8B,EACVxC,UAAU,mKACV,aAAW,SAAQI,UAEnBL,EAAAA,EAAAA,KAACkB,EAAAA,EAAM,CAACT,KAAM,UAKjBkC,IACC3C,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBI,SAC7BoC,GACCzC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iCAAgCI,SAAC,iBAGrB,IAAzBkC,EAAcnD,QAChBkB,EAAAA,EAAAA,MAAA,OAAKL,UAAU,mBAAkBI,SAAA,EAC/BL,EAAAA,EAAAA,KAAA,KAAGC,UAAU,qBAAoBI,SAAC,sBAClCL,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBAAuBI,SAAC,2CAKvCC,EAAAA,EAAAA,MAAAgI,EAAAA,SAAA,CAAAjI,SAAA,EACEC,EAAAA,EAAAA,MAAA,SAAOL,UAAU,SAASG,KAAK,QAAOC,SAAA,EACpCL,EAAAA,EAAAA,KAAA,SAAOC,UAAU,oCAAmCI,UAClDC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sBAAsBwJ,MAAM,MAAKpJ,SAAC,cAChDL,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sBAAsBwJ,MAAM,MAAKpJ,SAAC,UAChDL,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sBAAsBwJ,MAAM,MAAKpJ,SAAC,UAChDL,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sBAAsBwJ,MAAM,MAAKpJ,SAAC,YAChDL,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sBAAsBwJ,MAAM,MAAKpJ,SAAC,eAChDL,EAAAA,EAAAA,KAAA,MAAIC,UAAU,uBAAuBwJ,MAAM,MAAKpJ,SAAC,kBAGrDL,EAAAA,EAAAA,KAAA,SAAOC,UAAU,UAASI,SACvBkC,EAAcgF,IAAKF,IAClB/G,EAAAA,EAAAA,MAAA,MAAkBL,UAAU,+DAA8DI,SAAA,EACxFL,EAAAA,EAAAA,KAAA,MAAIC,UAAU,YAAWI,UACvBL,EAAAA,EAAAA,KAAA,QAAMC,UAAS,6BAAAC,QAA+BW,EAAAA,EAAAA,GAAiBwG,EAAKvG,UAAS,eAAcT,SACxFgH,EAAKvG,cAGVd,EAAAA,EAAAA,KAAA,MAAIC,UAAU,mCAAkCI,SAAEgH,EAAKrB,QACvDhG,EAAAA,EAAAA,KAAA,MAAIC,UAAU,0BAAyBI,SAAEgH,EAAK7D,MAAQ,OACtDxD,EAAAA,EAAAA,KAAA,MAAIC,UAAU,kCAAiCI,SAC5CgH,EAAKrF,OAAO5C,OAAS,EAAIiI,EAAKrF,OAAOuF,IAAIC,GAAKA,EAAExB,MAAM0D,KAAK,MAAQ,OAEtE1J,EAAAA,EAAAA,KAAA,MAAIC,UAAU,kCAAiCI,SAC5CgH,EAAKnF,UAAU9C,OAAS,EAAIiI,EAAKnF,UAAUqF,IAAIE,GAAKA,EAAEzB,MAAM0D,KAAK,MAAQ,OAE5E1J,EAAAA,EAAAA,KAAA,MAAIC,UAAU,uBAAsBI,UAClCL,EAAAA,EAAAA,KAAA,UACEG,QAASA,IAAMgH,GAAiBE,GAChCpH,UAAU,mGACV,qBAAAC,OAAoBmH,EAAKrB,MAAO3F,SACjC,eAnBIgH,EAAK3G,UA6BnBoC,EAAWG,WAAa,IACvB3C,EAAAA,EAAAA,MAAA,OAAKL,UAAU,8CAA8CG,KAAK,aAAa,aAAW,aAAYC,SAAA,EACpGC,EAAAA,EAAAA,MAAA,UACEH,QAAS+G,GACTvG,UAAWmC,EAAWM,aAAeX,EACrCxC,UAAU,uJACV,aAAW,gBAAeI,SAAA,EAE1BL,EAAAA,EAAAA,KAACsB,EAAAA,EAAW,CAACb,KAAM,KAAM,eAG3BH,EAAAA,EAAAA,MAAA,QAAML,UAAU,gBAAgB,YAAU,SAAQI,SAAA,CAAC,QAC3CyC,EAAWE,YAAc,EAAE,OAAKF,EAAWG,WAChDH,EAAWI,WAAa,IACvB5C,EAAAA,EAAAA,MAAA,QAAML,UAAU,6BAA4BI,SAAA,CAAC,IACzCyC,EAAWI,WAAW,iBAI9B5C,EAAAA,EAAAA,MAAA,UACEH,QAAS8G,GACTtG,UAAWmC,EAAWK,aAAeV,EACrCxC,UAAU,uJACV,aAAW,YAAWI,SAAA,CACvB,QAECL,EAAAA,EAAAA,KAACe,EAAAA,EAAY,CAACN,KAAM,iBAUhCkC,IACArC,EAAAA,EAAAA,MAAA,OAAKL,UAAU,kCAAiCI,SAAA,EAC9CL,EAAAA,EAAAA,KAACkB,EAAAA,EAAM,CAACT,KAAM,GAAIR,UAAU,6BAC5BD,EAAAA,EAAAA,KAAA,KAAGC,UAAU,eAAcI,SAAC,sCAC5BL,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBAAuBI,SAAC,yECrqBzCqB,GAAe,IAAIC,MAAOC,cAC1BC,EAAW,KACXC,EAAWJ,EAAe,GAqBnBiI,EAAuBA,KAElC,MAAOC,EAAWC,IAAgBvH,EAAAA,EAAAA,UAAkB,WAG7CN,EAAQkC,IAAa5B,EAAAA,EAAAA,UAAkB,KACvCJ,EAAWiC,IAAgB7B,EAAAA,EAAAA,UAAqB,KAChDwH,EAAeC,IAAoBzH,EAAAA,EAAAA,WAAS,IAG5CkC,EAAOC,IAAYnC,EAAAA,EAAAA,UAAqB,CAAEoC,KAAM,KAAMhH,QAAS,MAG/DoD,EAAUkJ,IAAe1H,EAAAA,EAAAA,UAAmB,UAC5C0D,EAAMiE,IAAW3H,EAAAA,EAAAA,UAAS,KAC1BkB,EAAMC,IAAWnB,EAAAA,EAAAA,UAAiB,KAClCoB,EAAgBC,IAAqBrB,EAAAA,EAAAA,UAAmB,KACxDsB,EAAmBC,IAAwBvB,EAAAA,EAAAA,UAAmB,KAC9D4H,EAAYC,IAAiB7H,EAAAA,EAAAA,WAAS,IAGtC8H,EAAMC,IAAW/H,EAAAA,EAAAA,UAAsB,OACvCgI,EAAWC,IAAgBjI,EAAAA,EAAAA,UAA2B,OACtDkI,EAAaC,IAAkBnI,EAAAA,EAAAA,WAAS,GACzCoI,GAAqBxM,EAAAA,EAAAA,QAA8B,MACnDyM,GAAezM,EAAAA,EAAAA,SAAO,IAErB0M,EAAgBC,IAAqBvI,EAAAA,EAAAA,UAA8B,CACxEwI,MAAM,EACNC,UAAW,EACXC,MAAO,EACPC,UAAW,EACXC,WAAY,EACZC,UAAW,EACXC,OAAQ,cAIV/M,EAAAA,EAAAA,WAAU,KACRwG,IAGO,KACD6F,EAAmB5L,UACrBuM,cAAcX,EAAmB5L,SACjC4L,EAAmB5L,QAAU,QAGhC,KAGHT,EAAAA,EAAAA,WAAU,KACR,MAAMC,EAAgBC,IACpB,GAAc,WAAVA,EAAEC,KAAoBoM,EAAeE,KAAM,CAC5B,CAAC,YAAa,SAAU,WAAW/B,SAAS6B,EAAeQ,SAE1EE,GAEJ,GAGF,GAAIV,EAAeE,KAEjB,OADArM,SAASC,iBAAiB,UAAWJ,GAC9B,IAAMG,SAASE,oBAAoB,UAAWL,IAEtD,CAACsM,EAAeE,KAAMF,EAAeQ,SAKxC,MAAMvG,EAAyB/E,UAC7BiK,GAAiB,GACjB,IACE,MAAOjF,EAAYC,SAAuBC,QAAQC,IAAI,CACpDC,EAAAA,GAAIC,MAAMC,eACVF,EAAAA,GAAIC,MAAME,oBAEZnB,EAAUY,GACVX,EAAaY,EACf,CAAE,MAAOO,GACPX,EAAU,QAAS,uCACnBY,QAAQD,MAAM,kCAAmCA,EACnD,CAAC,QACCyE,GAAiB,EACnB,GAMIpF,GAAYjF,EAAAA,EAAAA,aAAY,CAACgF,EAA2BhH,KACxD+G,EAAS,CAAEC,OAAMhH,YAEjBkH,WAAW,IAAMH,EAAS,CAAEC,KAAM,KAAMhH,QAAS,KADvB,YAATgH,EArHe,IACF,MAsH7B,IAuEG6G,GAAe7L,EAAAA,EAAAA,aAAY,KAC3BgL,EAAmB5L,UACrBuM,cAAcX,EAAmB5L,SACjC4L,EAAmB5L,QAAU,MAE/B6L,EAAa7L,SAAU,GACtB,IAKG0M,GAAa9L,EAAAA,EAAAA,aAAYI,UAE7B,IAAI6K,EAAa7L,QAAjB,CACA6L,EAAa7L,SAAU,EAEvB,IACE,MAAMsM,QAAelG,EAAAA,GAAIC,MAAMsG,aAAaC,GAC5CnB,EAAaa,GAGb,MAAMH,EAAYG,EAAOH,WAAa,EAChCC,EAAaE,EAAOF,YAAc,EAClCC,EAAYC,EAAOD,WAAa,EAChCJ,EAAYG,EAAaC,EACzBH,EAAQC,EAEdJ,EAAkBtE,IAAIoF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACjBpF,GAAI,IACPwE,YACAC,QACAC,YACAC,aACAC,YACAC,OAAQA,EAAOA,QAAU,aAIvB,CAAC,YAAa,SAAU,WAAWrC,SAASqC,EAAOA,QAAU,KAC/DG,GAEJ,CAAE,MAAOjG,GACPC,QAAQD,MAAM,2BAA4BA,EAE5C,CAAC,QACCqF,EAAa7L,SAAU,CACzB,CAjCgC,GAkC/B,CAACyM,IAiEED,GAAsB5L,EAAAA,EAAAA,aAAY,KACtC6L,IACAV,EAAkB,CAChBC,MAAM,EACNC,UAAW,EACXC,MAAO,EACPC,UAAW,EACXC,WAAY,EACZC,UAAW,EACXC,OAAQ,aAEVb,EAAa,MACbF,EAAQ,OACP,CAACkB,IA2BEK,EAAqBhB,EAAeI,MAAQ,EAC9C3E,KAAKsC,IAAKiC,EAAeG,UAAYH,EAAeI,MAAS,IAAK,KAClE,EAEJ,OACE1K,EAAAA,EAAAA,MAAA,OAAKL,UAAU,YAAWI,SAAA,CAEvBmE,EAAME,OACLpE,EAAAA,EAAAA,MAAA,OACEL,UAAS,0CAAAC,OACQ,YAAfsE,EAAME,KACF,oEACA,+DAENtE,KAAK,QAAOC,SAAA,CAEI,YAAfmE,EAAME,MACL1E,EAAAA,EAAAA,KAACoI,EAAAA,EAAW,CAAC3H,KAAM,MAEnBT,EAAAA,EAAAA,KAACqI,EAAAA,EAAW,CAAC5H,KAAM,MAErBT,EAAAA,EAAAA,KAAA,QAAAK,SAAOmE,EAAM9G,cAKjB4C,EAAAA,EAAAA,MAAA,OAAKL,UAAU,aAAaG,KAAK,UAASC,SAAA,EACxCL,EAAAA,EAAAA,KAAA,UACEI,KAAK,MACL,gBAA6B,WAAdwJ,EACf,gBAAc,eACdzJ,QAASA,IAAM0J,EAAa,UAC5B5J,UAAS,uCAAAC,OACO,WAAd0J,EACI,yBACA,+CACHvJ,SACJ,iBAGDL,EAAAA,EAAAA,KAAA,UACEI,KAAK,MACL,gBAA6B,WAAdwJ,EACf,gBAAc,eACdzJ,QAASA,IAAM0J,EAAa,UAC5B5J,UAAS,uCAAAC,OACO,WAAd0J,EACI,yBACA,+CACHvJ,SACJ,iBAGDL,EAAAA,EAAAA,KAAA,UACEI,KAAK,MACL,gBAA6B,WAAdwJ,EACf,gBAAc,eACdzJ,QAASA,IAAM0J,EAAa,UAC5B5J,UAAS,uCAAAC,OACO,WAAd0J,EACI,yBACA,+CACHvJ,SACJ,kBAMY,WAAduJ,IACC5J,EAAAA,EAAAA,KAAA,OAAKI,KAAK,WAAWM,GAAG,eAAcL,UACpCL,EAAAA,EAAAA,KAAC+B,EAAe,CAACC,OAAQA,EAAQE,UAAWA,MAKjC,WAAd0H,IACC5J,EAAAA,EAAAA,KAAA,OAAKI,KAAK,WAAWM,GAAG,eAAcL,UACpCL,EAAAA,EAAAA,KAAA,QACE6L,SAtRe/L,UACvBvB,EAAEiB,iBAGF,MAAMmI,EAtBD3B,EAAK8F,OAIN9F,EAAK8F,OAAO1M,OAAS,EAChB,qCAGLoE,IAASoE,SAASpE,GAAQ3B,GAAY+F,SAASpE,GAAQ1B,GACnD,wBAAN5B,OAA+B2B,EAAQ,SAAA3B,OAAQ4B,GAG1C,KAXE,mBAsBT,GAAI6F,EACFhD,EAAU,QAASgD,OADrB,CAKAwC,GAAc,GAEd,UACQjF,EAAAA,GAAIC,MAAM4G,gBAAgB,CAC9BjL,WACAkF,KAAMA,EAAK8F,OACXtI,KAAMA,EAAOoE,SAASpE,QAAQsE,EAC9BC,SAAUrE,EACVsE,YAAapE,IAGfe,EAAU,UAAW,oCAGrBsF,EAAQ,IACRxG,EAAQ,IACRE,EAAkB,IAClBE,EAAqB,GACvB,CAAE,MAAOyB,GACHA,aAAiBsB,EAAAA,GACnBjC,EAAU,QAASW,EAAM5H,SAChB4H,aAAiBuB,EAAAA,GAC1BlC,EAAU,QAAS,gDACVW,aAAiBwB,EAAAA,GAC1BnC,EAAU,QAAS,sCAEnBA,EAAU,QAAS,+BAErBY,QAAQD,MAAM,qBAAsBA,EACtC,CAAC,QACC6E,GAAc,EAChB,CAjCA,GA+QQlK,UAAU,2DAA0DI,SAEnEyJ,GACC9J,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iCAAgCI,SAAC,qCAIhDC,EAAAA,EAAAA,MAAAgI,EAAAA,SAAA,CAAAjI,SAAA,EACEC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,SAAOuI,QAAQ,WAAWtI,UAAU,mCAAkCI,SAAC,cAGvEC,EAAAA,EAAAA,MAAA,UACEI,GAAG,WACH8H,MAAO1H,EACP2H,SAAWlK,GAAMyL,EAAYzL,EAAEoB,OAAO6I,OACtCvI,UAAU,kHAAiHI,SAAA,EAE3HL,EAAAA,EAAAA,KAAA,UAAQwI,MAAM,QAAOnI,SAAC,WACtBL,EAAAA,EAAAA,KAAA,UAAQwI,MAAM,SAAQnI,SAAC,YACvBL,EAAAA,EAAAA,KAAA,UAAQwI,MAAM,OAAMnI,SAAC,gBAIzBC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,SAAOuI,QAAQ,OAAOtI,UAAU,mCAAkCI,SAAC,YAGnEL,EAAAA,EAAAA,KAAA,SACEU,GAAG,OACHgE,KAAK,OACL8D,MAAOxC,EACPyC,SAAWlK,GAAM0L,EAAQ1L,EAAEoB,OAAO6I,OAClCvI,UAAU,kHACV+L,UAAQ,EACRC,UAAW,EACXC,UAAW,UAIf5L,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,SAAOuI,QAAQ,OAAOtI,UAAU,mCAAkCI,SAAC,qBAGnEL,EAAAA,EAAAA,KAAA,SACEU,GAAG,OACHgE,KAAK,SACL8D,MAAOhF,EACPiF,SAAWlK,GAAMkF,EAAQlF,EAAEoB,OAAO6I,OAClCE,YAAW,SAAAxI,OAAWwB,GACtBiH,IAAK9G,EACL+G,IAAK9G,EACL7B,UAAU,wHAIdK,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,SAAOL,UAAU,mCAAkCI,SAAA,CAAC,WACzCqD,EAAetE,OAAO,iBAEjCY,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gHAA+GI,SAC3H2B,EAAOuF,IAAKsB,IACXvI,EAAAA,EAAAA,MAAA,SAEEL,UAAU,0GAAyGI,SAAA,EAEnHL,EAAAA,EAAAA,KAAA,SACE0E,KAAK,WACLoE,QAASpF,EAAeqF,SAASF,EAAMnI,IACvC+H,SAAUA,KAAMO,OA3KnBC,EA2K+BJ,EAAMnI,QA1KxDiD,EAAkB4C,GAChBA,EAAKwC,SAASE,GACV1C,EAAK2C,OAAOxI,GAAMA,IAAOuI,GACzB,IAAI1C,EAAM0C,IAJGA,OA4KGhJ,UAAU,oBAEZD,EAAAA,EAAAA,KAAA,QAAMC,UAAU,UAASI,SAAEwI,EAAM7C,SAT5B6C,EAAMnI,WAenBJ,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,SAAOL,UAAU,mCAAkCI,SAAA,CAAC,cACtCuD,EAAkBxE,OAAO,iBAEvCY,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gHAA+GI,SAC3H6B,EAAUqF,IAAK4B,IACd7I,EAAAA,EAAAA,MAAA,SAEEL,UAAU,0GAAyGI,SAAA,EAEnHL,EAAAA,EAAAA,KAAA,SACE0E,KAAK,WACLoE,QAASlF,EAAkBmF,SAASI,EAASzI,IAC7C+H,SAAUA,KAAMW,OAtLhBC,EAsL+BF,EAASzI,QArL9DmD,EAAqB0C,GACnBA,EAAKwC,SAASM,GACV9C,EAAK2C,OAAOxI,GAAMA,IAAO2I,GACzB,IAAI9C,EAAM8C,IAJMA,OAuLApJ,UAAU,oBAEZD,EAAAA,EAAAA,KAAA,QAAMC,UAAU,UAASI,SAAE8I,EAASnD,SAT/BmD,EAASzI,WAetBV,EAAAA,EAAAA,KAAA,UACE0E,KAAK,SACL/D,SAAUuJ,GAAcJ,EACxB7J,UAAU,6IAA4II,SAErJ6J,EAAa,cAAgB,6BAS3B,WAAdN,IACCtJ,EAAAA,EAAAA,MAAA,OAAKF,KAAK,WAAWM,GAAG,eAAeT,UAAU,2DAA0DI,SAAA,EACzGC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,SAAOuI,QAAQ,WAAWtI,UAAU,mCAAkCI,SAAC,qBAGvEL,EAAAA,EAAAA,KAAA,SACEU,GAAG,WACHgE,KAAK,OACLyH,OAAO,OACP1D,SAAWlK,IAAC,IAAA6N,EAAA,OAAK/B,GAAsB,QAAd+B,EAAA7N,EAAEoB,OAAO0M,aAAK,IAAAD,OAAA,EAAdA,EAAiB,KAAM,OAChDnM,UAAU,0RAEZK,EAAAA,EAAAA,MAAA,OAAKL,UAAU,iBAAgBI,SAAA,EAC7BL,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBAAuBI,SAAC,2FAGrCL,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBAAuBI,SAAC,6EAMzCC,EAAAA,EAAAA,MAAA,UACEH,QA9TcL,UACtB,GAAKsK,EAGL,GAAKA,EAAKpE,KAAKsG,SAAS,QAAxB,CAMAf,IACAd,GAAe,GAEf,IACE,MACM8B,SADiBrH,EAAAA,GAAIC,MAAMqH,UAAUpC,IACjBqC,cAE1BlC,EAAa,MACbM,EAAkB,CAChBC,MAAM,EACNC,UAAW,EACXC,MAAO,EACPC,UAAW,EACXC,WAAY,EACZC,UAAW,EACXC,OAAQ,mBAIJI,EAAWe,GACjB7B,EAAmB5L,QAAU4N,YAAY,IAAMlB,EAAWe,GAjRpC,IAkRxB,CAAE,MAAOjH,GACPuF,EAAkB,CAChBC,MAAM,EACNC,UAAW,EACXC,MAAO,EACPC,UAAW,EACXC,WAAY,EACZC,UAAW,EACXC,OAAQ,WAGN9F,aAAiBsB,EAAAA,GACnBjC,EAAU,QAASW,EAAM5H,SAChB4H,aAAiBuB,EAAAA,GAC1BlC,EAAU,QAAS,gDACVW,aAAiBwB,EAAAA,GAC1BnC,EAAU,QAAS,sCAEnBA,EAAU,QAAS,wBAErBY,QAAQD,MAAM,gBAAiBA,EACjC,CAAC,QACCmF,GAAe,EACjB,CA/CA,MAFE9F,EAAU,QAAS,mCA0TbhE,UAAWyJ,GAAQI,EACnBvK,UAAU,oLAAmLI,SAAA,EAE7LL,EAAAA,EAAAA,KAACuB,EAAM,CAACd,KAAM,KACb+J,EAAc,eAAiB,gBAGjCF,IAAcM,EAAeE,OAC5BxK,EAAAA,EAAAA,MAAA,OAAKL,UAAU,sDAAqDI,SAAA,EAClEL,EAAAA,EAAAA,KAAA,MAAIC,UAAU,8BAA6BI,SAAC,qBAC5CC,EAAAA,EAAAA,MAAA,OAAKL,UAAU,oBAAmBI,SAAA,EAChCC,EAAAA,EAAAA,MAAA,KAAGL,UAAU,gBAAeI,SAAA,CAAC,YACnBL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,yBAAwBI,SAAEiK,EAAUc,aAE9D9K,EAAAA,EAAAA,MAAA,KAAGL,UAAU,gBAAeI,SAAA,CAAC,UACrBL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,yBAAwBI,SAAEiK,EAAUW,WAAa,QAEzE3K,EAAAA,EAAAA,MAAA,KAAGL,UAAU,gBAAeI,SAAA,CAAC,aAClBL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,yBAAwBI,SAAEiK,EAAUY,YAAc,QAE7E5K,EAAAA,EAAAA,MAAA,KAAGL,UAAU,gBAAeI,SAAA,CAAC,aAClBL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,yBAAwBI,SAAEiK,EAAUa,WAAa,gBASrFP,EAAeE,OACd9K,EAAAA,EAAAA,KAAA,OACEC,UAAU,iFACVG,KAAK,SACL,aAAW,OACX,kBAAgB,uBAAsBC,UAEtCC,EAAAA,EAAAA,MAAA,OAAKL,UAAU,oEAAmEI,SAAA,EAChFC,EAAAA,EAAAA,MAAA,OAAKL,UAAU,yCAAwCI,SAAA,EACrDL,EAAAA,EAAAA,KAAA,MAAIU,GAAG,uBAAuBT,UAAU,+BAA8BI,SAAC,0BAGtE,CAAC,YAAa,SAAU,WAAW0I,SAAS6B,EAAeQ,UAC1DpL,EAAAA,EAAAA,KAAA,UACEG,QAASmL,EACTrL,UAAU,mDACV,aAAW,uBAAsBI,UAEjCL,EAAAA,EAAAA,KAACY,EAAAA,EAAC,CAACH,KAAM,WAKfH,EAAAA,EAAAA,MAAA,OAAKL,UAAU,YAAWI,SAAA,EAExBC,EAAAA,EAAAA,MAAA,OAAKL,UAAU,0BAAyBI,SAAA,CACX,cAA1BuK,EAAeQ,SACd9K,EAAAA,EAAAA,MAAAgI,EAAAA,SAAA,CAAAjI,SAAA,EACEL,EAAAA,EAAAA,KAACoI,EAAAA,EAAW,CAACnI,UAAU,iBAAiBQ,KAAM,MAC9CT,EAAAA,EAAAA,KAAA,QAAMC,UAAU,6BAA4BI,SAAC,iBAGtB,WAA1BuK,EAAeQ,SACd9K,EAAAA,EAAAA,MAAAgI,EAAAA,SAAA,CAAAjI,SAAA,EACEL,EAAAA,EAAAA,KAAC2M,EAAO,CAAC1M,UAAU,eAAeQ,KAAM,MACxCT,EAAAA,EAAAA,KAAA,QAAMC,UAAU,2BAA0BI,SAAC,cAG9C,CAAC,WAAY,UAAW,WAAW0I,SAAS6B,EAAeQ,UAC1D9K,EAAAA,EAAAA,MAAAgI,EAAAA,SAAA,CAAAjI,SAAA,EACEL,EAAAA,EAAAA,KAACyB,EAAK,CAACxB,UAAU,6BAA6BQ,KAAM,MACpDT,EAAAA,EAAAA,KAAA,QAAMC,UAAU,4BAA2BI,SAAC,qBAGrB,YAA1BuK,EAAeQ,SACd9K,EAAAA,EAAAA,MAAAgI,EAAAA,SAAA,CAAAjI,SAAA,EACEL,EAAAA,EAAAA,KAAC2M,EAAO,CAAC1M,UAAU,kBAAkBQ,KAAM,MAC3CT,EAAAA,EAAAA,KAAA,QAAMC,UAAU,8BAA6BI,SAAC,mBAMpDC,EAAAA,EAAAA,MAAA,OAAKL,UAAU,YAAWI,SAAA,EACxBL,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sDAAqDI,UAClEL,EAAAA,EAAAA,KAAA,OACEC,UAAS,qGAAAC,OACmB,cAA1B0K,EAAeQ,OACX,eAC0B,WAA1BR,EAAeQ,QAAiD,YAA1BR,EAAeQ,OACnD,aACA,eAERwB,MAAO,CACLC,MAAM,GAAD3M,OAAK0L,EAAkB,KAC5BkB,SAAUlB,EAAqB,EAAI,OAAS,KAC5CvL,SAEDuL,EAAqB,KACpBtL,EAAAA,EAAAA,MAAA,QAAML,UAAU,aAAYI,SAAA,CAAEgG,KAAK0G,MAAMnB,GAAoB,YAInEtL,EAAAA,EAAAA,MAAA,OAAKL,UAAU,6CAA4CI,SAAA,EACzDL,EAAAA,EAAAA,KAAA,QAAAK,SACGuK,EAAeK,UAAY,EAAC,aAAA/K,OACZ0K,EAAeG,UAAS,QAAA7K,OAAO0K,EAAeI,MAAK,UAChE,wBAELY,EAAqB,GAAKA,EAAqB,MAC9CtL,EAAAA,EAAAA,MAAA,QAAAD,SAAA,CAAOgG,KAAK0G,MAAMnB,GAAoB,cAMhB,cAA1BhB,EAAeQ,QACW,WAA1BR,EAAeQ,QACW,YAA1BR,EAAeQ,QACfR,EAAeK,UAAY,KAC3B3K,EAAAA,EAAAA,MAAA,OAAKL,UAAU,oCAAmCI,SAAA,EAChDL,EAAAA,EAAAA,KAAA,MAAIC,UAAU,8BAA6BI,SAAC,gBAC5CC,EAAAA,EAAAA,MAAA,OAAKL,UAAU,iCAAgCI,SAAA,EAC7CC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gBAAeI,SAAC,iBAChCL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,8BAA6BI,SAC1CuK,EAAeK,WAAa,QAGjC3K,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gBAAeI,SAAC,2BAChCL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,kCAAiCI,SAC9CuK,EAAeM,YAAc,QAGlC5K,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gBAAeI,SAAC,cAChCL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,mCAAkCI,SAC/CuK,EAAeO,WAAa,QAGjC7K,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gBAAeI,SAAC,gBAChCL,EAAAA,EAAAA,KAAA,QAAMC,UAAU,iCAAgCI,SAC7CuK,EAAeG,WAAa,UAIR,cAA1BH,EAAeQ,SACdpL,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qCAAoCI,UACjDC,EAAAA,EAAAA,MAAA,KAAGL,UAAU,6DAA4DI,SAAA,EACvEL,EAAAA,EAAAA,KAACoI,EAAAA,EAAW,CAAC3H,KAAM,KAAM,sCAKJ,WAA1BmK,EAAeQ,SACdpL,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qCAAoCI,UACjDC,EAAAA,EAAAA,MAAA,KAAGL,UAAU,2DAA0DI,SAAA,EACrEL,EAAAA,EAAAA,KAAC2M,EAAO,CAAClM,KAAM,KAAM,gF,+BCrtBtC,MAmBD6I,GAAStI,E,QAAAA,GAAiB,UAnBI,CAClC,CAAC,OAAQ,CAAEC,EAAG,WAAYzC,IAAK,WAC/B,CAAC,OAAQ,CAAEyC,EAAG,WAAYzC,IAAK,WAC/B,CAAC,OAAQ,CAAEyC,EAAG,2CAA4CzC,IAAK,WAC/D,CAAC,OAAQ,CAAEyC,EAAG,UAAWzC,IAAK,WAC9B,CAAC,OAAQ,CAAEyC,EAAG,yCAA0CzC,IAAK,Y","sources":["components/common/ConfirmModal.tsx","utils/categoryColors.ts","../node_modules/lucide-react/src/icons/chevron-right.ts","../node_modules/lucide-react/src/icons/search.ts","../node_modules/lucide-react/src/icons/chevron-left.ts","../node_modules/lucide-react/src/icons/upload.ts","../node_modules/lucide-react/src/icons/circle-x.ts","../node_modules/lucide-react/src/icons/clock.ts","components/admin/UpdateMediaItem.tsx","components/admin/AdminPanel.tsx","../node_modules/lucide-react/src/icons/trash-2.ts"],"sourcesContent":["import React, { useEffect, useRef, useCallback } from 'react';\r\nimport { AlertTriangle, X } from 'lucide-react';\r\n\r\n// Constants\r\nconst MODAL_Z_INDEX = 'z-50';\r\n\r\ninterface ConfirmModalProps {\r\n  isOpen: boolean;\r\n  title: string;\r\n  message: string;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  confirmVariant?: 'danger' | 'primary';\r\n  isLoading?: boolean;\r\n  onConfirm: () => void | Promise<void>;\r\n  onCancel: () => void;\r\n}\r\n\r\nexport const ConfirmModal: React.FC<ConfirmModalProps> = ({\r\n  isOpen,\r\n  title,\r\n  message,\r\n  confirmText = 'Confirm',\r\n  cancelText = 'Cancel',\r\n  confirmVariant = 'danger',\r\n  isLoading = false,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n  const cancelButtonRef = useRef<HTMLButtonElement>(null);\r\n  const confirmButtonRef = useRef<HTMLButtonElement>(null);\r\n\r\n  /**\r\n   * Handle escape key press\r\n   */\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && !isLoading) {\r\n        onCancel();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => document.removeEventListener('keydown', handleEscape);\r\n  }, [isOpen, isLoading, onCancel]);\r\n\r\n  /**\r\n   * Focus trap\r\n   */\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const modal = modalRef.current;\r\n    if (!modal) return;\r\n\r\n    // Focus first button\r\n    cancelButtonRef.current?.focus();\r\n\r\n    // Get all focusable elements\r\n    const focusableElements = modal.querySelectorAll<HTMLElement>(\r\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    );\r\n\r\n    const firstElement = focusableElements[0];\r\n    const lastElement = focusableElements[focusableElements.length - 1];\r\n\r\n    const handleTab = (e: KeyboardEvent) => {\r\n      if (e.key !== 'Tab') return;\r\n\r\n      if (e.shiftKey) {\r\n        // Shift + Tab\r\n        if (document.activeElement === firstElement) {\r\n          e.preventDefault();\r\n          lastElement?.focus();\r\n        }\r\n      } else {\r\n        // Tab\r\n        if (document.activeElement === lastElement) {\r\n          e.preventDefault();\r\n          firstElement?.focus();\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleTab);\r\n    return () => document.removeEventListener('keydown', handleTab);\r\n  }, [isOpen]);\r\n\r\n  /**\r\n   * Handle backdrop click\r\n   */\r\n  const handleBackdropClick = useCallback(\r\n    (e: React.MouseEvent) => {\r\n      if (e.target === e.currentTarget && !isLoading) {\r\n        onCancel();\r\n      }\r\n    },\r\n    [isLoading, onCancel]\r\n  );\r\n\r\n  /**\r\n   * Handle confirm with async support\r\n   */\r\n  const handleConfirm = useCallback(async () => {\r\n    if (isLoading) return;\r\n    await onConfirm();\r\n  }, [isLoading, onConfirm]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const confirmButtonClass =\r\n    confirmVariant === 'danger'\r\n      ? 'bg-red-600 hover:bg-red-700 focus:ring-red-500'\r\n      : 'bg-blue-600 hover:bg-blue-700 focus:ring-blue-500';\r\n\r\n  return (\r\n    <div\r\n      className={`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ${MODAL_Z_INDEX}`}\r\n      onClick={handleBackdropClick}\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby=\"modal-title\"\r\n      aria-describedby=\"modal-description\"\r\n    >\r\n      <div\r\n        ref={modalRef}\r\n        className=\"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700 shadow-xl\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-start justify-between mb-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            {confirmVariant === 'danger' && (\r\n              <AlertTriangle className=\"text-red-500 flex-shrink-0\" size={24} />\r\n            )}\r\n            <h3 id=\"modal-title\" className=\"text-xl font-bold text-white\">\r\n              {title}\r\n            </h3>\r\n          </div>\r\n          <button\r\n            onClick={onCancel}\r\n            disabled={isLoading}\r\n            className=\"text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            aria-label=\"Close modal\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Message */}\r\n        <p id=\"modal-description\" className=\"text-gray-300 mb-6\">\r\n          {message}\r\n        </p>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex gap-3 justify-end\">\r\n          <button\r\n            ref={cancelButtonRef}\r\n            onClick={onCancel}\r\n            disabled={isLoading}\r\n            className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800\"\r\n          >\r\n            {cancelText}\r\n          </button>\r\n          <button\r\n            ref={confirmButtonRef}\r\n            onClick={handleConfirm}\r\n            disabled={isLoading}\r\n            className={`px-4 py-2 ${confirmButtonClass} text-white rounded font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 min-w-[100px]`}\r\n          >\r\n            {isLoading ? 'Processing...' : confirmText}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","export const getCategoryColor = (category: string): string => {\r\n  switch (category) {\r\n    case 'MOVIE':\r\n      return 'bg-yellow-600';\r\n    case 'SERIES':\r\n      return 'bg-blue-600';\r\n    case 'GAME':\r\n      return 'bg-green-600';\r\n    default:\r\n      return 'bg-gray-600';\r\n  }\r\n};","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm9 18 6-6-6-6', key: 'mthhwq' }]];\n\n/**\n * @component @name ChevronRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtOSAxOCA2LTYtNi02IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/chevron-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronRight = createLucideIcon('chevron-right', __iconNode);\n\nexport default ChevronRight;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm21 21-4.34-4.34', key: '14j7rj' }],\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n];\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEgMjEtNC4zNC00LjM0IiAvPgogIDxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('search', __iconNode);\n\nexport default Search;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm15 18-6-6 6-6', key: '1wnfg3' }]];\n\n/**\n * @component @name ChevronLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTgtNi02IDYtNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronLeft = createLucideIcon('chevron-left', __iconNode);\n\nexport default ChevronLeft;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 3v12', key: '1x0j5s' }],\n  ['path', { d: 'm17 8-5-5-5 5', key: '7q97r8' }],\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n];\n\n/**\n * @component @name Upload\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgM3YxMiIgLz4KICA8cGF0aCBkPSJtMTcgOC01LTUtNSA1IiAvPgogIDxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Upload = createLucideIcon('upload', __iconNode);\n\nexport default Upload;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm15 9-6 6', key: '1uzhvr' }],\n  ['path', { d: 'm9 9 6 6', key: 'z0biqf' }],\n];\n\n/**\n * @component @name CircleX\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtMTUgOS02IDYiIC8+CiAgPHBhdGggZD0ibTkgOSA2IDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleX = createLucideIcon('circle-x', __iconNode);\n\nexport default CircleX;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 6v6l4 2', key: 'mmk7yg' }],\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n];\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNnY2bDQgMiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('clock', __iconNode);\n\nexport default Clock;\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { Search, Trash2, ChevronLeft, ChevronRight, AlertCircle, CheckCircle } from 'lucide-react';\r\nimport type { MediaItem, Genre, Platform } from '../../types';\r\nimport { api, ApiError, NetworkError, TimeoutError } from '../../api';\r\nimport { getCategoryColor } from '../../utils/categoryColors';\r\nimport { ConfirmModal } from '../common/ConfirmModal';\r\n\r\n// Constants\r\nconst ITEMS_PER_PAGE = 20;\r\nconst SUCCESS_MESSAGE_DURATION_MS = 3000;\r\nconst CURRENT_YEAR = new Date().getFullYear();\r\nconst MIN_YEAR = 1800;\r\nconst MAX_YEAR = CURRENT_YEAR + 10;\r\n\r\n// Types\r\ninterface UpdateMediaItemProps {\r\n  genres?: Genre[];\r\n  platforms?: Platform[];\r\n}\r\n\r\ninterface PaginationState {\r\n  currentPage: number;\r\n  totalPages: number;\r\n  totalCount: number;\r\n  hasNextPage: boolean;\r\n  hasPrevPage: boolean;\r\n  cursors: Array<{ name: string; id: number } | null>;\r\n}\r\n\r\ninterface AlertState {\r\n  type: 'success' | 'error' | null;\r\n  message: string;\r\n}\r\n\r\nexport const UpdateMediaItem: React.FC<UpdateMediaItemProps> = ({\r\n  genres: propsGenres,\r\n  platforms: propsPlatforms,\r\n}) => {\r\n  // Search state\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState<MediaItem[]>([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [hasSearched, setHasSearched] = useState(false);\r\n  const searchTimeoutRef = useRef<NodeJS.Timeout>(null);\r\n\r\n  // Pagination state\r\n  const [pagination, setPagination] = useState<PaginationState>({\r\n    currentPage: 0,\r\n    totalPages: 0,\r\n    totalCount: 0,\r\n    hasNextPage: false,\r\n    hasPrevPage: false,\r\n    cursors: [null],\r\n  });\r\n\r\n  // Edit state\r\n  const [selectedItem, setSelectedItem] = useState<MediaItem | null>(null);\r\n  const [year, setYear] = useState<string>('');\r\n  const [selectedGenres, setSelectedGenres] = useState<number[]>([]);\r\n  const [selectedPlatforms, setSelectedPlatforms] = useState<number[]>([]);\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  // Reference data\r\n  const [genres, setGenres] = useState<Genre[]>(propsGenres || []);\r\n  const [platforms, setPlatforms] = useState<Platform[]>(propsPlatforms || []);\r\n  const [isLoadingReferenceData, setIsLoadingReferenceData] = useState(false);\r\n\r\n  // UI state\r\n  const [deleteConfirm, setDeleteConfirm] = useState(false);\r\n  const [alert, setAlert] = useState<AlertState>({ type: null, message: '' });\r\n\r\n  /**\r\n   * Show alert with auto-dismiss\r\n   */\r\n  const showAlert = useCallback((type: 'success' | 'error', message: string) => {\r\n    setAlert({ type, message });\r\n    setTimeout(() => setAlert({ type: null, message: '' }), SUCCESS_MESSAGE_DURATION_MS);\r\n  }, []);\r\n\r\n  /**\r\n   * Load genres and platforms if not provided via props\r\n   */\r\n  const loadGenresAndPlatforms = useCallback(async () => {\r\n    // If we already have data from props, don't reload\r\n    if ((propsGenres && propsGenres.length > 0) && (propsPlatforms && propsPlatforms.length > 0)) {\r\n      setGenres(propsGenres);\r\n      setPlatforms(propsPlatforms);\r\n      return;\r\n    }\r\n\r\n    setIsLoadingReferenceData(true);\r\n    try {\r\n      const [genresData, platformsData] = await Promise.all([\r\n        api.admin.getAllGenres(),\r\n        api.admin.getAllPlatforms(),\r\n      ]);\r\n      setGenres(genresData);\r\n      setPlatforms(platformsData);\r\n    } catch (error) {\r\n      showAlert('error', 'Failed to load genres and platforms');\r\n      console.error('Failed to load genres/platforms', error);\r\n    } finally {\r\n      setIsLoadingReferenceData(false);\r\n    }\r\n  }, [propsGenres, propsPlatforms, showAlert]);\r\n\r\n  /**\r\n   * Update genres/platforms when props change\r\n   */\r\n  useEffect(() => {\r\n    if (propsGenres && propsGenres.length > 0) {\r\n      setGenres(propsGenres);\r\n    }\r\n    if (propsPlatforms && propsPlatforms.length > 0) {\r\n      setPlatforms(propsPlatforms);\r\n    }\r\n  }, [propsGenres, propsPlatforms]);\r\n\r\n  /**\r\n   * Load search results page\r\n   */\r\n  const loadPage = useCallback(async (\r\n    pageNum: number,\r\n    cursor: { name: string; id: number } | null\r\n  ) => {\r\n    setIsSearching(true);\r\n    setHasSearched(true);\r\n\r\n    try {\r\n      const response = await api.media.searchMediaItemsCursor({\r\n        query: searchQuery || '',\r\n        cursorName: cursor?.name,\r\n        cursorId: cursor?.id,\r\n        limit: ITEMS_PER_PAGE,\r\n      });\r\n\r\n      setSearchResults(response.items);\r\n\r\n      const newTotalPages = Math.ceil(response.totalCount / ITEMS_PER_PAGE);\r\n\r\n      setPagination(prev => {\r\n        const newCursors = [...prev.cursors];\r\n        \r\n        // Store next cursor if available\r\n        if (response.hasMore && response.nextCursor && pageNum + 1 >= newCursors.length) {\r\n          newCursors.push(response.nextCursor);\r\n        }\r\n\r\n        return {\r\n          currentPage: pageNum,\r\n          totalPages: newTotalPages,\r\n          totalCount: response.totalCount,\r\n          hasNextPage: response.hasMore,\r\n          hasPrevPage: pageNum > 0,\r\n          cursors: newCursors,\r\n        };\r\n      });\r\n    } catch (error) {\r\n      if (error instanceof ApiError) {\r\n        showAlert('error', error.message);\r\n      } else if (error instanceof NetworkError) {\r\n        showAlert('error', 'Network error. Please check your connection.');\r\n      } else if (error instanceof TimeoutError) {\r\n        showAlert('error', 'Request timeout. Please try again.');\r\n      } else {\r\n        showAlert('error', 'Search failed');\r\n      }\r\n      console.error('Search failed', error);\r\n      setSearchResults([]);\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  }, [searchQuery, showAlert]);\r\n\r\n  /**\r\n   * Handle search with debouncing\r\n   */\r\n  const handleSearch = useCallback(() => {\r\n    if (searchTimeoutRef.current) {\r\n      clearTimeout(searchTimeoutRef.current);\r\n    }\r\n\r\n    // Reset pagination state\r\n    setPagination({\r\n      currentPage: 0,\r\n      totalPages: 0,\r\n      totalCount: 0,\r\n      hasNextPage: false,\r\n      hasPrevPage: false,\r\n      cursors: [null],\r\n    });\r\n\r\n    loadPage(0, null);\r\n  }, [loadPage]);\r\n\r\n  /**\r\n   * Handle debounced search input\r\n   */\r\n  const handleSearchInputChange = (value: string) => {\r\n    setSearchQuery(value);\r\n    \r\n    // Clear existing timeout\r\n    if (searchTimeoutRef.current) {\r\n      clearTimeout(searchTimeoutRef.current);\r\n    }\r\n\r\n    // Don't auto-search on every keystroke for this use case\r\n    // User should explicitly click search or press Enter\r\n  };\r\n\r\n  /**\r\n   * Handle next page\r\n   */\r\n  const handleNextPage = useCallback(() => {\r\n    if (pagination.hasNextPage && pagination.currentPage + 1 < pagination.cursors.length) {\r\n      loadPage(pagination.currentPage + 1, pagination.cursors[pagination.currentPage + 1]);\r\n    }\r\n  }, [pagination, loadPage]);\r\n\r\n  /**\r\n   * Handle previous page\r\n   */\r\n  const handlePrevPage = useCallback(() => {\r\n    if (pagination.currentPage > 0) {\r\n      loadPage(pagination.currentPage - 1, pagination.cursors[pagination.currentPage - 1]);\r\n    }\r\n  }, [pagination, loadPage]);\r\n\r\n  /**\r\n   * Choose item for editing\r\n   */\r\n  const handleChooseItem = useCallback(async (item: MediaItem) => {\r\n    setSelectedItem(item);\r\n    setYear(item.year?.toString() || '');\r\n    setSelectedGenres(item.genres.map(g => g.id));\r\n    setSelectedPlatforms(item.platforms.map(p => p.id));\r\n    \r\n    // Load reference data if not already loaded\r\n    if (genres.length === 0 || platforms.length === 0) {\r\n      await loadGenresAndPlatforms();\r\n    }\r\n  }, [genres.length, platforms.length, loadGenresAndPlatforms]);\r\n\r\n  /**\r\n   * Validate update form\r\n   */\r\n  const validateUpdateForm = (): string | null => {\r\n    if (selectedGenres.length === 0) {\r\n      return 'Please select at least one genre';\r\n    }\r\n\r\n    if (selectedPlatforms.length === 0) {\r\n      return 'Please select at least one platform';\r\n    }\r\n\r\n    if (year && (parseInt(year) < MIN_YEAR || parseInt(year) > MAX_YEAR)) {\r\n      return `Year must be between ${MIN_YEAR} and ${MAX_YEAR}`;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  /**\r\n   * Handle update item\r\n   */\r\n  const handleUpdate = async () => {\r\n    if (!selectedItem) return;\r\n\r\n    // Validate form\r\n    const validationError = validateUpdateForm();\r\n    if (validationError) {\r\n      showAlert('error', validationError);\r\n      return;\r\n    }\r\n\r\n    setIsUpdating(true);\r\n\r\n    try {\r\n      await api.admin.updateMediaItem(selectedItem.id, {\r\n        category: selectedItem.category,\r\n        name: selectedItem.name,\r\n        year: year ? parseInt(year) : undefined,\r\n        genreIds: selectedGenres,\r\n        platformIds: selectedPlatforms,\r\n      });\r\n\r\n      showAlert('success', 'Item updated successfully!');\r\n      setSelectedItem(null);\r\n      \r\n      // Reload current page to show updated data\r\n      loadPage(pagination.currentPage, pagination.cursors[pagination.currentPage]);\r\n    } catch (error) {\r\n      if (error instanceof ApiError) {\r\n        showAlert('error', error.message);\r\n      } else if (error instanceof NetworkError) {\r\n        showAlert('error', 'Network error. Please check your connection.');\r\n      } else if (error instanceof TimeoutError) {\r\n        showAlert('error', 'Request timeout. Please try again.');\r\n      } else {\r\n        showAlert('error', 'Failed to update item');\r\n      }\r\n      console.error('Update error:', error);\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle delete item\r\n   */\r\n  const handleDelete = async () => {\r\n    if (!selectedItem) return;\r\n\r\n    setIsDeleting(true);\r\n\r\n    try {\r\n      await api.admin.deleteMediaItem(selectedItem.id);\r\n      showAlert('success', 'Item deleted successfully!');\r\n      setSelectedItem(null);\r\n      setDeleteConfirm(false);\r\n      \r\n      // Reset to first page after deletion\r\n      setPagination({\r\n        currentPage: 0,\r\n        totalPages: 0,\r\n        totalCount: 0,\r\n        hasNextPage: false,\r\n        hasPrevPage: false,\r\n        cursors: [null],\r\n      });\r\n      loadPage(0, null);\r\n    } catch (error) {\r\n      if (error instanceof ApiError) {\r\n        showAlert('error', error.message);\r\n      } else if (error instanceof NetworkError) {\r\n        showAlert('error', 'Network error. Please check your connection.');\r\n      } else if (error instanceof TimeoutError) {\r\n        showAlert('error', 'Request timeout. Please try again.');\r\n      } else {\r\n        showAlert('error', 'Failed to delete item');\r\n      }\r\n      console.error('Delete error:', error);\r\n      setDeleteConfirm(false);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle cancel editing\r\n   */\r\n  const handleCancel = useCallback(() => {\r\n    setSelectedItem(null);\r\n    setYear('');\r\n    setSelectedGenres([]);\r\n    setSelectedPlatforms([]);\r\n  }, []);\r\n\r\n  /**\r\n   * Toggle genre selection\r\n   */\r\n  const toggleGenre = (genreId: number) => {\r\n    setSelectedGenres(prev =>\r\n      prev.includes(genreId)\r\n        ? prev.filter(id => id !== genreId)\r\n        : [...prev, genreId]\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Toggle platform selection\r\n   */\r\n  const togglePlatform = (platformId: number) => {\r\n    setSelectedPlatforms(prev =>\r\n      prev.includes(platformId)\r\n        ? prev.filter(id => id !== platformId)\r\n        : [...prev, platformId]\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Cleanup on unmount\r\n   */\r\n  useEffect(() => {\r\n    return () => {\r\n      if (searchTimeoutRef.current) {\r\n        clearTimeout(searchTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Edit view\r\n  if (selectedItem) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {/* Alert Messages */}\r\n        {alert.type && (\r\n          <div\r\n            className={`p-4 rounded-lg flex items-center gap-3 ${\r\n              alert.type === 'success'\r\n                ? 'bg-green-900 bg-opacity-20 border border-green-700 text-green-400'\r\n                : 'bg-red-900 bg-opacity-20 border border-red-700 text-red-400'\r\n            }`}\r\n            role=\"alert\"\r\n          >\r\n            {alert.type === 'success' ? (\r\n              <CheckCircle size={20} />\r\n            ) : (\r\n              <AlertCircle size={20} />\r\n            )}\r\n            <span>{alert.message}</span>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex items-center justify-between\">\r\n          <h3 className=\"text-xl font-bold text-white\">Update Media Item</h3>\r\n          <button\r\n            onClick={handleCancel}\r\n            className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors\"\r\n          >\r\n            Back to Search\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"bg-gray-800 p-6 rounded border border-gray-700 space-y-4\">\r\n          {isLoadingReferenceData ? (\r\n            <div className=\"text-center py-8 text-gray-400\">\r\n              Loading genres and platforms...\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div>\r\n                <label className=\"block text-sm text-gray-300 mb-2\">Category</label>\r\n                <div className={`px-3 py-2 rounded ${getCategoryColor(selectedItem.category)} text-white inline-block`}>\r\n                  {selectedItem.category}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"item-name\" className=\"block text-sm text-gray-300 mb-2\">\r\n                  Name (Cannot be changed)\r\n                </label>\r\n                <input\r\n                  id=\"item-name\"\r\n                  type=\"text\"\r\n                  value={selectedItem.name}\r\n                  disabled\r\n                  className=\"w-full px-3 py-2 bg-gray-600 text-gray-400 rounded border border-gray-600 cursor-not-allowed\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"item-year\" className=\"block text-sm text-gray-300 mb-2\">\r\n                  Year\r\n                </label>\r\n                <input\r\n                  id=\"item-year\"\r\n                  type=\"number\"\r\n                  value={year}\r\n                  onChange={(e) => setYear(e.target.value)}\r\n                  placeholder={`e.g., ${CURRENT_YEAR}`}\r\n                  min={MIN_YEAR}\r\n                  max={MAX_YEAR}\r\n                  className=\"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm text-gray-300 mb-2\">\r\n                  Genres ({selectedGenres.length} selected)\r\n                </label>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600\">\r\n                  {genres.map((genre) => (\r\n                    <label\r\n                      key={genre.id}\r\n                      className=\"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors\"\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedGenres.includes(genre.id)}\r\n                        onChange={() => toggleGenre(genre.id)}\r\n                        className=\"cursor-pointer\"\r\n                      />\r\n                      <span className=\"text-sm\">{genre.name}</span>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm text-gray-300 mb-2\">\r\n                  Platforms ({selectedPlatforms.length} selected)\r\n                </label>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600\">\r\n                  {platforms.map((platform) => (\r\n                    <label\r\n                      key={platform.id}\r\n                      className=\"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors\"\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedPlatforms.includes(platform.id)}\r\n                        onChange={() => togglePlatform(platform.id)}\r\n                        className=\"cursor-pointer\"\r\n                      />\r\n                      <span className=\"text-sm\">{platform.name}</span>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-3 justify-between pt-4\">\r\n                <button\r\n                  onClick={() => setDeleteConfirm(true)}\r\n                  disabled={isDeleting || isUpdating}\r\n                  className=\"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  <Trash2 size={18} />\r\n                  {isDeleting ? 'Deleting...' : 'Delete Item'}\r\n                </button>\r\n                <button\r\n                  onClick={handleUpdate}\r\n                  disabled={isUpdating || isDeleting || isLoadingReferenceData}\r\n                  className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  {isUpdating ? 'Updating...' : 'Update Item'}\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <ConfirmModal\r\n          isOpen={deleteConfirm}\r\n          title=\"Delete Media Item\"\r\n          message={`Are you sure you want to delete \"${selectedItem.name}\"? This action cannot be undone and will remove this item from all user lists.`}\r\n          onConfirm={handleDelete}\r\n          onCancel={() => setDeleteConfirm(false)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Search view\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Alert Messages */}\r\n      {alert.type && (\r\n        <div\r\n          className={`p-4 rounded-lg flex items-center gap-3 ${\r\n            alert.type === 'success'\r\n              ? 'bg-green-900 bg-opacity-20 border border-green-700 text-green-400'\r\n              : 'bg-red-900 bg-opacity-20 border border-red-700 text-red-400'\r\n          }`}\r\n          role=\"alert\"\r\n        >\r\n          {alert.type === 'success' ? (\r\n            <CheckCircle size={20} />\r\n          ) : (\r\n            <AlertCircle size={20} />\r\n          )}\r\n          <span>{alert.message}</span>\r\n        </div>\r\n      )}\r\n\r\n      <h3 className=\"text-xl font-bold text-white\">Update Media Item</h3>\r\n\r\n      {/* Search Bar */}\r\n      <div className=\"flex gap-2\">\r\n        <input\r\n          type=\"text\"\r\n          value={searchQuery}\r\n          onChange={(e) => handleSearchInputChange(e.target.value)}\r\n          onKeyPress={(e) => e.key === 'Enter' && !isSearching && handleSearch()}\r\n          placeholder=\"Search for items to update...\"\r\n          className=\"flex-1 px-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none\"\r\n          aria-label=\"Search media items\"\r\n        />\r\n        <button\r\n          onClick={handleSearch}\r\n          disabled={isSearching}\r\n          className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors\"\r\n          aria-label=\"Search\"\r\n        >\r\n          <Search size={20} />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search Results */}\r\n      {hasSearched && (\r\n        <div className=\"overflow-x-auto\">\r\n          {isSearching ? (\r\n            <div className=\"text-center py-8 text-gray-400\">\r\n              Searching...\r\n            </div>\r\n          ) : searchResults.length === 0 ? (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-400 mb-2\">No results found</p>\r\n              <p className=\"text-sm text-gray-500\">\r\n                Try searching for a different term\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <table className=\"w-full\" role=\"table\">\r\n                <thead className=\"bg-gray-700 text-gray-300 text-sm\">\r\n                  <tr>\r\n                    <th className=\"px-4 py-3 text-left\" scope=\"col\">Category</th>\r\n                    <th className=\"px-4 py-3 text-left\" scope=\"col\">Name</th>\r\n                    <th className=\"px-4 py-3 text-left\" scope=\"col\">Year</th>\r\n                    <th className=\"px-4 py-3 text-left\" scope=\"col\">Genres</th>\r\n                    <th className=\"px-4 py-3 text-left\" scope=\"col\">Platforms</th>\r\n                    <th className=\"px-4 py-3 text-right\" scope=\"col\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"text-sm\">\r\n                  {searchResults.map((item) => (\r\n                    <tr key={item.id} className=\"border-b border-gray-700 hover:bg-gray-800 transition-colors\">\r\n                      <td className=\"px-4 py-3\">\r\n                        <span className={`px-2 py-1 rounded text-xs ${getCategoryColor(item.category)} text-white`}>\r\n                          {item.category}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-white font-medium\">{item.name}</td>\r\n                      <td className=\"px-4 py-3 text-gray-300\">{item.year || '-'}</td>\r\n                      <td className=\"px-4 py-3 text-gray-300 text-sm\">\r\n                        {item.genres.length > 0 ? item.genres.map(g => g.name).join(', ') : '-'}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-gray-300 text-sm\">\r\n                        {item.platforms.length > 0 ? item.platforms.map(p => p.name).join(', ') : '-'}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-right\">\r\n                        <button\r\n                          onClick={() => handleChooseItem(item)}\r\n                          className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-medium transition-colors\"\r\n                          aria-label={`Edit ${item.name}`}\r\n                        >\r\n                          Choose\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n\r\n              {/* Pagination */}\r\n              {pagination.totalPages > 1 && (\r\n                <div className=\"flex items-center justify-center gap-4 mt-4\" role=\"navigation\" aria-label=\"Pagination\">\r\n                  <button\r\n                    onClick={handlePrevPage}\r\n                    disabled={!pagination.hasPrevPage || isSearching}\r\n                    className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors\"\r\n                    aria-label=\"Previous page\"\r\n                  >\r\n                    <ChevronLeft size={20} />\r\n                    Previous\r\n                  </button>\r\n                  <span className=\"text-gray-300\" aria-live=\"polite\">\r\n                    Page {pagination.currentPage + 1} of {pagination.totalPages}\r\n                    {pagination.totalCount > 0 && (\r\n                      <span className=\"text-xs text-gray-400 ml-2\">\r\n                        ({pagination.totalCount} items)\r\n                      </span>\r\n                    )}\r\n                  </span>\r\n                  <button\r\n                    onClick={handleNextPage}\r\n                    disabled={!pagination.hasNextPage || isSearching}\r\n                    className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors\"\r\n                    aria-label=\"Next page\"\r\n                  >\r\n                    Next\r\n                    <ChevronRight size={20} />\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Initial State Message */}\r\n      {!hasSearched && (\r\n        <div className=\"text-center py-12 text-gray-400\">\r\n          <Search size={48} className=\"mx-auto mb-4 opacity-50\" />\r\n          <p className=\"text-lg mb-2\">Search for media items to update</p>\r\n          <p className=\"text-sm text-gray-500\">\r\n            Enter a search term and click the search button to find items\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { Upload, X, CheckCircle, XCircle, Clock, AlertCircle } from 'lucide-react';\r\nimport type { Genre, Platform } from '../../types';\r\nimport { api, ApiError, NetworkError, TimeoutError, JobStatus } from '../../api';\r\nimport { UpdateMediaItem } from './UpdateMediaItem';\r\n\r\n// Constants\r\nconst POLLING_INTERVAL_MS = 1000;\r\nconst SUCCESS_MESSAGE_DURATION_MS = 3000;\r\nconst ERROR_MESSAGE_DURATION_MS = 5000;\r\nconst CURRENT_YEAR = new Date().getFullYear();\r\nconst MIN_YEAR = 1800;\r\nconst MAX_YEAR = CURRENT_YEAR + 10;\r\n\r\n// Types\r\ntype TabType = 'create' | 'upload' | 'update';\r\ntype Category = 'MOVIE' | 'SERIES' | 'GAME';\r\n\r\ninterface UploadProgressState {\r\n  show: boolean;\r\n  processed: number;\r\n  total: number;\r\n  readCount: number;\r\n  writeCount: number;\r\n  skipCount: number;\r\n  status: string;\r\n}\r\n\r\ninterface AlertState {\r\n  type: 'success' | 'error' | null;\r\n  message: string;\r\n}\r\n\r\nexport const AdminPanel: React.FC = () => {\r\n  // Tab state\r\n  const [activeTab, setActiveTab] = useState<TabType>('create');\r\n  \r\n  // Reference data\r\n  const [genres, setGenres] = useState<Genre[]>([]);\r\n  const [platforms, setPlatforms] = useState<Platform[]>([]);\r\n  const [isLoadingData, setIsLoadingData] = useState(true);\r\n  \r\n  // Alert state\r\n  const [alert, setAlert] = useState<AlertState>({ type: null, message: '' });\r\n  \r\n  // Create form state\r\n  const [category, setCategory] = useState<Category>('MOVIE');\r\n  const [name, setName] = useState('');\r\n  const [year, setYear] = useState<string>('');\r\n  const [selectedGenres, setSelectedGenres] = useState<number[]>([]);\r\n  const [selectedPlatforms, setSelectedPlatforms] = useState<number[]>([]);\r\n  const [isCreating, setIsCreating] = useState(false);\r\n  \r\n  // CSV upload state\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [jobStatus, setJobStatus] = useState<JobStatus | null>(null);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const pollingIntervalRef = useRef<NodeJS.Timeout | null>(null);\r\n  const isPollingRef = useRef(false);\r\n\r\n  const [uploadProgress, setUploadProgress] = useState<UploadProgressState>({\r\n    show: false,\r\n    processed: 0,\r\n    total: 0,\r\n    readCount: 0,\r\n    writeCount: 0,\r\n    skipCount: 0,\r\n    status: 'STARTING',\r\n  });\r\n\r\n  // Load genres and platforms on mount\r\n  useEffect(() => {\r\n    loadGenresAndPlatforms();\r\n    \r\n    // Cleanup polling on unmount\r\n    return () => {\r\n      if (pollingIntervalRef.current) {\r\n        clearInterval(pollingIntervalRef.current);\r\n        pollingIntervalRef.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Handle keyboard events for modal\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && uploadProgress.show) {\r\n        const canClose = ['COMPLETED', 'FAILED', 'STOPPED'].includes(uploadProgress.status);\r\n        if (canClose) {\r\n          handleCloseProgress();\r\n        }\r\n      }\r\n    };\r\n\r\n    if (uploadProgress.show) {\r\n      document.addEventListener('keydown', handleEscape);\r\n      return () => document.removeEventListener('keydown', handleEscape);\r\n    }\r\n  }, [uploadProgress.show, uploadProgress.status]);\r\n\r\n  /**\r\n   * Load genres and platforms from API\r\n   */\r\n  const loadGenresAndPlatforms = async () => {\r\n    setIsLoadingData(true);\r\n    try {\r\n      const [genresData, platformsData] = await Promise.all([\r\n        api.admin.getAllGenres(),\r\n        api.admin.getAllPlatforms(),\r\n      ]);\r\n      setGenres(genresData);\r\n      setPlatforms(platformsData);\r\n    } catch (error) {\r\n      showAlert('error', 'Failed to load genres and platforms');\r\n      console.error('Failed to load genres/platforms', error);\r\n    } finally {\r\n      setIsLoadingData(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Show alert message with auto-dismiss\r\n   */\r\n  const showAlert = useCallback((type: 'success' | 'error', message: string) => {\r\n    setAlert({ type, message });\r\n    const duration = type === 'success' ? SUCCESS_MESSAGE_DURATION_MS : ERROR_MESSAGE_DURATION_MS;\r\n    setTimeout(() => setAlert({ type: null, message: '' }), duration);\r\n  }, []);\r\n\r\n  /**\r\n   * Handle form validation\r\n   */\r\n  const validateCreateForm = (): string | null => {\r\n    if (!name.trim()) {\r\n      return 'Name is required';\r\n    }\r\n    \r\n    if (name.trim().length < 2) {\r\n      return 'Name must be at least 2 characters';\r\n    }\r\n    \r\n    if (year && (parseInt(year) < MIN_YEAR || parseInt(year) > MAX_YEAR)) {\r\n      return `Year must be between ${MIN_YEAR} and ${MAX_YEAR}`;\r\n    }\r\n    \r\n    return null;\r\n  };\r\n\r\n  /**\r\n   * Handle create media item form submission\r\n   */\r\n  const handleCreateItem = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    // Validate form\r\n    const validationError = validateCreateForm();\r\n    if (validationError) {\r\n      showAlert('error', validationError);\r\n      return;\r\n    }\r\n    \r\n    setIsCreating(true);\r\n    \r\n    try {\r\n      await api.admin.createMediaItem({\r\n        category,\r\n        name: name.trim(),\r\n        year: year ? parseInt(year) : undefined,\r\n        genreIds: selectedGenres,\r\n        platformIds: selectedPlatforms,\r\n      });\r\n      \r\n      showAlert('success', 'Media item created successfully!');\r\n      \r\n      // Reset form\r\n      setName('');\r\n      setYear('');\r\n      setSelectedGenres([]);\r\n      setSelectedPlatforms([]);\r\n    } catch (error) {\r\n      if (error instanceof ApiError) {\r\n        showAlert('error', error.message);\r\n      } else if (error instanceof NetworkError) {\r\n        showAlert('error', 'Network error. Please check your connection.');\r\n      } else if (error instanceof TimeoutError) {\r\n        showAlert('error', 'Request timeout. Please try again.');\r\n      } else {\r\n        showAlert('error', 'Failed to create media item');\r\n      }\r\n      console.error('Create item error:', error);\r\n    } finally {\r\n      setIsCreating(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Clear existing polling interval\r\n   */\r\n  const clearPolling = useCallback(() => {\r\n    if (pollingIntervalRef.current) {\r\n      clearInterval(pollingIntervalRef.current);\r\n      pollingIntervalRef.current = null;\r\n    }\r\n    isPollingRef.current = false;\r\n  }, []);\r\n\r\n  /**\r\n   * Poll for job status\r\n   */\r\n  const pollStatus = useCallback(async (currentJobId: number) => {\r\n    // Prevent concurrent polling\r\n    if (isPollingRef.current) return;\r\n    isPollingRef.current = true;\r\n\r\n    try {\r\n      const status = await api.admin.getJobStatus(currentJobId);\r\n      setJobStatus(status);\r\n\r\n      // Calculate progress\r\n      const readCount = status.readCount || 0;\r\n      const writeCount = status.writeCount || 0;\r\n      const skipCount = status.skipCount || 0;\r\n      const processed = writeCount + skipCount;\r\n      const total = readCount;\r\n\r\n      setUploadProgress(prev => ({\r\n        ...prev,\r\n        processed,\r\n        total,\r\n        readCount,\r\n        writeCount,\r\n        skipCount,\r\n        status: status.status || 'RUNNING',\r\n      }));\r\n\r\n      // Stop polling if job is complete or failed\r\n      if (['COMPLETED', 'FAILED', 'STOPPED'].includes(status.status || '')) {\r\n        clearPolling();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to get job status', error);\r\n      // Don't stop polling on error, might be temporary\r\n    } finally {\r\n      isPollingRef.current = false;\r\n    }\r\n  }, [clearPolling]);\r\n\r\n  /**\r\n   * Handle CSV file upload\r\n   */\r\n  const handleUploadCSV = async () => {\r\n    if (!file) return;\r\n\r\n    // Validate file\r\n    if (!file.name.endsWith('.csv')) {\r\n      showAlert('error', 'Please select a valid CSV file');\r\n      return;\r\n    }\r\n\r\n    // Clear any existing polling\r\n    clearPolling();\r\n    setIsUploading(true);\r\n\r\n    try {\r\n      const response = await api.admin.uploadCSV(file);\r\n      const newJobId = response.correlationId;\r\n      \r\n      setJobStatus(null);\r\n      setUploadProgress({\r\n        show: true,\r\n        processed: 0,\r\n        total: 0,\r\n        readCount: 0,\r\n        writeCount: 0,\r\n        skipCount: 0,\r\n        status: 'STARTING',\r\n      });\r\n\r\n      // Start polling for status\r\n      await pollStatus(newJobId);\r\n      pollingIntervalRef.current = setInterval(() => pollStatus(newJobId), POLLING_INTERVAL_MS);\r\n    } catch (error) {\r\n      setUploadProgress({\r\n        show: false,\r\n        processed: 0,\r\n        total: 0,\r\n        readCount: 0,\r\n        writeCount: 0,\r\n        skipCount: 0,\r\n        status: 'FAILED',\r\n      });\r\n      \r\n      if (error instanceof ApiError) {\r\n        showAlert('error', error.message);\r\n      } else if (error instanceof NetworkError) {\r\n        showAlert('error', 'Network error. Please check your connection.');\r\n      } else if (error instanceof TimeoutError) {\r\n        showAlert('error', 'Request timeout. Please try again.');\r\n      } else {\r\n        showAlert('error', 'Failed to upload CSV');\r\n      }\r\n      console.error('Upload error:', error);\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Close progress modal\r\n   */\r\n  const handleCloseProgress = useCallback(() => {\r\n    clearPolling();\r\n    setUploadProgress({\r\n      show: false,\r\n      processed: 0,\r\n      total: 0,\r\n      readCount: 0,\r\n      writeCount: 0,\r\n      skipCount: 0,\r\n      status: 'STARTING',\r\n    });\r\n    setJobStatus(null);\r\n    setFile(null);\r\n  }, [clearPolling]);\r\n\r\n  /**\r\n   * Toggle genre selection\r\n   */\r\n  const toggleGenre = (genreId: number) => {\r\n    setSelectedGenres(prev =>\r\n      prev.includes(genreId)\r\n        ? prev.filter(id => id !== genreId)\r\n        : [...prev, genreId]\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Toggle platform selection\r\n   */\r\n  const togglePlatform = (platformId: number) => {\r\n    setSelectedPlatforms(prev =>\r\n      prev.includes(platformId)\r\n        ? prev.filter(id => id !== platformId)\r\n        : [...prev, platformId]\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Calculate progress percentage\r\n   */\r\n  const progressPercentage = uploadProgress.total > 0\r\n    ? Math.min((uploadProgress.processed / uploadProgress.total) * 100, 100)\r\n    : 0;\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Alert Messages */}\r\n      {alert.type && (\r\n        <div\r\n          className={`p-4 rounded-lg flex items-center gap-3 ${\r\n            alert.type === 'success'\r\n              ? 'bg-green-900 bg-opacity-20 border border-green-700 text-green-400'\r\n              : 'bg-red-900 bg-opacity-20 border border-red-700 text-red-400'\r\n          }`}\r\n          role=\"alert\"\r\n        >\r\n          {alert.type === 'success' ? (\r\n            <CheckCircle size={20} />\r\n          ) : (\r\n            <AlertCircle size={20} />\r\n          )}\r\n          <span>{alert.message}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Tab Navigation */}\r\n      <div className=\"flex gap-2\" role=\"tablist\">\r\n        <button\r\n          role=\"tab\"\r\n          aria-selected={activeTab === 'create'}\r\n          aria-controls=\"create-panel\"\r\n          onClick={() => setActiveTab('create')}\r\n          className={`px-4 py-2 rounded transition-colors ${\r\n            activeTab === 'create'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\r\n          }`}\r\n        >\r\n          Create Item\r\n        </button>\r\n        <button\r\n          role=\"tab\"\r\n          aria-selected={activeTab === 'update'}\r\n          aria-controls=\"update-panel\"\r\n          onClick={() => setActiveTab('update')}\r\n          className={`px-4 py-2 rounded transition-colors ${\r\n            activeTab === 'update'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\r\n          }`}\r\n        >\r\n          Update Item\r\n        </button>\r\n        <button\r\n          role=\"tab\"\r\n          aria-selected={activeTab === 'upload'}\r\n          aria-controls=\"upload-panel\"\r\n          onClick={() => setActiveTab('upload')}\r\n          className={`px-4 py-2 rounded transition-colors ${\r\n            activeTab === 'upload'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\r\n          }`}\r\n        >\r\n          Upload CSV\r\n        </button>\r\n      </div>\r\n\r\n      {/* Update Panel */}\r\n      {activeTab === 'update' && (\r\n        <div role=\"tabpanel\" id=\"update-panel\">\r\n          <UpdateMediaItem genres={genres} platforms={platforms} />\r\n        </div>\r\n      )}\r\n\r\n      {/* Create Panel */}\r\n      {activeTab === 'create' && (\r\n        <div role=\"tabpanel\" id=\"create-panel\">\r\n          <form\r\n            onSubmit={handleCreateItem}\r\n            className=\"space-y-4 bg-gray-800 p-6 rounded border border-gray-700\"\r\n          >\r\n            {isLoadingData ? (\r\n              <div className=\"text-center py-8 text-gray-400\">\r\n                Loading genres and platforms...\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <div>\r\n                  <label htmlFor=\"category\" className=\"block text-sm text-gray-300 mb-2\">\r\n                    Category\r\n                  </label>\r\n                  <select\r\n                    id=\"category\"\r\n                    value={category}\r\n                    onChange={(e) => setCategory(e.target.value as Category)}\r\n                    className=\"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none\"\r\n                  >\r\n                    <option value=\"MOVIE\">Movie</option>\r\n                    <option value=\"SERIES\">Series</option>\r\n                    <option value=\"GAME\">Game</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label htmlFor=\"name\" className=\"block text-sm text-gray-300 mb-2\">\r\n                    Name *\r\n                  </label>\r\n                  <input\r\n                    id=\"name\"\r\n                    type=\"text\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    className=\"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none\"\r\n                    required\r\n                    minLength={2}\r\n                    maxLength={200}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label htmlFor=\"year\" className=\"block text-sm text-gray-300 mb-2\">\r\n                    Year (Optional)\r\n                  </label>\r\n                  <input\r\n                    id=\"year\"\r\n                    type=\"number\"\r\n                    value={year}\r\n                    onChange={(e) => setYear(e.target.value)}\r\n                    placeholder={`e.g., ${CURRENT_YEAR}`}\r\n                    min={MIN_YEAR}\r\n                    max={MAX_YEAR}\r\n                    className=\"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm text-gray-300 mb-2\">\r\n                    Genres ({selectedGenres.length} selected)\r\n                  </label>\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600\">\r\n                    {genres.map((genre) => (\r\n                      <label\r\n                        key={genre.id}\r\n                        className=\"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors\"\r\n                      >\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedGenres.includes(genre.id)}\r\n                          onChange={() => toggleGenre(genre.id)}\r\n                          className=\"cursor-pointer\"\r\n                        />\r\n                        <span className=\"text-sm\">{genre.name}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm text-gray-300 mb-2\">\r\n                    Platforms ({selectedPlatforms.length} selected)\r\n                  </label>\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 bg-gray-700 rounded border border-gray-600\">\r\n                    {platforms.map((platform) => (\r\n                      <label\r\n                        key={platform.id}\r\n                        className=\"flex items-center gap-2 text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors\"\r\n                      >\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedPlatforms.includes(platform.id)}\r\n                          onChange={() => togglePlatform(platform.id)}\r\n                          className=\"cursor-pointer\"\r\n                        />\r\n                        <span className=\"text-sm\">{platform.name}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={isCreating || isLoadingData}\r\n                  className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  {isCreating ? 'Creating...' : 'Create Media Item'}\r\n                </button>\r\n              </>\r\n            )}\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* Upload Panel */}\r\n      {activeTab === 'upload' && (\r\n        <div role=\"tabpanel\" id=\"upload-panel\" className=\"space-y-4 bg-gray-800 p-6 rounded border border-gray-700\">\r\n          <div>\r\n            <label htmlFor=\"csv-file\" className=\"block text-sm text-gray-300 mb-2\">\r\n              Upload CSV File\r\n            </label>\r\n            <input\r\n              id=\"csv-file\"\r\n              type=\"file\"\r\n              accept=\".csv\"\r\n              onChange={(e) => setFile(e.target.files?.[0] || null)}\r\n              className=\"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 file:cursor-pointer\"\r\n            />\r\n            <div className=\"mt-2 space-y-1\">\r\n              <p className=\"text-xs text-gray-400\">\r\n                CSV format: category, name, year, genres (pipe-separated), platforms (pipe-separated)\r\n              </p>\r\n              <p className=\"text-xs text-gray-400\">\r\n                Example: MOVIE,The Matrix,1999,Action|Sci-Fi,Netflix|Amazon Prime\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleUploadCSV}\r\n            disabled={!file || isUploading}\r\n            className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-colors\"\r\n          >\r\n            <Upload size={16} />\r\n            {isUploading ? 'Uploading...' : 'Upload CSV'}\r\n          </button>\r\n\r\n          {jobStatus && !uploadProgress.show && (\r\n            <div className=\"mt-4 p-4 bg-gray-700 rounded border border-gray-600\">\r\n              <h3 className=\"font-medium text-white mb-2\">Last Job Status</h3>\r\n              <div className=\"space-y-1 text-sm\">\r\n                <p className=\"text-gray-300\">\r\n                  Status: <span className=\"text-white font-medium\">{jobStatus.status}</span>\r\n                </p>\r\n                <p className=\"text-gray-300\">\r\n                  Read: <span className=\"text-white font-medium\">{jobStatus.readCount || 0}</span>\r\n                </p>\r\n                <p className=\"text-gray-300\">\r\n                  Written: <span className=\"text-white font-medium\">{jobStatus.writeCount || 0}</span>\r\n                </p>\r\n                <p className=\"text-gray-300\">\r\n                  Skipped: <span className=\"text-white font-medium\">{jobStatus.skipCount || 0}</span>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Upload Progress Modal */}\r\n      {uploadProgress.show && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\"\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-labelledby=\"progress-modal-title\"\r\n        >\r\n          <div className=\"bg-gray-800 rounded-lg p-6 max-w-lg w-full border border-gray-700\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h3 id=\"progress-modal-title\" className=\"text-xl font-bold text-white\">\r\n                Processing CSV Import\r\n              </h3>\r\n              {['COMPLETED', 'FAILED', 'STOPPED'].includes(uploadProgress.status) && (\r\n                <button\r\n                  onClick={handleCloseProgress}\r\n                  className=\"text-gray-400 hover:text-white transition-colors\"\r\n                  aria-label=\"Close progress modal\"\r\n                >\r\n                  <X size={20} />\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              {/* Status Badge */}\r\n              <div className=\"flex items-center gap-2\">\r\n                {uploadProgress.status === 'COMPLETED' && (\r\n                  <>\r\n                    <CheckCircle className=\"text-green-400\" size={20} />\r\n                    <span className=\"text-green-400 font-medium\">Completed</span>\r\n                  </>\r\n                )}\r\n                {uploadProgress.status === 'FAILED' && (\r\n                  <>\r\n                    <XCircle className=\"text-red-400\" size={20} />\r\n                    <span className=\"text-red-400 font-medium\">Failed</span>\r\n                  </>\r\n                )}\r\n                {['STARTING', 'RUNNING', 'STARTED'].includes(uploadProgress.status) && (\r\n                  <>\r\n                    <Clock className=\"text-blue-400 animate-spin\" size={20} />\r\n                    <span className=\"text-blue-400 font-medium\">Processing...</span>\r\n                  </>\r\n                )}\r\n                {uploadProgress.status === 'STOPPED' && (\r\n                  <>\r\n                    <XCircle className=\"text-yellow-400\" size={20} />\r\n                    <span className=\"text-yellow-400 font-medium\">Stopped</span>\r\n                  </>\r\n                )}\r\n              </div>\r\n\r\n              {/* Progress Bar */}\r\n              <div className=\"space-y-2\">\r\n                <div className=\"w-full bg-gray-700 rounded-full h-6 overflow-hidden\">\r\n                  <div\r\n                    className={`h-6 rounded-full transition-all duration-500 flex items-center justify-center text-xs font-medium ${\r\n                      uploadProgress.status === 'COMPLETED'\r\n                        ? 'bg-green-500'\r\n                        : uploadProgress.status === 'FAILED' || uploadProgress.status === 'STOPPED'\r\n                          ? 'bg-red-500'\r\n                          : 'bg-blue-600'\r\n                    }`}\r\n                    style={{ \r\n                      width: `${progressPercentage}%`, \r\n                      minWidth: progressPercentage > 0 ? '2rem' : '0' \r\n                    }}\r\n                  >\r\n                    {progressPercentage > 10 && (\r\n                      <span className=\"text-white\">{Math.round(progressPercentage)}%</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex justify-between text-sm text-gray-300\">\r\n                  <span>\r\n                    {uploadProgress.readCount > 0\r\n                      ? `Processed ${uploadProgress.processed} of ${uploadProgress.total} items`\r\n                      : 'Reading CSV file...'}\r\n                  </span>\r\n                  {progressPercentage > 0 && progressPercentage < 100 && (\r\n                    <span>{Math.round(progressPercentage)}%</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Statistics */}\r\n              {(uploadProgress.status === 'COMPLETED' ||\r\n                uploadProgress.status === 'FAILED' ||\r\n                uploadProgress.status === 'STOPPED' ||\r\n                uploadProgress.readCount > 0) && (\r\n                <div className=\"bg-gray-700 rounded p-4 space-y-2\">\r\n                  <h4 className=\"text-white font-medium mb-3\">Statistics</h4>\r\n                  <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                    <div>\r\n                      <span className=\"text-gray-400\">Total Read:</span>\r\n                      <span className=\"text-white ml-2 font-medium\">\r\n                        {uploadProgress.readCount || 0}\r\n                      </span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"text-gray-400\">Successfully Written:</span>\r\n                      <span className=\"text-green-400 ml-2 font-medium\">\r\n                        {uploadProgress.writeCount || 0}\r\n                      </span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"text-gray-400\">Skipped:</span>\r\n                      <span className=\"text-yellow-400 ml-2 font-medium\">\r\n                        {uploadProgress.skipCount || 0}\r\n                      </span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"text-gray-400\">Processed:</span>\r\n                      <span className=\"text-blue-400 ml-2 font-medium\">\r\n                        {uploadProgress.processed || 0}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  {uploadProgress.status === 'COMPLETED' && (\r\n                    <div className=\"mt-3 pt-3 border-t border-gray-600\">\r\n                      <p className=\"text-green-400 text-sm font-medium flex items-center gap-2\">\r\n                        <CheckCircle size={16} />\r\n                        Import completed successfully!\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  {uploadProgress.status === 'FAILED' && (\r\n                    <div className=\"mt-3 pt-3 border-t border-gray-600\">\r\n                      <p className=\"text-red-400 text-sm font-medium flex items-center gap-2\">\r\n                        <XCircle size={16} />\r\n                        Import failed. Please check the file format and try again.\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 11v6', key: 'nco0om' }],\n  ['path', { d: 'M14 11v6', key: 'outv1u' }],\n  ['path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6', key: 'miytrc' }],\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2', key: 'e791ji' }],\n];\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTQgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTkgNnYxNGEyIDIgMCAwIDEtMiAySDdhMiAyIDAgMCAxLTItMlY2IiAvPgogIDxwYXRoIGQ9Ik0zIDZoMTgiIC8+CiAgPHBhdGggZD0iTTggNlY0YTIgMiAwIDAgMSAyLTJoNGEyIDIgMCAwIDEgMiAydjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('trash-2', __iconNode);\n\nexport default Trash2;\n"],"names":["ConfirmModal","_ref","isOpen","title","message","confirmText","cancelText","confirmVariant","isLoading","onConfirm","onCancel","modalRef","useRef","cancelButtonRef","confirmButtonRef","useEffect","handleEscape","e","key","document","addEventListener","removeEventListener","_cancelButtonRef$curr","modal","current","focus","focusableElements","querySelectorAll","firstElement","lastElement","length","handleTab","shiftKey","activeElement","preventDefault","handleBackdropClick","useCallback","target","currentTarget","handleConfirm","async","confirmButtonClass","_jsx","className","concat","onClick","role","children","_jsxs","ref","AlertTriangle","size","id","disabled","X","getCategoryColor","category","ChevronRight","createLucideIcon","d","Search","cx","cy","r","ChevronLeft","Upload","CircleX","Clock","CURRENT_YEAR","Date","getFullYear","MIN_YEAR","MAX_YEAR","UpdateMediaItem","genres","propsGenres","platforms","propsPlatforms","searchQuery","setSearchQuery","useState","searchResults","setSearchResults","isSearching","setIsSearching","hasSearched","setHasSearched","searchTimeoutRef","pagination","setPagination","currentPage","totalPages","totalCount","hasNextPage","hasPrevPage","cursors","selectedItem","setSelectedItem","year","setYear","selectedGenres","setSelectedGenres","selectedPlatforms","setSelectedPlatforms","isUpdating","setIsUpdating","isDeleting","setIsDeleting","setGenres","setPlatforms","isLoadingReferenceData","setIsLoadingReferenceData","deleteConfirm","setDeleteConfirm","alert","setAlert","type","showAlert","setTimeout","loadGenresAndPlatforms","genresData","platformsData","Promise","all","api","admin","getAllGenres","getAllPlatforms","error","console","loadPage","pageNum","cursor","response","media","searchMediaItemsCursor","query","cursorName","name","cursorId","limit","items","newTotalPages","Math","ceil","prev","newCursors","hasMore","nextCursor","push","ApiError","NetworkError","TimeoutError","handleSearch","clearTimeout","handleNextPage","handlePrevPage","handleChooseItem","_item$year","item","toString","map","g","p","handleUpdate","validationError","parseInt","updateMediaItem","undefined","genreIds","platformIds","handleDelete","deleteMediaItem","handleCancel","CheckCircle","AlertCircle","_Fragment","htmlFor","value","onChange","placeholder","min","max","genre","checked","includes","toggleGenre","genreId","filter","platform","togglePlatform","platformId","Trash2","handleSearchInputChange","onKeyPress","scope","join","AdminPanel","activeTab","setActiveTab","isLoadingData","setIsLoadingData","setCategory","setName","isCreating","setIsCreating","file","setFile","jobStatus","setJobStatus","isUploading","setIsUploading","pollingIntervalRef","isPollingRef","uploadProgress","setUploadProgress","show","processed","total","readCount","writeCount","skipCount","status","clearInterval","handleCloseProgress","clearPolling","pollStatus","getJobStatus","currentJobId","_objectSpread","progressPercentage","onSubmit","trim","createMediaItem","required","minLength","maxLength","accept","_e$target$files","files","endsWith","newJobId","uploadCSV","correlationId","setInterval","XCircle","style","width","minWidth","round"],"ignoreList":[],"sourceRoot":""}